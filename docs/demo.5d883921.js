parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Oz7s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.charType=l,exports.codePointAt=u,exports.countColumn=f,exports.findColumn=a,exports.fromCodePoint=o,exports.isExtendingChar=e,exports.isWordChar=r,exports.minPairCodePoint=exports.Text=exports.Line=exports.CharType=void 0;let t=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u180b-\u180d\u18a9\u200c\u200d]/;try{t=new RegExp("\\p{Grapheme_Extend}","u")}catch(I){}function e(e){return e>=768&&(e>=56320&&e<57344||t.test(String.fromCharCode(e)))}const n=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let i;try{i=new RegExp("[\\p{Alphabetic}_]","u")}catch(I){}function s(t){return i?i.test(t):/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||n.test(t))}function r(t,e){return e?!!(e.source.indexOf("\\w")>-1&&s(t))||e.test(t):s(t)}var h;function l(t,e){return/\s/.test(t)?h.Space:r(t,e)?h.Word:h.Other}function u(t,e){let n=t.charCodeAt(e);if(n<55296||n>56319||e+1==t.length)return n;let i=t.charCodeAt(e+1);return i<56320||i>57343?n:i-56320+(n-55296<<10)+65536}function o(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}exports.CharType=h,function(t){t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other"}(h||(exports.CharType=h={}));const c=65536;function f(t,n,i){for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);9==r?n+=i-n%i:(r<768||!e(r))&&n++}return n}function a(t,n,i,s){for(let r=0;r<t.length;r++){let h=t.charCodeAt(r);if(!e(h)){if(n>=i)return{offset:r,leftOver:0};n+=9==h?s-n%s:1}}return{offset:t.length,leftOver:i-n}}exports.minPairCodePoint=65536;class g{constructor(){}lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);for(let e=0;e<d.length;e+=2){if(d[e]!=this)continue;let n=d[e+1];if(n.start<=t&&n.end>=t)return n}return m(this,this.lineInner(t,!1,1,0).finish(this))}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);for(let e=0;e<d.length;e+=2){if(d[e]!=this)continue;let n=d[e+1];if(n.number==t)return n}return m(this,this.lineInner(t,!0,1,0).finish(this))}replace(t,e,n){if(0==n.length)throw new RangeError("An inserted range must have at least one line");return this.replaceInner(t,e,n,L(n))}sliceLines(t,e=this.length){return this.sliceTo(t,e,[""])}slice(t,e,n="\n"){return this.sliceLines(t,e).join(n)}eq(t){return this==t||k(this,t)}iter(t=1){return new T(this,t)}iterRange(t,e=this.length){return new B(this,t,e)}iterLines(t=0){return new E(this,t)}toString(){return this.slice(0,this.length)}static of(t){if(0==t.length)throw new RangeError("A document must have at least one line");let e=L(t);return e<1024?new w(t,e):v.from(w.split(t,[]),e)}}exports.Text=g;let d=[],p=-2,x=12;function m(t,e){return d[p=(p+2)%x]=t,d[p+1]=e,e}class w extends g{constructor(t,e=L(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}replaceInner(t,e,n,i){return g.of(b(this.text,b(n,C(this.text,0,t)),e))}sliceTo(t,e=this.length,n){return b(this.text,n,t,e)}lineInner(t,e,n,i){for(let s=0;;s++){let r=this.text[s],h=i+r.length;if((e?n:h)>=t)return new A(i,h,n,r);i=h+1,n++}}decomposeStart(t,e){e.push(new w(C(this.text,0,t),t))}decomposeEnd(t,e){e.push(new w(C(this.text,t),this.length-t))}lastLineLength(){return this.text[this.text.length-1].length}firstLineLength(){return this.text[0].length}static split(t,e){let n=[],i=-1;for(let s of t)for(;;){let t=i+s.length+1;if(t<512){i=t,n.push(s);break}let r=512-i-1,h=s.charCodeAt(r);h>=56320&&h<57344&&r++,n.push(s.slice(0,r)),e.push(new w(n,512)),s=s.slice(r),i=-1,n=[]}return-1!=i&&e.push(new w(n,i)),e}}class v extends g{constructor(t,e){super(),this.children=t,this.length=e,this.lines=1;for(let n of t)this.lines+=n.lines-1}replaceInner(t,e,n,i){let s,r=i-(e-t),h=this.length+r;if(h<=512)return new w(b(this.sliceLines(e),b(n,this.sliceTo(0,t,[""]))),h);for(let l=0,u=0;l<this.children.length;l++){let i=this.children[l],o=u+i.length;if(t>=u&&e<=o&&(r>0?i.length+r<Math.max(h>>2,1024):i.length+r>h>>4))return(s=this.children.slice())[l]=i.replace(t-u,e-u,n),new v(s,h);o>=t&&(null==s&&(s=this.children.slice(0,l)),u<t&&(o==t?s.push(i):i.decomposeStart(t-u,s)),u<=t&&o>=t&&w.split(n,s),u>=e?s.push(i):o>e&&i.decomposeEnd(e-u,s)),u=o}return s?v.from(s,h):this}sliceTo(t,e,n){let i=0;for(let s of this.children){let r=i+s.length;e>i&&t<r&&s.sliceTo(Math.max(0,t-i),Math.min(s.length,e-i),n),i=r}return n}lineInner(t,e,n,i){for(let s=0;;s++){let r=this.children[s],h=i+r.length,l=n+r.lines-1;if((e?l:h)>=t){let l,u=r.lineInner(t,e,n,i);return u.start==i&&(l=this.lineLengthTo(s))&&(u.start-=l,u.content=null),u.end==h&&(l=this.lineLengthFrom(s+1))&&(u.end+=l,u.content=null),u}i=h,n=l}}decomposeStart(t,e){for(let n=0,i=0;;n++){let s=this.children[n],r=i+s.length;if(!(r<=t)){i<t&&s.decomposeStart(t-i,e);break}e.push(s),i=r}}decomposeEnd(t,e){let n=0;for(let i of this.children){let s=n+i.length;n>=t?e.push(i):s>t&&n<t&&i.decomposeEnd(t-n,e),n=s}}lineLengthTo(t){let e=0;for(let n=t-1;n>=0;n--){let t=this.children[n];if(t.lines>1)return e+t.lastLineLength();e+=t.length}return e}lastLineLength(){return this.lineLengthTo(this.children.length)}lineLengthFrom(t){let e=0;for(let n=t;n<this.children.length;n++){let t=this.children[n];if(t.lines>1)return e+t.firstLineLength();e+=t.length}return e}firstLineLength(){return this.lineLengthFrom(0)}static from(t,e){if(e<1024){let n=[""];for(let e of t)e.sliceTo(0,e.length,n);return new w(n,e)}let n=Math.max(512,e>>3),i=n<<1,s=n>>1,r=[],h=0,l=[];function u(t){let e,c=t.length;if(c>i&&t instanceof v)for(let n of t.children)u(n);else c>s&&(h>s||0==h)?(o(),r.push(t)):t instanceof w&&h>0&&(e=l[l.length-1])instanceof w&&t.length+e.length<=512?(h+=c,l[l.length-1]=new w(b(t.text,e.text.slice()),t.length+e.length)):(h+c>n&&o(),h+=c,l.push(t))}function o(){0!=h&&(r.push(1==l.length?l[0]:v.from(l,h)),h=0,l.length=0)}for(let c of t)u(c);return o(),1==r.length?r[0]:new v(r,e)}}function L(t){let e=-1;for(let n of t)e+=n.length+1;return e}function b(t,e,n=0,i=1e9){for(let s=0,r=0,h=!0;r<t.length&&s<=i;r++){let l=t[r],u=s+l.length;u>=n&&(u>i&&(l=l.slice(0,i-s)),s<n&&(l=l.slice(n-s)),h?(e[e.length-1]+=l,h=!1):e.push(l)),s=u+1}return e}function C(t,e,n){return b(t,[""],e,n)}function k(t,e){if(t.length!=e.length||t.lines!=e.lines)return!1;let n=new T(t),i=new T(e);for(let s=0,r=0;;){if(n.lineBreak!=i.lineBreak||n.done!=i.done)return!1;if(n.done)return!0;if(n.lineBreak)n.next(),i.next(),s=r=0;else{let t=n.value.slice(s),e=i.value.slice(r);if(t.length==e.length){if(t!=e)return!1;n.next(),i.next(),s=r=0}else if(t.length>e.length){if(t.slice(0,e.length)!=e)return!1;s+=e.length,i.next(),r=0}else{if(e.slice(0,t.length)!=t)return!1;r+=t.length,n.next(),s=0}}}}g.empty=g.of([""]);class T{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?0:t instanceof w?t.text.length:t.children.length]}next(t=0){for(;;){let e=this.nodes.length-1;if(e<0)return this.done=!0,this.value="",this.lineBreak=!1,this;let n=this.nodes[e],i=this.offsets[e];if(n instanceof w){if(i!=(this.dir>0?0:n.text.length)&&!this.lineBreak){if(this.lineBreak=!0,0==t)return this.value="\n",this;t--;continue}let s=n.text[i-(this.dir<0?1:0)];if(this.offsets[e]=i+=this.dir,i==(this.dir>0?n.text.length:0)&&(this.nodes.pop(),this.offsets.pop()),this.lineBreak=!1,s.length>t)return this.value=0==t?s:this.dir>0?s.slice(t):s.slice(0,s.length-t),this;t-=s.length}else if(i==(this.dir>0?n.children.length:0))this.nodes.pop(),this.offsets.pop();else{let s=n.children[this.dir>0?i:i-1],r=s.length;this.offsets[e]=i+this.dir,t>r?t-=r:(this.nodes.push(s),this.offsets.push(this.dir>0?0:s instanceof w?s.text.length:s.children.length))}}}}class B{constructor(t,e,n){this.value="",this.cursor=new T(t,e>n?-1:1),e>n?(this.skip=t.length-e,this.limit=e-n):(this.skip=e,this.limit=n-e)}next(){if(this.limit<=0)this.limit=-1;else{let{value:t,lineBreak:e}=this.cursor.next(this.skip);this.skip=0,this.value=t;let n=e?1:t.length;n>this.limit&&(this.value=this.cursor.dir>0?t.slice(0,this.limit):t.slice(n-this.limit)),this.limit-=this.value.length}return this}get lineBreak(){return this.cursor.lineBreak}get done(){return this.limit<0}}class E{constructor(t,e=0){this.value="",this.done=!1,this.cursor=t.iter(),this.skip=e}next(){if(this.cursor.done)return this.done=!0,this.value="",this;for(this.value="";;){let{value:t,lineBreak:e,done:n}=this.cursor.next(this.skip);if(this.skip=0,n||e)return this;this.value+=t}}get lineBreak(){return!1}}class A{constructor(t,e,n,i){this.start=t,this.end=e,this.number=n,this.content=i}get length(){return this.end-this.start}slice(t=0,e=this.length){if("string"==typeof this.content)return e==t+1?this.content.charAt(t):this.content.slice(t,e);if(t==e)return"";let n=this.content.slice(t,e);return 0==t&&e==this.length&&(this.content=n),n}finish(t){return null==this.content&&(this.content=new S(t,this.start)),this}}exports.Line=A;class S{constructor(t,e){this.doc=t,this.start=e,this.cursor=null,this.strings=null}slice(t,e){this.cursor||(this.cursor=this.doc.iter(),this.strings=[this.cursor.next(this.start).value]);for(let n="",i=0,s=0;;s++){s==this.strings.length&&this.strings.push(this.cursor.next().value);let r=this.strings[s],h=i+r.length;if(!(h<=t)){if(n+=r.slice(Math.max(0,t-i),Math.min(r.length,e-i)),h>=e)return n;i+=r.length}}}}
},{}],"rdIx":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultBufferLength=1024;var e=function(){function t(t,e){this.enter=t,this.leave=e,this.result=void 0}return Object.defineProperty(t.prototype,"done",{get:function(){return void 0!==this.result},enumerable:!0,configurable:!0}),t.prototype.doEnter=function(t,e,r){var n=this.enter(t,e,r);return void 0===n||(!1!==n&&(this.result=n),!1)},t}(),r=0,n=function(){function t(t){var e=(void 0===t?{}:t).deserialize;this.id=r++,this.deserialize=e||function(){throw new Error("This node type doesn't define a deserialize function")}}return t.string=function(){return new t({deserialize:function(t){return t}})},t.number=function(){return new t({deserialize:Number})},t.flag=function(){return new t({deserialize:function(){return!0}})},t.prototype.set=function(t,e){return t[this.id]=e,t},t.prototype.add=function(t){return new i(this,"function"==typeof t?t:o.match(t))},t.error=t.flag(),t.skipped=t.flag(),t.delim=t.string(),t.top=t.flag(),t}();exports.NodeProp=n;var i=function(){return function(t,e){this.prop=t,this.f=e}}();exports.NodePropSource=i;var o=function(){function t(t,e,r){this.name=t,this.props=e,this.id=r}return t.prototype.prop=function(t){return this.props[t.id]},t.match=function(t){var e=Object.create(null);for(var r in t)for(var n=0,i=r.split(" ");n<i.length;n++){var o=i[n];e[o]=t[r]}return function(t){return e[t.name]}},t.none=new t("",Object.create(null),0),t}();exports.NodeType=o;var f=function(){function t(t){this.types=t;for(var e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node group")}return t.prototype.extend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=[],i=0,f=this.types;i<f.length;i++){for(var s=f[i],u=null,h=0,p=e;h<p.length;h++){var a=p[h],l=a.f(s);if(void 0!==l){if(!u)for(var c in u=Object.create(null),s.props)u[c]=s.props[c];u[a.prop.id]=l}}n.push(u?new o(s.name,u,s.id):s)}return new t(n)},t}();exports.NodeGroup=f;var s=function(){function t(){}return Object.defineProperty(t.prototype,"name",{get:function(){return this.type.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){for(var t=0,e=this.parent;e;e=e.parent)t++;return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var t=this;t.parent;)t=t.parent;return t},enumerable:!0,configurable:!0}),t.prototype.resolve=function(t,e){void 0===e&&(e=0);var r=this.resolveAt(t);if(0!=e)for(;;){var n=e<0?r.childBefore(t):r.childAfter(t);if(!n||(e<0?n.end:n.start)!=t)break;r=n}return r},Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.childAfter(this.start-1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.childBefore(this.end+1)},enumerable:!0,configurable:!0}),t}();exports.Subtree=s;var u=function(r){function i(t,e,n,i){var o=r.call(this)||this;return o.type=t,o.children=e,o.positions=n,o.length=i,o}return t(i,r),Object.defineProperty(i.prototype,"start",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"end",{get:function(){return this.length},enumerable:!0,configurable:!0}),i.prototype.toString=function(){var t=this.children.map(function(t){return t.toString()}).join();return this.name?(/\W/.test(this.name)&&!this.type.prop(n.error)?JSON.stringify(this.name):this.name)+(t.length?"("+t+")":""):t},i.prototype.partial=function(t,e,r,n,o){for(var f=0;f<this.children.length;f++){var s=this.positions[f];if(s>e)break;var u=this.children[f],h=s+u.length;h<t||(t<=s&&e>=h?(n.push(u),o.push(s+r)):u instanceof i&&u.partial(t-s,e-s,r+s,n,o))}},i.prototype.applyChanges=function(t){if(0==t.length)return this;var e=[],r=[];function f(t,e,r){var i=-1;return t.iterate({from:e,to:r<0?0:t.length,enter:function(){return i<0&&void 0},leave:function(t,o,f){i<0&&!t.prop(n.error)&&(i=r<0?Math.min(e,f-1):Math.max(e,o+1))}}),i>-1?i:r<0?0:t.length}for(var s=0,u=0,h=0;;u++){var p=u==t.length?null:t[u],a=p?f(this,p.fromA,-1):this.length;if(a>h&&this.partial(h,a,s,e,r),!p)break;h=f(this,p.toA,1),s+=p.toB-p.fromB-(p.toA-p.fromA)}return new i(o.none,e,r,this.length+s)},i.prototype.cut=function(t){if(t>=this.length)return this;for(var e=[],r=[],n=0;n<this.children.length;n++){var o=this.positions[n];if(o>=t)break;var f=this.children[n],s=o+f.length;e.push(s<=t?f:f.cut(t-o)),r.push(o)}return new i(this.type,e,r,t)},i.prototype.iterate=function(t){var r=t.from,n=void 0===r?this.start:r,i=t.to,o=void 0===i?this.end:i,f=t.enter,s=t.leave,u=new e(f,s);return this.iterInner(n,o,0,u),u.result},i.prototype.iterInner=function(t,e,r,n){if(!this.type.name||n.doEnter(this.type,r,r+this.length)){if(t<=e)for(var i=0;i<this.children.length&&!n.done;i++){var o=this.children[i],f=(s=this.positions[i]+r)+o.length;if(s>e)break;f<t||o.iterInner(t,e,s,n)}else for(i=this.children.length-1;i>=0&&!n.done;i--){var s;o=this.children[i];if((f=(s=this.positions[i]+r)+o.length)<e)break;s>t||o.iterInner(t,e,s,n)}n.leave&&this.type.name&&n.leave(this.type,r,r+this.length)}},i.prototype.resolveAt=function(t){if(h==this)for(var e=p;;){var r=e.parent;if(!r)break;if(e.start<t&&e.end>t)return e.resolve(t);e=r}return h=this,p=this.resolveInner(t,0,this)},i.prototype.childBefore=function(t){return this.findChild(t,-1,0,this)},i.prototype.childAfter=function(t){return this.findChild(t,1,0,this)},i.prototype.findChild=function(t,e,r,n){for(var o=0;o<this.children.length;o++){var f=this.positions[o]+r,s=-1;if(f>=t)if(e<0&&o>0)s=o-1;else{if(!(e>0))break;s=o}if(s<0&&(f+this.children[o].length>t||e<0&&o==this.children.length-1)&&(s=o),s>=0){var u=this.children[s],h=this.positions[s]+r;if(0==u.length&&h==t)continue;if(u instanceof i)return u.type.name?new l(u,h,n):u.findChild(t,e,h,n);var p=u.findIndex(t,e,h,0,u.buffer.length);if(p>-1)return new c(u,h,p,n)}}return null},i.prototype.resolveInner=function(t,e,r){var n=this.findChild(t,0,e,r);return n?n.resolveAt(t):r},i.prototype.append=function(t){if(t.children.length&&t.positions[0]<this.length)throw new Error("Can't append overlapping trees");return new i(this.type,this.children.concat(t.children),this.positions.concat(t.positions),t.length)},i.prototype.balance=function(t){return void 0===t&&(t=exports.DefaultBufferLength),this.children.length<=v?this:g(this.type,o.none,this.children,this.positions,0,this.children.length,0,t,this.length)},i.build=function(t){return b(t)},i.empty=new i(o.none,[],[],0),i}(s);exports.Tree=u,u.prototype.parent=null;var h=u.empty,p=u.empty,a=function(){function t(t,e,r,n){void 0===n&&(n=o.none),this.buffer=t,this.length=e,this.group=r,this.type=n}return t.prototype.toString=function(){for(var t=[],e=0;e<this.buffer.length;)e=this.childToString(e,t);return t.join(",")},t.prototype.childToString=function(t,e){var r=this.buffer[t],i=this.buffer[t+3],o=this.group.types[r],f=o.name;if(/\W/.test(f)&&!o.prop(n.error)&&(f=JSON.stringify(f)),i>(t+=4)){for(var s=[];t<i;)t=this.childToString(t,s);f+="("+s.join(",")+")"}return e.push(f),t},t.prototype.cut=function(e){for(var r=0;r<this.buffer.length&&this.buffer[r+1]<e;)r+=4;for(var n=new Uint16Array(r),i=0;i<r;i+=4)n[i]=this.buffer[i],n[i+1]=this.buffer[i+1],n[i+2]=Math.min(e,this.buffer[i+2]),n[i+3]=Math.min(this.buffer[i+3],r);return new t(n,Math.min(e,this.length),this.group)},t.prototype.iterate=function(t){var r=t.from,n=void 0===r?0:r,i=t.to,o=void 0===i?this.length:i,f=t.enter,s=t.leave,u=new e(f,s);return this.iterInner(n,o,0,u),u.result},t.prototype.iterInner=function(t,e,r,n){if(t<=e)for(var i=0;i<this.buffer.length;)i=this.iterChild(t,e,r,i,n);else this.iterRev(t,e,r,0,this.buffer.length,n)},t.prototype.iterChild=function(t,e,r,n,i){var o=this.group.types[this.buffer[n++]],f=this.buffer[n++]+r,s=this.buffer[n++]+r,u=this.buffer[n++];if(f>e)return this.buffer.length;if(s>=t&&i.doEnter(o,f,s)){for(;n<u&&!i.done;)n=this.iterChild(t,e,r,n,i);i.leave&&i.leave(o,f,s)}return u},t.prototype.parentNodesByEnd=function(t,e){for(var r=this,n=[],i=function(t){var e=r.buffer[t+3];if(e==t+4)return e;for(var o=t+4;o<e;)o=i(o);return n.push(t),e},o=t;o<e;)o=i(o);return n},t.prototype.iterRev=function(t,e,r,n,i,o){var f=this,s=this.parentNodesByEnd(n,i),u=-1,h=-1,p=function(){s.length>0?(u=s.pop(),h=f.buffer[u+3]):h=-1};p();t:for(var a=i;a>n&&!o.done;){for(;h==a;){var l=u,c=this.buffer[l],d=this.buffer[l+1]+r,v=this.buffer[l+2]+r;if(p(),d<=t&&v>=e&&!o.doEnter(this.group.types[c],d,v)){for(a=l;h>l;)p();continue t}}var b=this.buffer[--a],g=this.buffer[--a]+r,y=this.buffer[--a]+r,m=this.buffer[--a];y>t||g<e||(b!=a+4||o.doEnter(this.group.types[m],y,g))&&o.leave&&o.leave(this.group.types[m],y,g)}},t.prototype.findIndex=function(t,e,r,n,i){for(var o=-1,f=n,s=this.buffer;f<i;){var u=s[f+1]+r,h=s[f+2]+r,p=u==h&&u==t;if(u>=t){if(e>0&&!p)return f;break}if(h>t)return f;p||(o=f),f=s[f+3]}return e<0?o:-1},t}();exports.TreeBuffer=a;var l=function(r){function n(t,e,n){var i=r.call(this)||this;return i.node=t,i.start=e,i.parent=n,i}return t(n,r),Object.defineProperty(n.prototype,"type",{get:function(){return this.node.type},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){return this.start+this.node.length},enumerable:!0,configurable:!0}),n.prototype.resolveAt=function(t){return t<=this.start||t>=this.end?this.parent.resolveAt(t):this.node.resolveInner(t,this.start,this)},n.prototype.childBefore=function(t){return this.node.findChild(t,-1,this.start,this)},n.prototype.childAfter=function(t){return this.node.findChild(t,1,this.start,this)},n.prototype.toString=function(){return this.node.toString()},n.prototype.iterate=function(t){var r=t.from,n=void 0===r?this.start:r,i=t.to,o=void 0===i?this.end:i,f=t.enter,s=t.leave,u=new e(f,s);return this.node.iterInner(n,o,this.start,u),u.result},n}(s),c=function(r){function n(t,e,n,i){var o=r.call(this)||this;return o.buffer=t,o.bufferStart=e,o.index=n,o.parent=i,o}return t(n,r),Object.defineProperty(n.prototype,"type",{get:function(){return this.buffer.group.types[this.buffer.buffer[this.index]]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"start",{get:function(){return this.buffer.buffer[this.index+1]+this.bufferStart},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){return this.buffer.buffer[this.index+2]+this.bufferStart},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"endIndex",{get:function(){return this.buffer.buffer[this.index+3]},enumerable:!0,configurable:!0}),n.prototype.childBefore=function(t){var e=this.buffer.findIndex(t,-1,this.bufferStart,this.index+4,this.endIndex);return e<0?null:new n(this.buffer,this.bufferStart,e,this)},n.prototype.childAfter=function(t){var e=this.buffer.findIndex(t,1,this.bufferStart,this.index+4,this.endIndex);return e<0?null:new n(this.buffer,this.bufferStart,e,this)},n.prototype.iterate=function(t){var r=t.from,n=void 0===r?this.start:r,i=t.to,o=void 0===i?this.end:i,f=t.enter,s=t.leave,u=new e(f,s);return n<=o?this.buffer.iterChild(n,o,this.bufferStart,this.index,u):this.buffer.iterRev(n,o,this.bufferStart,this.index,this.endIndex,u),u.result},n.prototype.resolveAt=function(t){if(t<=this.start||t>=this.end)return this.parent.resolveAt(t);var e=this.buffer.findIndex(t,0,this.bufferStart,this.index+4,this.endIndex);return e<0?this:new n(this.buffer,this.bufferStart,e,this).resolveAt(t)},n.prototype.toString=function(){var t=[];return this.buffer.childToString(this.index,t),t.join("")},n}(s),d=function(){function t(t,e){this.buffer=t,this.index=e}return Object.defineProperty(t.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pos",{get:function(){return this.index},enumerable:!0,configurable:!0}),t.prototype.next=function(){this.index-=4},t.prototype.fork=function(){return new t(this.buffer,this.index)},t}(),v=8;function b(t){var e=t,r=e.buffer,n=e.group,i=e.topID,f=void 0===i?0:i,s=e.maxBufferLength,h=void 0===s?exports.DefaultBufferLength:s,p=e.reused,l=void 0===p?[]:p,c=e.minRepeatType,b=void 0===c?n.types.length:c,y=Array.isArray(r)?new d(r,r.length):r,m=n.types;function x(t,e,r,i,f){var s,p=y.id,c=y.start,d=y.end,j=y.size,O=c-t;if(j<0)return r.push(l[p]),i.push(O),void y.next();var S,P=m[p];if(d-c<=h&&(s=function(t){var e=y.fork(),r=0,n=0,i=0,o=e.end-h;t:for(var f=e.pos-t;e.pos>f;){var s=e.size,u=e.pos-s;if(s<0||u<f||e.start<o)break;var p=e.id>=b?4:0,a=e.start;for(e.next();e.pos>u;){if(e.size<0)break t;e.id>=b&&(p+=4),e.next()}n=a,r+=s,i+=p}return r>4?{size:r,start:n,skip:i}:null}(y.pos-e))){for(var A=new Uint16Array(s.size-s.skip),I=y.pos-s.size,k=A.length;y.pos>I;)k=w(s.start,A,k);S=new a(A,d-s.start,n,f),O=s.start-t}else{I=y.pos-j;y.next();var C=[],z=[],B=p>=n.types.length?p-(n.types.length-b):-1;if(B>-1)for(P=m[B];y.pos>I;){x(c,I,C,z,y.id==B?P:o.none)}else for(;y.pos>I;)x(c,I,C,z,o.none);C.reverse(),z.reverse(),S=B>-1&&C.length>v?g(P,P,C,z,0,C.length,0,h,d-c):new u(P,C,z,d-c)}r.push(S),i.push(O)}function w(t,e,r){var n=y.id,i=y.start,o=y.end,f=y.size;y.next();var s=r;if(f>4)for(var u=y.pos-(f-4);y.pos>u;)r=w(t,e,r);return n<b&&(e[--r]=s,e[--r]=o-t,e[--r]=i-t,e[--r]=n),r}for(var j=[],O=[];y.pos>0;)x(0,0,j,O,o.none);var S=j.length?O[0]+j[0].length:0;return new u(n.types[f],j.reverse(),O.reverse(),S)}function g(t,e,r,n,i,f,s,h,p){var a=[],l=[];if(p<=h)for(var c=i;c<f;c++)a.push(r[c]),l.push(n[c]-s);else{var d=Math.max(h,Math.ceil(1.5*p/v));for(c=i;c<f;){var b=c,m=n[c];for(c++;c<f;c++){if(n[c]+r[c].length-m>d)break}if(c==b+1){var x=r[b];if(x instanceof u&&x.type==e&&x.length>d<<1){for(var w=0;w<x.children.length;w++)a.push(x.children[w]),l.push(x.positions[w]+m-s);continue}a.push(x)}else if(c==b+1)a.push(r[b]);else{var j=g(e,e,r,n,b,c,m,h,n[c-1]-m);e==o.none||y(j.children,e)||(j=new u(o.none,j.children,j.positions,j.length)),a.push(j)}l.push(m-s)}}return new u(t,a,l,p)}function y(t,e){for(var r=0,n=t;r<n.length;r++){if(n[r].type==e)return!0}return!1}
},{}],"R3Cy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.combineConfig=_,exports.fillConfig=L,Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return t.Text}}),exports.languageData=exports.Transaction=exports.StateField=exports.SelectionRange=exports.Precedence=exports.MapMode=exports.Facet=exports.ExtensionGroup=exports.EditorState=exports.EditorSelection=exports.ChangedRange=exports.ChangeSet=exports.ChangeDesc=exports.Change=exports.Annotation=void 0;var t=require("../../text"),e=require("lezer-tree");class r{constructor(t,e=t){this.anchor=t,this.head=e}get from(){return Math.min(this.anchor,this.head)}get to(){return Math.max(this.anchor,this.head)}get empty(){return this.anchor==this.head}map(t){let e=t.mapPos(this.anchor),n=t.mapPos(this.head);return e==this.anchor&&n==this.head?this:new r(e,n)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return new r(t,e);let n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return new r(this.anchor,n)}eq(t){return this.anchor==t.anchor&&this.head==t.head}toJSON(){return this}static fromJSON(t){if(!t||"number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid JSON representation for SelectionRange");return new r(t.anchor,t.head)}static groupAt(e,n,s=1){let i=e.doc.lineAt(n),o=n-i.start;if(0==i.length)return new r(n);0==o?s=1:o==i.length&&(s=-1);let a=o+(s<0?-1:0),h=(0,t.charType)(i.slice(a,a+1)),l=n,c=n;for(let r=o;r>0&&(0,t.charType)(i.slice(r-1,r))==h;r--)l--;for(let r=o;r<i.length&&(0,t.charType)(i.slice(r,r+1))==h;r++)c++;return new r(c,l)}}exports.SelectionRange=r;class n{constructor(t,e=0){this.ranges=t,this.primaryIndex=e}map(t){return n.create(this.ranges.map(e=>e.map(t)),this.primaryIndex)}eq(t){if(this.ranges.length!=t.ranges.length||this.primaryIndex!=t.primaryIndex)return!1;for(let e=0;e<this.ranges.length;e++)if(!this.ranges[e].eq(t.ranges[e]))return!1;return!0}get primary(){return this.ranges[this.primaryIndex]}asSingle(){return 1==this.ranges.length?this:new n([this.primary])}addRange(t,e=!0){return n.create([t].concat(this.ranges),e?0:this.primaryIndex+1)}replaceRange(t,e=this.primaryIndex){let r=this.ranges.slice();return r[e]=t,n.create(r,this.primaryIndex)}toJSON(){return 1==this.ranges.length?this.ranges[0].toJSON():{ranges:this.ranges.map(t=>t.toJSON()),primaryIndex:this.primaryIndex}}static fromJSON(t){if(t&&Array.isArray(t.ranges)){if("number"!=typeof t.primaryIndex||t.primaryIndex>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new n(t.ranges.map(t=>r.fromJSON(t)),t.primaryIndex)}return new n([r.fromJSON(t)])}static single(t,e=t){return new n([new r(t,e)],0)}static create(t,e=0){for(let r=0,n=0;n<t.length;n++){let i=t[n];if(i.empty?i.from<=r:i.from<r)return s(t.slice(),e);r=i.to}return new n(t,e)}}function s(t,e=0){let s=t[e];t.sort((t,e)=>t.from-e.from),e=t.indexOf(s);for(let n=1;n<t.length;n++){let s=t[n],i=t[n-1];if(s.empty?s.from<=i.to:s.from<i.to){let o=i.from,a=Math.max(s.to,i.to);n<=e&&e--,t.splice(--n,2,s.anchor>s.head?new r(a,o):new r(o,a))}}return new n(t,e)}function i(t,e){for(let r of t.ranges)if(r.to>e.length)throw new RangeError("Selection points outside of document")}exports.EditorSelection=n;let o=0;class a{constructor(t,e,r,n){this.combine=t,this.compareInput=e,this.compare=r,this.isStatic=n,this.id=o++,this.default=t([])}static define(t={}){return new a(t.combine||(t=>t),t.compareInput||((t,e)=>t===e),t.compare||(t.combine?(t,e)=>t===e:h),!!t.static)}of(t){return new l([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new l(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new l(t,this,2,e)}}function h(t,e){return t==e||t.length==e.length&&t.every((t,r)=>t===e[r])}exports.Facet=a;class l{constructor(t,e,r,n){this.dependencies=t,this.facet=e,this.type=r,this.value=n,this.id=o++}dynamicSlot(t){let e=this.value,r=this.facet.compareInput,n=t[this.id]>>1,s=2==this.type,i=!1,o=!1,a=[];for(let h of this.dependencies)"doc"==h?i=!0:"selection"==h?o=!0:0==(1&t[h.id])&&a.push(t[h.id]);return(t,h)=>{if(!h||h.reconfigured)return t.values[n]=e(t),1;{if(!(i&&h.docChanged||o&&(h.docChanged||h.selectionSet)||a.some(e=>(1&y(t,e))>0)))return 0;let l=e(t),f=h.startState.values[n];return(s?c(l,f,r):r(l,f))?0:(t.values[n]=l,1)}}}}function c(t,e,r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}function f(t,e,r){let n=r.map(e=>t[e.id]),s=r.map(t=>t.type),i=n.filter(t=>!(1&t)),o=t[e.id]>>1;return(t,r)=>{let a=r?r.reconfigured?r.startState.config.address[e.id]:o<<1:null,h=null==a;for(let e of i)1&y(t,e)&&(h=!0);if(!h)return 0;let l=[];for(let e=0;e<n.length;e++){let r=v(t,n[e]);if(2==s[e])for(let t of r)l.push(t);else l.push(r)}let c=e.combine(l);return null!=a&&e.compare(c,v(r.startState,a))?0:(t.values[o]=c,1)}}class u{constructor(t,e,r,n,s){this.id=t,this.createF=e,this.updateF=r,this.compareF=n,this.facets=s}static define(t){return new u(o++,t.create,t.update,t.compare||((t,e)=>t===e),[])}provide(t,e,r){let n=t.compute([this],e?t=>e(t.field(this)):t=>t.field(this));return new u(this.id,this.createF,this.updateF,this.compareF,this.facets.concat(g(r,n)))}provideN(t,e,r){let n=t.computeN([this],t=>e(t.field(this)));return new u(this.id,this.createF,this.updateF,this.compareF,this.facets.concat(g(r,n)))}slot(t){let e=t[this.id]>>1;return(t,r)=>{let n=r?r.reconfigured?r.startState.config.address[this.id]>>1:e:null;if(null==n)return t.values[e]=this.createF(t),1;{let s=r.startState.values[n],i=this.updateF(s,r,t);return this.compareF(s,i)?0:(t.values[e]=i,1)}}}}exports.StateField=u;class p{constructor(t){this.val=t}set(t){return new d(t,this.val)}}function g(t,e){return null==t?e:t.set(e)}exports.Precedence=p,p.Fallback=new p(3),p.Default=new p(2),p.Extend=new p(1),p.Override=new p(0);class d{constructor(t,e){this.e=t,this.prec=e}}class m{constructor(t,e){this.extension=t,this.group=e}}class S{constructor(t){this.name=t}of(t){return new m(t,this)}}exports.ExtensionGroup=S;class w{constructor(t,e,r,n,s){for(this.source=t,this.replacements=e,this.dynamicSlots=r,this.address=n,this.staticValues=s,this.statusTemplate=[];this.statusTemplate.length<s.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return null==e?t.default:this.staticValues[e>>1]}static resolve(t,e=new Map,r){let n=[],s=Object.create(null);for(let h of x(t,e))h instanceof u?n.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let i=Object.create(null),o=[],a=[];for(let h of n)i[h.id]=a.length<<1,a.push(t=>h.slot(t));for(let h in s){let t=s[h],e=t[0].facet;if(t.every(t=>0==t.type)){i[e.id]=o.length<<1|1;let n=e.combine(t.map(t=>t.value)),s=r?r.config.address[e.id]:null;if(null!=s){let t=v(r,s);e.compare(n,t)&&(n=t)}o.push(n)}else{for(let e of t)0==e.type?(i[e.id]=o.length<<1|1,o.push(e.value)):(i[e.id]=a.length<<1,a.push(t=>e.dynamicSlot(t)));i[e.id]=a.length<<1,a.push(r=>f(r,e,t))}}return new w(t,e,a.map(t=>t(i)),i,o)}}function x(t,e){let r=[[],[],[],[]],n=new Set,s=new Set;return function t(i,o){if(!n.has(i))if(n.add(i),Array.isArray(i))for(let e of i)t(e,o);else if(i instanceof m){if(s.has(i.group))throw new RangeError(`Duplicate use of group '${i.group.name}' in extensions`);s.add(i.group),t(e.get(i.group)||i.extension,o)}else i.extension?t(i.extension,o):i instanceof d?t(i.e,i.prec):(r[o].push(i),i instanceof u&&t(i.facets,o))}(t,p.Default.val),r.reduce((t,e)=>t.concat(e))}function y(t,e){if(1&e)return 2;let r=e>>1,n=t.status[r];if(4==n)throw new Error("Cyclic dependency between fields and/or facets");if(2&n)return n;t.status[r]=4;let s=t.config.dynamicSlots[r](t,t.applying);return t.status[r]=2|s}function v(t,e){return 1&e?t.config.staticValues[e>>1]:t.values[e>>1]}const O=a.define({combine:t=>t.some(t=>t),static:!0});let b=0;class A{constructor(){this.id=b++}static define(){return new A}}exports.Annotation=A;const T=new e.NodeProp;exports.languageData=T;const N=[];var E;exports.MapMode=E,function(t){t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter"}(E||(exports.MapMode=E={}));class I{constructor(t,e,r){this.from=t,this.to=e,this.length=r}get invertedDesc(){return new I(this.from,this.from+this.length,this.to-this.from)}mapPos(t,e=-1,r=E.Simple){let{from:n,to:s,length:i}=this;return t<n?t:t>s?t+(i-(s-n)):t==s||t==n?n<t&&r==E.TrackBefore||s>t&&r==E.TrackAfter?-t-1:(n==s?e<=0:t==n)?n:n+i:(t=n+(e<=0?0:i),r!=E.Simple?-t-1:t)}toJSON(){return this}static fromJSON(t){if(!t||"number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.length)throw new RangeError("Invalid JSON representation for ChangeDesc");return new I(t.from,t.to,t.length)}}exports.ChangeDesc=I;class M extends I{constructor(t,e,r){super(t,e,J(r)),this.from=t,this.to=e,this.text=r}invert(t){return new M(this.from,this.from+this.length,t.sliceLines(this.from,this.to))}apply(t){return t.replace(this.from,this.to,this.text)}map(t){let e=t.mapPos(this.from,1),r=t.mapPos(this.to,-1);return e>r?null:new M(e,r,this.text)}get desc(){return new I(this.from,this.to,this.length)}toJSON(){return{from:this.from,to:this.to,text:this.text}}static fromJSON(t){if(!t||"number"!=typeof t.from||"number"!=typeof t.to||!Array.isArray(t.text)||0==t.text.length||t.text.some(t=>"string"!=typeof t))throw new RangeError("Invalid JSON representation for Change");return new M(t.from,t.to,t.text)}}function J(t){let e=-1;for(let r of t)e+=r.length+1;return e}exports.Change=M;class R{constructor(t,e=N){this.changes=t,this.mirror=e,this._changedRanges=null}get length(){return this.changes.length}getMirror(t){for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)];return null}append(t,e){return new R(this.changes.concat(t),null!=e?this.mirror.concat(this.length,e):this.mirror)}appendSet(t){return 0==t.length?this:0==this.length?t:new R(this.changes.concat(t.changes),this.mirror.concat(t.mirror.map(t=>t+this.length)))}mapPos(t,e=-1,r=E.Simple){return this.mapInner(t,e,r,0,this.length)}mapInner(t,e,r,n,s){let i,o,a=s<n?-1:1,h=null,l=this.mirror.length>0,c=!1;for(let f=n-(a<0?1:0),u=s-(a<0?1:0);f!=u;f+=a){let{from:n,to:u,length:p}=this.changes[f];if(a<0){let t=u-n;u=n+p,p=t}if(!(t<n))if(t>u)t+=p-(u-n);else if(h&&null!=(i=h[f]))t=n+i;else{if(l&&null!=(o=this.getMirror(f))&&(a>0?o>f&&o<s:o<f&&o>=s)){if(t>n&&t<u){f=o,t=this.changes[f].from+(t-n);continue}(h||(h={}))[o]=t-n}t>n&&t<u?(r!=E.Simple&&(c=!0),t=e<=0?n:n+p):((n<t&&r==E.TrackBefore||u>t&&r==E.TrackAfter)&&(c=!0),t=(n==u?e<=0:t==n)?n:n+p)}}return c?-t-1:t}touchesRange(t,e){let r=!1;for(let n of this.changes){if(n.to>=t&&n.from<=e){if(n.from<t&&n.to>e)return"cover";r=!0}let s=n.length-(n.to-n.from);t>n.from&&(t+=s),e>n.to&&(e+=s)}return r}partialMapping(t,e=this.length){return 0==t&&e==this.length?this:new C(this,t,e)}changedRanges(){if(this._changedRanges)return this._changedRanges;let t=[];for(let e=0;e<this.length;e++){let r=this.changes[e],n=r.from,s=r.to,i=r.from,o=r.from+r.length;if(e<this.length-1){let t=this.partialMapping(e+1);i=t.mapPos(i,1),o=t.mapPos(o,-1)}if(e>0){let t=this.partialMapping(e,0);n=t.mapPos(n,1),s=t.mapPos(s,-1)}new F(n,s,i,o).addToSet(t)}return this._changedRanges=t}get desc(){return 0==this.changes.length||this.changes[0]instanceof I?this:new R(this.changes.map(t=>t.desc),this.mirror)}toJSON(){let t=this.changes.map(t=>t.toJSON());return 0==this.mirror.length?t:{mirror:this.mirror,changes:t}}static fromJSON(t,e){let r,n;if(Array.isArray(e))r=N,n=e;else{if(!(e&&Array.isArray(e.mirror)&&Array.isArray(e.changes)))throw new RangeError("Invalid JSON representation for ChangeSet");({mirror:r,changes:n}=e)}return new R(n.map(e=>t.fromJSON(e)),r)}}exports.ChangeSet=R,R.empty=new R(N);class C{constructor(t,e,r){this.changes=t,this.from=e,this.to=r}mapPos(t,e=-1,r=E.Simple){return this.changes.mapInner(t,e,r,this.from,this.to)}}class F{constructor(t,e,r,n){this.fromA=t,this.toA=e,this.fromB=r,this.toB=n}join(t){return new F(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,r=this;for(;e>0;e--){let n=t[e-1];if(!(n.fromA>r.toA)){if(n.toA<r.fromA)break;r=r.join(n),t.splice(e-1,1)}}return t.splice(e,0,r),t}get lenDiff(){return this.toB-this.fromB-(this.toA-this.fromA)}static mapPos(t,e,r){let n=0;for(let s of r){if(t<s.fromA)break;if(t<=s.toA){return(s.toA==s.fromA?e:t==s.fromA?-1:t==s.toA?1:e)<0?s.fromB:s.toB}n=s.toB-s.toA}return t+n}}exports.ChangedRange=F;class D{constructor(t,e=Date.now()){this.startState=t,this.changes=R.empty,this.docs=[],this._annotations=Object.create(null),this.flags=0,this.reconfigureData=null,this.state=null,this.selection=t.selection,this._annotations[D.time.id]=e}get doc(){let t=this.docs.length-1;return t<0?this.startState.doc:this.docs[t]}annotate(t,e){return this.ensureOpen(),this._annotations[t.id]=e,this}annotation(t){return this._annotations[t.id]}change(t,e){if(this.ensureOpen(),t.from==t.to&&0==t.length)return this;if(t.from<0||t.to<t.from||t.to>this.doc.length)throw new RangeError(`Invalid change ${t.from} to ${t.to}`);return this.changes=this.changes.append(t,e),this.docs.push(t.apply(this.doc)),this.selection=this.selection.map(t),this}get docChanged(){return this.changes.length>0}replace(t,e,r){return this.change(new M(t,e,"string"==typeof r?this.startState.splitLines(r):r))}replaceSelection(t){let e="string"==typeof t?this.startState.splitLines(t):t;return this.forEachRange(t=>{let n=new M(t.from,t.to,e);return this.change(n),new r(t.from+n.length)})}forEachRange(t){let e=this.selection,r=this.changes.length,s=[];for(let n of e.ranges){let e=this.changes.length,i=t(n.map(this.changes.partialMapping(r)),this);if(this.changes.length>e){let t=this.changes.partialMapping(e);for(let e=0;e<s.length;e++)s[e]=s[e].map(t)}s.push(i)}return this.setSelection(n.create(s,e.primaryIndex))}setSelection(t){return this.ensureOpen(),this.startState.facet(O)||(t=t.asSingle()),i(t,this.doc),this.selection=t,this.flags|=1,this}get selectionSet(){return(1&this.flags)>0}scrollIntoView(){return this.ensureOpen(),this.flags|=2,this}get scrolledIntoView(){return(2&this.flags)>0}replaceExtension(t,e){if(this.ensureOpen(),!this.reconfigureData){let t=new Map;this.startState.config.replacements.forEach((e,r)=>t.set(r,e)),this.reconfigureData={base:this.startState.config.source,replaced:t}}return this.reconfigureData.replaced.set(t,e),this}reconfigure(t){return this.ensureOpen(),this.reconfigureData={base:t,replaced:new Map},this}get reconfigured(){return null!=this.reconfigureData}ensureOpen(){if(this.state)throw new Error("Transactions may not be modified after being applied")}apply(){return this.state||(this.state=this.startState.applyTransaction(this))}invertedChanges(){if(!this.changes.length)return R.empty;let t=[],e=this.changes;for(let r=e.length-1;r>=0;r--)t.push(e.changes[r].invert(0==r?this.startState.doc:this.docs[r-1]));return new R(t,e.mirror.length?e.mirror.map(t=>e.length-t-1):e.mirror)}}exports.Transaction=D,D.time=A.define(),D.preserveGoalColumn=A.define(),D.userEvent=A.define(),D.addToHistory=A.define();const P=2,B=4,k=/\r\n?|\n/;class j{constructor(t,e,r,n=null){if(this.config=t,this.doc=e,this.selection=r,this.applying=null,this.status=t.statusTemplate.slice(),n&&!n.reconfigured)this.values=n.startState.values.slice();else if(this.values=t.dynamicSlots.map(t=>null),n)for(let s in t.address){let e=t.address[s],r=n.startState.config.address[s];null!=r&&0==(1&e)&&(this.values[e>>1]=v(n.startState,r))}this.applying=n;for(let s=0;s<this.config.dynamicSlots.length;s++)y(this,s<<1);this.applying=null}field(t,e=!0){let r=this.config.address[t.id];if(null!=r)return y(this,r),v(this,r);if(e)throw new RangeError("Field is not present in this state")}t(t){return new D(this,t)}joinLines(t){return t.join(this.facet(j.lineSeparator)||"\n")}splitLines(t){return t.split(this.facet(j.lineSeparator)||k)}facet(t){let e=this.config.address[t.id];return null==e?t.default:(y(this,e),v(this,e))}toJSON(){return{doc:this.joinLines(this.doc.sliceLines(0,this.doc.length)),selection:this.selection.toJSON()}}static fromJSON(t,e={}){if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");return j.create({doc:t.doc,selection:n.fromJSON(t.selection),extensions:e.extensions})}applyTransaction(t){let e=t.reconfigureData,r=e?w.resolve(e.base,e.replaced,this):this.config;return new j(r,t.doc,t.selection,t)}static create(e={}){let r=w.resolve(e.extensions||[]),s=e.doc instanceof t.Text?e.doc:t.Text.of((e.doc||"").split(r.staticFacet(j.lineSeparator)||k)),o=e.selection||n.single(0);return i(o,s),r.staticFacet(O)||(o=o.asSingle()),new j(r,s,o)}get tabSize(){return this.facet(j.tabSize)}get indentUnit(){return this.facet(j.indentUnit)}get tree(){let t=this.facet(j.syntax);return t.length?t[0].getTree(this):e.Tree.empty}}function _(t,e,r={}){let n={};for(let s of t)for(let t of Object.keys(s)){let e=s[t],i=n[t];if(void 0===i)n[t]=e;else if(i===e||void 0===e);else{if(!Object.hasOwnProperty.call(r,t))throw new Error("Config merge conflict for field "+t);n[t]=r[t](i,e)}}for(let s in e)void 0===n[s]&&(n[s]=e[s]);return n}function L(t,e){let r={};for(let n in t)r[n]=t[n];for(let n in e)void 0===r[n]&&(r[n]=e[n]);return r}exports.EditorState=j,j.allowMultipleSelections=O,j.indentation=a.define(),j.tabSize=a.define({combine:t=>t.length?t[0]:4}),j.lineSeparator=a.define({combine:t=>t.length?t[0]:void 0,static:!0}),j.indentUnit=a.define({combine:t=>t.length?t[0]:2}),j.syntax=a.define(),j.foldable=a.define();
},{"../../text":"Oz7s","lezer-tree":"rdIx"}],"h8XP":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];function t(e,t){return"undefined"==typeof Symbol?"__"+e+(t?Math.floor(1e8*Math.random()):""):t?Symbol(e):Symbol.for(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleModule=r;const o=t("ͼ"),l=t("styleSet",1),s=t("rules",1),i=void 0===e?window:e;function r(e,t){this[s]=[];for(let o in e){let l=e[o].specificity||0,i=r.newName(),n=o;if(!1!==(t&&t.generateClasses)){let e=i;n="."+i;for(let t=0;t<l;t++){let o="ͼ_"+(t?t.toString(36):"");n+="."+o,e+=" "+o}this[o]=e}f(n,e[o],this[s])}}r.newName=(()=>{let e=i[o]||1;return i[o]=e+1,"ͼ"+e.toString(36)}),r.prototype=Object.create(null),r.mount=function(e,t){(e[l]||new n(e)).mount(Array.isArray(t)?t:[t])};class n{constructor(e){this.root=e,e[l]=this,this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild),this.modules=[]}mount(e){let t=this.styleTag.sheet,o=!t,l=0,i=0;for(let r=0;r<e.length;r++){let n=e[r],f=this.modules.indexOf(n);if(f<i&&f>-1&&(this.modules.splice(f,1),i--,f=-1),-1==f){if(this.modules.splice(i++,0,n),!o)for(let e=0;e<n[s].length;e++)t.insertRule(n[s][e],l++)}else{for(;i<f;)l+=this.modules[i++][s].length;l+=n[s].length,i++}}if(o){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t][s].join("\n")+"\n";this.styleTag.textContent=e}}}function f(e,t,o){if("object"!=typeof t)throw new RangeError("Expected style object, got "+JSON.stringify(t));let l=[];for(let s in t)if(/^@/.test(s)){let l=[];f(e,t[s],l),o.push(s+" {"+l.join(" ")+"}")}else if(/&/.test(s))f(s.replace(/&/g,e),t[s],o);else if("specificity"!=s){if("object"==typeof t[s])throw new RangeError("The value of a property ("+s+") should be a primitive value.");l.push(s.replace(/_.*/,"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())+": "+t[s])}l.length&&o.push(e+" {"+l.join("; ")+"}")}
},{}],"LKY5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RangeValue=exports.RangeSetBuilder=exports.RangeSet=exports.Range=void 0;var t=require("../../state");class e{eq(t){return this==t}range(t,e=t){return new i(t,e,this)}}exports.RangeValue=e,e.prototype.startSide=e.prototype.endSide=0,e.prototype.point=!1,e.prototype.startMapMode=e.prototype.endMapMode=t.MapMode.TrackDel;class i{constructor(t,e,i){this.from=t,this.to=e,this.value=i}}function h(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}exports.Range=i;const n=250,s=500,r=1e9;class o{constructor(t,e,i,h){this.from=t,this.to=e,this.value=i,this.maxPoint=h}get length(){return this.to[this.to.length-1]}findIndex(t,e,i=e*r,h=0){if(t<=0)return h;let n=e<0?this.to:this.from;for(let s=h,r=n.length;;){if(s==r)return s;let h=s+r>>1,o=n[h]-t||(e<0?this.value[h].startSide:this.value[h].endSide)-i;if(h==s)return o>=0?s:r;o>=0?r=h:s=h+1}}between(t,e,i,h){for(let n=this.findIndex(e,-1),s=this.findIndex(i,1,void 0,n);n<s;n++)if(!1===h(this.from[n]+t,this.to[n]+t,this.value[n]))return!1}map(t,e){let i=[],h=[],n=[],s=-1,r=-1;for(let o=0;o<this.value.length;o++){let a=this.value[o],u=e.mapPos(this.from[o]+t,a.startSide,a.startMapMode),l=e.mapPos(this.to[o]+t,a.endSide,a.endMapMode);if(l<0){if(u<0)continue;l=-(l+1)}u<0&&(u=-(u+1)),(l-u||a.endSide-a.startSide)<0||(s<0&&(s=u),a.point&&(r=Math.max(r,l-u)),i.push(a),h.push(u-s),n.push(l-s))}return{mapped:i.length?new o(h,n,i,r):null,pos:s}}}class a{constructor(t,e,i=a.empty,h){this.chunkPos=t,this.chunk=e,this.nextLayer=i,this.maxPoint=h}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this==a.empty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update({add:t=[],sort:e=!1,filter:n,filterFrom:s=0,filterTo:r=this.length}){if(0==t.length&&!n)return this;if(e&&t.slice().sort(h),this==a.empty)return t.length?a.of(t):this;let o=new c(this,null,-1).goto(0),l=0,d=[],f=new u;for(;o.value||l<t.length;)if(l<t.length&&(o.from-t[l].from||o.startSide-t[l].value.startSide)>=0){let e=t[l++];f.addInner(e.from,e.to,e.value)||d.push(e)}else 1==o.rangeIndex&&o.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(o.chunkIndex)<t[l].from)&&(!n||s>this.chunkEnd(o.chunkIndex)||r<this.chunkPos[o.chunkIndex])&&f.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!n||s>o.to||r<o.from||n(o.from,o.to,o.value))&&(f.addInner(o.from,o.to,o.value)||d.push(new i(o.from,o.to,o.value))),o.next());return f.finishInner(this.nextLayer!=a.empty||d.length?this.nextLayer.update({add:d,filter:n,filterFrom:s,filterTo:r}):a.empty)}map(t){if(0==t.length||this==a.empty)return this;let e=[],i=[],h=-1;for(let s=0;s<this.chunk.length;s++){let n=this.chunkPos[s],r=this.chunk[s],o=t.touchesRange(n,n+r.length);if(!1===o)h=Math.max(h,r.maxPoint),e.push(r),i.push(t.mapPos(n));else if(!0===o){let{mapped:s,pos:o}=r.map(n,t);s&&(h=Math.max(h,s.maxPoint),e.push(s),i.push(o))}}let n=this.nextLayer.map(t);return 0==e.length?n:new a(i,e,n,h)}between(t,e,i){if(this!=a.empty){for(let h=0;h<this.chunk.length;h++){let n=this.chunkPos[h],s=this.chunk[h];if(e>=n&&t<=n+s.length&&!1===s.between(n,t-n,e-n,i))return}this.nextLayer.between(t,e,i)}}iter(t=0){return d.from([this]).goto(t)}static compare(t,e,i,h,n){var r;let o=null!=(r=n.minPointSize)?r:-1,u=t.filter(t=>t.maxPoint>=s||t!=a.empty&&e.indexOf(t)<0&&t.maxPoint>=o),c=e.filter(e=>e.maxPoint>=s||e!=a.empty&&t.indexOf(e)<0&&e.maxPoint>=o),d=l(u,c),f=new m(u,d,o),x=new m(c,d,o),k=0,g=0;for(let s of i)p(f,k,x,g,s.fromB-g,n),k=s.toA,g=s.toB;p(f,k,x,g,h-g,n)}static spans(t,e,i,h){var n;let s=new m(t,null,(n=h.minPointSize,null!=n?n:-1)).goto(e),r=e;for(;;){let t=Math.min(s.to,i);if(s.point?h.point(r,t,s.point,s.pointFrom<e,s.to>i):t>r&&h.span(r,t,s.active),s.to>i)break;r=s.to,s.next()}}static of(t,e=!1){let n=new u;for(let s of t instanceof i?[t]:e?t.slice().sort(h):t)n.add(s.from,s.to,s.value);return n.finish()}}exports.RangeSet=a,a.empty=new a([],[],null,-1),a.empty.nextLayer=a.empty;class u{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-r,this.lastTo=-r,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(t){this.chunks.push(new o(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}add(t,e,i){this.addInner(t,e,i)||(this.nextLayer||(this.nextLayer=new u)).add(t,e,i)}addInner(t,e,i){let h=t-this.lastTo||i.startSide-this.last.endSide;if(h<=0&&(t-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(h<0)&&(this.from.length==n&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=i,this.lastFrom=t,this.lastTo=e,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let i=e.value.length-1;return this.last=e.value[i],this.lastFrom=e.from[i]+t,this.lastTo=e.to[i]+t,!0}finish(){return this.finishInner(a.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return t;let e=new a(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function l(t,e){let i=new Map;for(let n of t)for(let t=0;t<n.chunk.length;t++)n.chunk[t].maxPoint<s&&i.set(n.chunk[t],n.chunkPos[t]);let h=new Set;for(let n of e)for(let t=0;t<n.chunk.length;t++)i.get(n.chunk[t])==n.chunkPos[t]&&h.add(n.chunk[t]);return h}exports.RangeSetBuilder=u;class c{constructor(t,e,i){this.layer=t,this.skip=e,this.minPoint=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-r){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,i){for(;this.chunkIndex<this.layer.chunk.length;){let e=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(e)||this.layer.chunkEnd(this.chunkIndex)<t||e.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}let h=this.chunkIndex==this.layer.chunk.length?0:this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],-1,e);(!i||this.rangeIndex<h)&&(this.rangeIndex=h),this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=r,this.value=null;break}{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],i=t+e.from[this.rangeIndex];if(this.from=i,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],++this.rangeIndex==e.value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}if(this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.to-t.to||this.endSide-t.endSide}}class d{constructor(t){this.heap=t}static from(t,e=null,i=-1){let h=[];for(let n of t)for(let t=n;t!=a.empty;t=t.nextLayer)t.maxPoint>=i&&h.push(new c(t,e,i));return 1==h.length?h[0]:new d(h)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-r){for(let i of this.heap)i.goto(t,e);for(let i=this.heap.length>>1;i>=0;i--)f(this.heap,i);return this.next(),this}forward(t,e){for(let i of this.heap)i.forward(t,e);for(let i=this.heap.length>>1;i>=0;i--)f(this.heap,i);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=r,this.value=null;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,t.value&&t.next(),f(this.heap,0)}}}function f(t,e){for(let i=t[e];;){let h=1+(e<<1);if(h>=t.length)break;let n=t[h];if(h+1<t.length&&n.compare(t[h+1])>=0&&(n=t[h+1],h++),i.compare(n)<0)break;t[h]=i,t[e]=n,e=h}}class m{constructor(t,e,i){this.minPoint=i,this.active=[],this.activeTo=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.to=-r,this.endSide=0,this.cursor=d.from(t,e,i)}goto(t,e=-r){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){k(this.active,t),k(this.activeTo,t),this.minActive=g(this.active,this.activeTo)}next(){let t=this.to;for(this.point=null;;){let e=this.minActive;if(e>-1&&(this.activeTo[e]-this.cursor.from||this.active[e].endSide-this.cursor.startSide)<0){if(this.activeTo[e]>t){this.to=this.activeTo[e],this.endSide=this.active[e].endSide;break}this.removeActive(e)}else{if(!this.cursor.value){this.to=this.endSide=r;break}if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){this.point=e,this.pointFrom=this.cursor.from,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.to>t&&this.forward(this.to,this.endSide);break}this.active.push(e),this.activeTo.push(this.cursor.to),this.minActive=g(this.active,this.activeTo),this.cursor.next()}}}}}function p(t,e,i,h,n,s){t.goto(e),i.goto(h);let r=h+n,o=h,a=h-e;for(;;){let e=t.to+a-i.to||t.endSide-i.endSide,h=e<0?t.to+a:i.to,n=Math.min(h,r);if(t.point||i.point?t.point&&i.point&&(t.point==i.point||t.point.eq(i.point))||s.comparePoint(o,n,t.point,i.point):n>o&&!x(t.active,i.active)&&s.compareRange(o,n,t.active,i.active),h>r)break;o=h,e<=0&&t.next(),e>=0&&i.next()}}function x(t,e){if(t.length!=e.length)return!1;t:for(let i=0;i<t.length;i++){for(let h=0;h<e.length;h++)if(t[i]==e[i]||t[i].eq(e[h]))continue t;return!1}return!0}function k(t,e){let i=t.pop();e!=t.length&&(t[e]=i)}function g(t,e){let i=-1,h=r;for(let n=0;n<e.length;n++)(e[n]-h||t[n].endSide-t[i].endSide)<0&&(i=n,h=e[n]);return i}
},{"../../state":"R3Cy"}],"NHOh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.themeClass=st,Object.defineProperty(exports,"Range",{enumerable:!0,get:function(){return i.Range}}),exports.__test=exports.WidgetType=exports.ViewUpdate=exports.ViewPlugin=exports.PluginField=exports.EditorView=exports.Decoration=exports.BlockType=exports.BlockInfo=void 0;var t=require("../../state"),e=require("style-mod"),i=require("../../rangeset"),s=require("../../text");let[n,r]="undefined"!=typeof navigator?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}];const o=/Edge\/(\d+)/.exec(n.userAgent),h=/MSIE \d/.test(n.userAgent),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(n.userAgent),a=!!(h||l||o),c=!a&&/gecko\/(\d+)/i.test(n.userAgent),d=!a&&/Chrome\/(\d+)/.exec(n.userAgent),u=!a&&"WebkitAppearance"in r.documentElement.style;var f={mac:/Mac/.test(n.platform),ie:a,ie_version:h?r.documentMode||6:l?+l[1]:o?+o[1]:0,gecko:c,gecko_version:c?+(/Firefox\/(\d+)/.exec(n.userAgent)||[0,0])[1]:0,chrome:!!d,chrome_version:d?+d[1]:0,ios:!a&&/AppleWebKit/.test(n.userAgent)&&/Mobile\/\w+/.test(n.userAgent),android:/Android\b/.test(n.userAgent),webkit:u,safari:/Apple Computer/.test(n.vendor),webkit_version:u?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=r.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};function g(t){return t.getSelection?t.getSelection():document.getSelection()}function p(t){let e=t.isCollapsed;return e&&f.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e}function m(t,e){if(!e.anchorNode)return!1;try{return t.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)}catch(i){return!1}}function w(t){if(3==t.nodeType){let e=document.createRange();return e.setEnd(t,t.nodeValue.length),e.setStart(t,0),e.getClientRects()}return 1==t.nodeType?t.getClientRects():[]}function v(t,e,i,s){return!!i&&(b(t,e,i,s,-1)||b(t,e,i,s,1))}function y(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function b(t,e,i,s,n){for(;;){if(t==i&&e==s)return!0;if(e==(n<0?0:S(t))){if("DIV"==t.nodeName)return!1;let i=t.parentNode;if(!i||1!=i.nodeType)return!1;e=y(t)+(n<0?0:1),t=i}else{if(1!=t.nodeType)return!1;t=t.childNodes[e+(n<0?-1:0)],e=n<0?S(t):0}}}function S(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function x(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}const M=5;function A(t,e){let i=t.ownerDocument.defaultView;for(let s=t.parentNode;s;)if(1==s.nodeType){let t,n=s==document.body;if(n)t=x(i);else{if(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth){s=s.parentNode;continue}let e=s.getBoundingClientRect();t={left:e.left,right:e.left+s.clientWidth,top:e.top,bottom:e.top+s.clientHeight}}let r=0,o=0;if(e.top<t.top?o=-(t.top-e.top+M):e.bottom>t.bottom&&(o=e.bottom-t.bottom+M),e.left<t.left?r=-(t.left-e.left+M):e.right>t.right&&(r=e.right-t.right+M),r||o)if(n)i.scrollBy(r,o);else{if(o){let t=s.scrollTop;s.scrollTop+=o,o=s.scrollTop-t}if(r){let t=s.scrollLeft;s.scrollLeft+=r,r=s.scrollLeft-t}e={left:e.left-r,top:e.top-o,right:e.right-r,bottom:e.bottom-o}}if(n)break;s=s.parentNode}else{if(11!=s.nodeType)break;s=s.host}}class D{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}}let O=null;function k(t){if(t.setActive)return t.setActive();if(O)return t.focus(O);let e=[];for(let i=t;i&&(e.push(i,t.scrollTop,t.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(t.focus(null==O?{get preventScroll(){return O={preventScroll:!0},!0}}:void 0),!O){O=!1;for(let t=0;t<e.length;){let i=e[t++],s=e[t++],n=e[t++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=n&&(i.scrollLeft=n)}}}class C{constructor(t,e,i=!0){this.node=t,this.offset=e,this.precise=i}static before(t,e){return new C(t.parentNode,y(t),e)}static after(t,e){return new C(t.parentNode,y(t)+1,e)}}const T=[];class E{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let i of this.children){if(i==t)return e;e+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}coordsAt(t){return null}sync(){if(2&this.dirty){let t=this.dom,e=t.firstChild;for(let i of this.children){if(i.dirty){if(e&&!i.dom&&!E.get(e)){let s=e.previousSibling;i.reuseDOM(e)&&(e=s?s.nextSibling:t.firstChild)}i.sync(),i.dirty=0}e=P(t,e,i.dom)}for(;e;)e=R(e)}else if(1&this.dirty)for(let t of this.children)t.dirty&&(t.sync(),t.dirty=0)}reuseDOM(t){return!1}localPosFromDOM(t,e){let i;if(t==this.dom)i=this.dom.childNodes[e];else{let s=0==S(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==s&&e.firstChild!=e.lastChild&&(s=t==e.firstChild?-1:1),t=e}i=s<0?t:t.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!E.get(i);)i=i.nextSibling;if(!i)return this.length;for(let s=0,n=0;;s++){let t=this.children[s];if(t.dom==i)return n;n+=t.length+t.breakAfter}}domBoundsAround(t,e,i=0){let s=-1,n=-1,r=-1,o=-1;for(let h=0,l=i;h<this.children.length;h++){let i=this.children[h],a=l+i.length;if(l<t&&a>e)return i.domBoundsAround(t,e,l);if(a>=t&&-1==s&&(s=h,n=l),a>=e&&-1==r){r=h,o=a;break}l=a+i.breakAfter}return{from:n,to:o,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:r<this.children.length-1?this.children[r+1].dom:null}}markDirty(t=!1){2&this.dirty||(this.dirty|=2,this.markParentsDirty(t))}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.dirty|=2),1&e.dirty)return;e.dirty|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))}setDOM(t){this.dom=t,t.cmView=this}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,i=T){this.markDirty();for(let s=t;s<e;s++)this.children[s].parent=null;this.children.splice(t,e-t,...i);for(let s=0;s<i.length;s++)i[s].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new L(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}}function R(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}function P(t,e,i){if(i.parentNode==t){for(;e!=i;)e=R(e);e=i.nextSibling}else t.insertBefore(i,e);return e}E.prototype.breakAfter=0;class L{constructor(t,e,i){this.children=t,this.pos=e,this.i=i,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function V(t,e){for(let i in t)"class"==i&&e.class?e.class+=" "+t.class:"style"==i&&e.style?e.style+=";"+t.style:e[i]=t[i];return e}function B(t,e){if(t==e)return!0;if(!t||!e)return!1;let i=Object.keys(t),s=Object.keys(e);if(i.length!=s.length)return!1;for(let n of i)if(-1==s.indexOf(n)||t[n]!==e[n])return!1;return!0}function H(t,e,i){if(e)for(let s in e)i&&s in i||t.removeAttribute(s);if(i)for(let s in i)e&&e[s]==i[s]||t.setAttribute(s,i[s])}const N=[];class W extends E{match(t){return!1}get children(){return N}getSide(){return 0}}const F=256;class z extends W{constructor(t,e,i,s){super(),this.text=t,this.tagName=e,this.attrs=s,this.textDOM=null,this.class=i}get length(){return this.text.length}createDOM(t){let e=this.tagName||(this.attrs||this.class?"span":null);if(this.textDOM=t||document.createTextNode(this.text),e){let t=document.createElement(e);if(t.appendChild(this.textDOM),this.class&&(t.className=this.class),this.attrs)for(let e in this.attrs)t.setAttribute(e,this.attrs[e]);this.setDOM(t)}else this.setDOM(this.textDOM)}sync(){if(this.dom||this.createDOM(),this.textDOM.nodeValue!=this.text){this.textDOM.nodeValue=this.text;let t=this.dom;if(this.textDOM!=t&&(this.dom.firstChild!=this.textDOM||t.lastChild!=this.textDOM)){for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(this.textDOM)}}}reuseDOM(t){return 3==t.nodeType&&(this.createDOM(t),!0)}merge(t,e=this.length,i=null){return!(i&&(!(i instanceof z&&i.tagName==this.tagName&&i.class==this.class&&B(i.attrs,this.attrs))||this.length-(e-t)+i.length>F))&&(this.text=this.text.slice(0,t)+(i?i.text:"")+this.text.slice(e),this.markDirty(),!0)}slice(t,e=this.length){return new z(this.text.slice(t,e),this.tagName,this.class,this.attrs)}localPosFromDOM(t,e){return t==this.textDOM?e:e?this.text.length:0}domAtPos(t){return new C(this.textDOM,t)}domBoundsAround(t,e,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t){return q(this.textDOM,t)}}function q(t,e){let i=document.createRange();if(f.chrome||f.gecko)return i.setEnd(t,e),i.setStart(t,e),i.getBoundingClientRect();{let s=0==e?1:-1;i.setEnd(t,e+(s>0?1:0)),i.setStart(t,e-(s<0?1:0));let n=i.getBoundingClientRect(),r=s<0?n.right:n.left;return{left:r,right:r,top:n.top,bottom:n.bottom}}}class I extends W{constructor(t,e,i,s){super(),this.widget=t,this.length=e,this.side=i,this.open=s}static create(t,e,i,s=0){return new(t.customView||I)(t,e,i,s)}slice(t,e=this.length){return I.create(this.widget,e-t,this.side)}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(t,e=this.length,i=null){if(i){if(!(i instanceof I)||!i.open||t>0&&!(1&i.open)||e<this.length&&!(2&i.open))return!1;if(!this.widget.compare(i.widget))throw new Error("Trying to merge incompatible widgets")}return this.length=t+(i?i.length:0)+(this.length-e),!0}match(t){return t.length==this.length&&t instanceof I&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.eq(t.widget.value)||this.markDirty(!0),this.widget=t.widget,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return[""];let t=this;for(;t.parent;)t=t.parent;let e=t.editorView,i=e&&e.state.doc,s=this.posAtStart;return i?i.sliceLines(s,s+this.length):[""]}domAtPos(t){return 0==t?C.before(this.dom):C.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t){let e=this.dom.getClientRects();for(let i=t>0?e.length-1:0;;i+=t>0?-1:1){let s=e[i];if(t>0?0==i:i==e.length-1||s.top<s.bottom)return e[i]}return null}}class G extends I{domAtPos(t){return new C(this.widget.value.text,t)}sync(){this.dom||this.setDOM(this.widget.toDOM(this.editorView))}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(t){return q(this.widget.value.text,t)}}class K{constructor(t){this.value=t}eq(t){return this.value===t}updateDOM(t){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t.value)}get estimatedHeight(){return-1}ignoreEvent(t){return!0}get customView(){return null}}var j;exports.WidgetType=K,exports.BlockType=j,function(t){t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange"}(j||(exports.BlockType=j={}));class _ extends i.RangeValue{constructor(t,e,i,s){super(),this.startSide=t,this.endSide=e,this.widget=i,this.spec=s}get point(){return!1}get heightRelevant(){return!1}static mark(t){return new Q(t)}static widget(t){let e=t.side||0;return t.block&&(e+=(2e8+1)*(e>0?1:-1)),new X(t,e,e,!!t.block,t.widget||null,!1)}static replace(t){let e=!!t.block,{start:i,end:s}=Y(t);return new X(t,e?-2e8*(i?2:1):1e8*(i?-1:1),e?2e8*(s?2:1):1e8*(s?1:-1),e,t.widget||null,!0)}static line(t){return new $(t)}static set(t,e=!1){return i.RangeSet.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}exports.Decoration=_,_.none=i.RangeSet.empty;class Q extends _{constructor(t){let{start:e,end:i}=Y(t);super(1e8*(e?-1:1),1e8*(i?1:-1),null,t)}eq(t){return this==t||t instanceof Q&&this.spec.tagName==t.spec.tagName&&this.spec.class==t.spec.class&&B(this.spec.attributes||null,t.spec.attributes||null)}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}class $ extends _{constructor(t){super(-1e8,-1e8,null,t)}get point(){return!0}eq(t){return t instanceof $&&B(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}$.prototype.startMapMode=$.prototype.endMapMode=t.MapMode.TrackBefore;class X extends _{constructor(e,i,s,n,r,o){super(i,s,r,e),this.block=n,this.isReplace=o,n?(this.startMapMode=i<0?t.MapMode.TrackBefore:t.MapMode.TrackAfter,this.endMapMode=s<0?t.MapMode.TrackBefore:t.MapMode.TrackAfter):this.startMapMode=this.endMapMode=t.MapMode.TrackDel}get point(){return!0}get type(){return this.startSide<this.endSide?j.WidgetRange:this.startSide<0?j.WidgetBefore:j.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(t){return t instanceof X&&U(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only create zero-length ranges");return super.range(t,e)}}function Y(t){let{inclusiveStart:e,inclusiveEnd:i}=t;return null==e&&(e=t.inclusive),null==i&&(i=t.inclusive),{start:e||!1,end:i||!1}}function U(t,e){return t==e||!!(t&&e&&t.compare(e))}const J=4;function Z(t,e,i){let s=i.length-1;s>=0&&i[s]+J>t?i[s]=Math.max(i[s],e):i.push(t,e)}const tt=t.Facet.define(),et=e.StyleModule.newName();function it(t,i){let s=Object.create(null);for(let e in i){let n=e.split("."),r="."+t+("wrap"==n[0]?"":" ");for(let t=1;t<=n.length;t++)r+=".cm-"+n.slice(0,t).join("-");s[r]=i[e]}return new e.StyleModule(s,{generateClasses:!1})}function st(t){let e=t.split("."),i="";for(let s=1;s<=e.length;s++)i+=(i?" ":"")+"cm-"+e.slice(0,s).join("-");return i}const nt=it(et,{wrap:{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline_fallback:"1px dotted #212121",outline:"5px auto -webkit-focus-ring-color"},display:"flex !important",flexDirection:"column"},scroller:{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto"},content:{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",boxSizing:"border-box",padding:"4px 0",outline:"none",caretColor:"black"},line:{display:"block",padding:"0 2px 0 4px"}}),rt=st("line");class ot extends E{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,i,s){if(i){if(!(i instanceof ot))return!1;this.dom||i.transferDOM(this)}s&&this.setDeco(i?i.attrs:null);let n=i?i.children:[],r=this.childCursor(),{i:o,off:h}=r.findPos(e,1),{i:l,off:a}=r.findPos(t,-1),c=t-e;for(let d of n)c+=d.length;if(this.length+=c,l==o&&a){let t=this.children[l];if(1==n.length&&t.merge(a,h,n[0]))return!0;if(0==n.length)return t.merge(a,h,null),!0;let e=t.slice(h);e.merge(0,0,n[n.length-1])?n[n.length-1]=e:n.push(e),o++,h=0}if(h){let t=this.children[o];n.length&&t.merge(0,h,n[n.length-1])?n.pop():t.merge(0,h,null)}else o<this.children.length&&n.length&&this.children[o].merge(0,0,n[n.length-1])&&n.pop();if(a){let t=this.children[l];n.length&&t.merge(a,void 0,n[0])?n.shift():t.merge(a,void 0,null),l++}else l&&n.length&&this.children[l-1].merge(this.children[l-1].length,void 0,n[0])&&n.shift();for(;l<o&&n.length&&this.children[o-1].match(n[n.length-1]);)n.pop(),o--;for(;l<o&&n.length&&this.children[l].match(n[0]);)n.shift(),l++;return(n.length||l!=o)&&this.replaceChildren(l,o,n),!0}split(t){let e=new ot;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:i,off:s}=this.childPos(t);s&&(e.append(this.children[i].slice(s)),this.children[i].merge(s,void 0,null),i++);for(let n=i;n<this.children.length;n++)e.append(this.children[n]);for(;i>0&&0==this.children[i-1].length;)this.children[i-1].parent=null,i--;return this.children.length=i,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){B(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t){this.children.push(t),t.setParent(this),this.length+=t.length}addLineDeco(t){let e=t.spec.attributes;e&&(this.attrs=V(e,this.attrs||{}))}domAtPos(t){let e=0;for(let i=0;e<this.children.length;e++){let s=this.children[e],n=i+s.length;if(!(n==i&&s.getSide()<=0)){if(t>i&&t<n&&s.dom.parentNode==this.dom)return s.domAtPos(t-i);if(t<=i)break;i=n}}for(;e>0;e--){let t=this.children[e-1].dom;if(t.parentNode==this.dom)return C.after(t)}return new C(this.dom,0)}sync(){this.dom||(this.setDOM(document.createElement("div")),this.dom.className=rt,this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(H(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add(rt),this.prevAttrs=void 0),super.sync();let t=this.dom.lastChild;if(!t||"BR"!=t.nodeName&&!(E.get(t)instanceof z)){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t=0;for(let e of this.children){if(!(e instanceof z))return null;let i=w(e.dom);if(1!=i.length)return null;t+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}}coordsAt(t){for(let e=0,i=0;i<this.children.length;i++){let s=this.children[i],n=e+s.length;if(n>=t)return s.coordsAt(t-e);e=n}return this.dom.lastChild.getBoundingClientRect()}match(t){return!1}get type(){return j.Text}}const ht=[];class lt extends E{constructor(t,e,i,s=0){super(),this.widget=t,this.length=e,this.type=i,this.open=s,this.breakAfter=0}merge(t,e,i){if(!(i instanceof lt)||!i.open||t>0&&!(1&i.open)||e<this.length&&!(2&i.open))return!1;if(!this.widget.compare(i.widget))throw new Error("Trying to merge an open widget with an incompatible node");return this.length=t+i.length+(this.length-e),!0}domAtPos(t){return 0==t?C.before(this.dom):C.after(this.dom,t==this.length)}split(t){let e=this.length-t;return this.length=t,new lt(this.widget,e,this.type)}get children(){return ht}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.sliceLines(this.posAtStart,this.posAtEnd):[""]}domBoundsAround(){return null}match(t){return t instanceof lt&&t.type==this.type&&t.widget.constructor==this.widget.constructor&&(t.widget.eq(this.widget.value)||this.markDirty(!0),this.widget=t.widget,this.length=t.length,this.breakAfter=t.breakAfter,!0)}}class at{constructor(t,e,i){this.doc=t,this.pos=e,this.end=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).start!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof lt&&t.type==j.WidgetBefore)}getLine(){return this.curLine||this.content.push(this.curLine=new ot),this.curLine}addWidget(t){this.curLine=null,this.content.push(t)}finish(){this.posCovered()||this.getLine()}buildText(t,e,i,s,n){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:i,done:s}=this.cursor.next(this.skip);if(this.skip=0,s)throw new Error("Ran out of text content when drawing inline views");if(i){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.curLine=null,t--;continue}this.text=e,this.textOff=0}let n=Math.min(this.text.length-this.textOff,t);this.getLine().append(new z(this.text.slice(this.textOff,this.textOff+n),e,i,s)),t-=n,this.textOff+=n}}span(t,e,i){let s=null,n=null,r=null;for(let{spec:o}of i)if(o.tagName&&(s=o.tagName),o.class&&(n=n?n+" "+o.class:o.class),o.attributes)for(let t in o.attributes){let e=o.attributes[t];null!=e&&("class"==t?n=n?n+" "+e:e:(r||(r={}),"style"==t&&r.style&&(e=r.style+";"+e),r[t]=e))}this.buildText(e-t,s,n,r,i),this.pos=e}point(t,e,i,s,n){let r=(s?1:0)|(n?2:0),o=e-t;if(i instanceof X)if(i.block){let{type:t}=i;t!=j.WidgetAfter||this.posCovered()||this.getLine(),this.addWidget(new lt(i.widget||new ct("div"),o,t,r))}else this.getLine().append(I.create(i.widget||new ct("span"),o,i.startSide,r));else this.doc.lineAt(this.pos).start==this.pos&&this.getLine().addLineDeco(i);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e)}static build(t,e,s,n){let r=new at(t,e,s);return i.RangeSet.spans(n,e,s,r),r.finish(),r}}class ct extends K{toDOM(){return document.createElement(this.value)}updateDOM(t){return t.nodeName.toLowerCase()==this.value}}const dt=["pre-wrap","normal","pre-line"];class ut{constructor(){this.doc=s.Text.empty,this.lineWrapping=!1,this.direction="ltr",this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(t,e){let i=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(i+=Math.ceil((e-t-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(t){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(t){return this.doc=t,this}mustRefresh(t,e,i){let s=!1;for(let n=0;n<t.length;n++){let e=t[n];e<0?n++:this.heightSamples[Math.floor(10*e)]||(s=!0,this.heightSamples[Math.floor(10*e)]=!0)}return s||dt.indexOf(e)>-1!=this.lineWrapping||this.direction!=i}refresh(t,e,i,s,n,r){let o=dt.indexOf(t)>-1,h=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=o||this.direction!=e;if(this.lineWrapping=o,this.direction=e,this.lineHeight=i,this.charWidth=s,this.lineLength=n,h){this.heightSamples={};for(let t=0;t<r.length;t++){let e=r[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return h}}class ft{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class gt{constructor(t,e,i,s,n){this.from=t,this.length=e,this.top=i,this.height=s,this.type=n}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(t){let e=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new gt(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var pt;exports.BlockInfo=gt,function(t){t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight"}(pt||(pt={}));class mt{constructor(t,e,i=2){this.length=t,this.height=e,this.flags=i}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|-3&this.flags}setHeight(t,e){this.height!=e&&(this.height=e,t.heightChanged=!0)}replace(t,e,i){return mt.of(i)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,i,s){let n=this;for(let r=s.length-1;r>=0;r--){let{fromA:o,toA:h,fromB:l,toB:a}=s[r],c=n.lineAt(o,pt.ByPosNoHeight,e,0,0),d=c.to>=h?c:n.lineAt(h,pt.ByPosNoHeight,e,0,0);for(a+=d.to-h,h=d.to;r>0&&c.from<=s[r-1].toA;)o=s[r-1].fromA,l=s[r-1].fromB,r--,o<c.from&&(c=n.lineAt(o,pt.ByPosNoHeight,e,0,0));l+=c.from-o,o=c.from;let u=Mt.build(i,t,l,a);n=n.replace(o,h,u)}return n.updateHeight(i,0)}static empty(){return new vt(0,0)}static of(t){if(1==t.length)return t[0];let e=0,i=t.length,s=0,n=0;for(;;)if(e==i)if(s>2*n){let n=t[e-1];n.break?t.splice(--e,1,n.left,null,n.right):t.splice(--e,1,n.left,n.right),i+=1+n.break,s-=n.size}else{if(!(n>2*s))break;{let e=t[i];e.break?t.splice(i,1,e.left,null,e.right):t.splice(i,1,e.left,e.right),i+=2+e.break,n-=e.size}}else if(s<n){let i=t[e++];i&&(s+=i.size)}else{let e=t[--i];e&&(n+=e.size)}let r=0;return null==t[e-1]?(r=1,e--):null==t[e]&&(r=1,i++),new bt(mt.of(t.slice(0,e)),r,mt.of(t.slice(i)))}}mt.prototype.size=1;class wt extends mt{constructor(t,e,i){super(t,e),this.type=i}blockAt(t,e,i,s){return new gt(s,this.length,i,this.height,this.type)}lineAt(t,e,i,s,n){return this.blockAt(0,i,s,n)}forEachLine(t,e,i,s,n,r){r(this.blockAt(0,i,s,n))}updateHeight(t,e=0,i=!1,s){return s&&s.from<=e&&s.more&&this.setHeight(t,s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class vt extends wt{constructor(t,e){super(t,e,j.Text),this.collapsed=0,this.widgetHeight=0}replace(t,e,i){return 1==i.length&&i[0]instanceof vt&&Math.abs(this.length-i[0].length)<10?(i[0].height=this.height,i[0]):mt.of(i)}updateHeight(t,e=0,i=!1,s){return s&&s.from<=e&&s.more?this.setHeight(t,s.heights[s.index++]):(i||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class yt extends mt{constructor(t){super(t,0)}lines(t,e){let i=t.lineAt(e).number,s=t.lineAt(e+this.length).number;return{firstLine:i,lastLine:s,lineHeight:this.height/(s-i+1)}}blockAt(t,e,i,s){let{firstLine:n,lastLine:r,lineHeight:o}=this.lines(e,s),h=Math.max(0,Math.min(r-n,Math.floor((t-i)/o))),{start:l,length:a}=e.line(n+h);return new gt(l,a,i+o*h,o,j.Text)}lineAt(t,e,i,s,n){if(e==pt.ByHeight)return this.blockAt(t,i,s,n);if(e==pt.ByPosNoHeight){let{start:e,end:s}=i.lineAt(t);return new gt(e,s-e,0,0,j.Text)}let{firstLine:r,lineHeight:o}=this.lines(i,n),{start:h,length:l,number:a}=i.lineAt(t);return new gt(h,l,s+o*(a-r),o,j.Text)}forEachLine(t,e,i,s,n,r){let{firstLine:o,lastLine:h,lineHeight:l}=this.lines(i,n);for(let a=o;a<=h;a++){let{start:n,end:o}=i.line(a);if(n>e)break;o>=t&&r(new gt(n,o-n,s,s+=l,j.Text))}}replace(t,e,i){let s=this.length-e;if(s>0){let t=i[i.length-1];t instanceof yt?i[i.length-1]=new yt(t.length+s):i.push(null,new yt(s-1))}if(t>0){let e=i[0];e instanceof yt?i[0]=new yt(t+e.length):i.unshift(new yt(t-1),null)}return mt.of(i)}decomposeLeft(t,e){e.push(t==this.length?this:new yt(t))}decomposeRight(t,e){e.push(0==t?this:new yt(this.length-t))}updateHeight(t,e=0,i=!1,s){let n=e+this.length;if(s&&s.from<=e+this.length&&s.more){let i=[],r=Math.max(e,s.from);for(s.from>e&&i.push(new yt(s.from-e-1).updateHeight(t,e));r<=n&&s.more;){let e=t.doc.lineAt(r).length;i.length&&i.push(null);let n=new vt(e,s.heights[s.index++]);n.outdated=!1,i.push(n),r+=e+1}return r<=n&&i.push(null,new yt(n-r).updateHeight(t,r)),t.heightChanged=!0,mt.of(i)}return(i||this.outdated)&&(this.setHeight(t,t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class bt extends mt{constructor(t,e,i){super(t.length+e+i.length,t.height+i.height,e|(t.outdated||i.outdated?2:0)),this.left=t,this.right=i,this.size=t.size+i.size}get break(){return 1&this.flags}blockAt(t,e,i,s){let n=i+this.left.height;return t<n||0==this.right.height?this.left.blockAt(t,e,i,s):this.right.blockAt(t,e,n,s+this.left.length+this.break)}lineAt(t,e,i,s,n){let r=s+this.left.height,o=n+this.left.length+this.break,h=e==pt.ByHeight?t<r||0==this.right.height:t<o,l=h?this.left.lineAt(t,e,i,s,n):this.right.lineAt(t,e,i,r,o);if(this.break||(h?l.to<o:l.from>o))return l;let a=e==pt.ByPosNoHeight?pt.ByPosNoHeight:pt.ByPos;return h?l.join(this.right.lineAt(o,a,i,r,o)):this.left.lineAt(o,a,i,s,n).join(l)}forEachLine(t,e,i,s,n,r){let o=s+this.left.height,h=n+this.left.length+this.break;if(this.break)t<h&&this.left.forEachLine(t,e,i,s,n,r),e>=h&&this.right.forEachLine(t,e,i,o,h,r);else{let l=this.lineAt(h,pt.ByPos,i,s,n);t<l.from&&this.left.forEachLine(t,l.from-1,i,s,n,r),l.to>=t&&l.from<=e&&r(l),e>l.to&&this.right.forEachLine(l.to+1,e,i,o,h,r)}}replace(t,e,i){let s=this.left.length+this.break;if(e<s)return this.balanced(this.left.replace(t,e,i),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-s,e-s,i));let n=[];t>0&&this.decomposeLeft(t,n);let r=n.length;for(let o of i)n.push(o);if(t>0&&St(n,r-1),e<this.length){let t=n.length;this.decomposeRight(e,n),St(n,t)}return mt.of(n)}decomposeLeft(t,e){let i=this.left.length;if(t<=i)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&t>=++i&&e.push(null),t>i&&this.right.decomposeLeft(t-i,e)}decomposeRight(t,e){let i=this.left.length,s=i+this.break;if(t>=s)return this.right.decomposeRight(t-s,e);t<i&&this.left.decomposeRight(t,e),this.break&&t<s&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?mt.of(this.break?[t,null,e]:[t,e]):(this.left=t,this.right=e,this.height=t.height+e.height,this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,i=!1,s){let{left:n,right:r}=this,o=e+n.length+this.break,h=null;return s&&s.from<=e+n.length&&s.more?h=n=n.updateHeight(t,e,i,s):n.updateHeight(t,e,i),s&&s.from<=o+r.length&&s.more?h=r=r.updateHeight(t,o,i,s):r.updateHeight(t,o,i),h?this.balanced(n,r):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function St(t,e){let i,s;null==t[e]&&(i=t[e-1])instanceof yt&&(s=t[e+1])instanceof yt&&t.splice(e-1,3,new yt(i.length+1+s.length))}const xt=5;class Mt{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof vt?i.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new vt(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,i){if(t<e||i.heightRelevant){let s=i.widget?Math.max(0,i.widget.estimatedHeight):0,n=e-t;i.block?this.addBlock(new wt(n,s,i.type)):(n||s>=xt)&&this.addLineDeco(s,n)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).end)}enterLine(){if(this.lineStart>-1)return;let{start:t,end:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(new yt(t-this.writtenTo-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new vt(this.pos-t,-1)),this.writtenTo=this.pos}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof vt)return t;let e=new vt(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine(),t.type!=j.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,t.type!=j.WidgetBefore&&(this.covering=t)}addLineDeco(t,e){let i=this.ensureLine();i.length+=e,i.collapsed+=e,i.widgetHeight=Math.max(i.widgetHeight,t),this.writtenTo=this.pos=this.pos+e}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof vt||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(new yt(this.pos-this.writtenTo)):this.nodes.push(new vt(0,-1));let i=t;for(let s of this.nodes)s instanceof vt&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(t,e,s,n){let r=new Mt(s,t);return i.RangeSet.spans(e,s,n,r),r.finish(s)}get minPointSize(){return 0}}function At(t,e,s,n){let r=new Dt;return i.RangeSet.compare(t,e,s,n,r),r.changes}class Dt{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,i,s){(t<e||i&&i.heightRelevant||s&&s.heightRelevant)&&Z(t,e,this.changes)}get minPointSize(){return 0}}const Ot=[],kt=t.Facet.define(),Ct=t.Facet.define(),Tt=t.Facet.define();class Et{static define(){return new Et}}exports.PluginField=Et,Et.scrollMargins=Et.define();let Rt=0;const Pt=t.Facet.define();class Lt{constructor(t,e,i){this.id=t,this.create=e,this.fields=i,this.extension=Pt.of(this)}static define(t){return new Lt(Rt++,t,[])}static fromClass(t){return Lt.define(e=>new t(e))}provide(t,e){return new Lt(this.id,this.create,this.fields.concat({field:t,get:e}))}decorations(t){return this.provide(Vt,t||(t=>t.decorations))}}exports.ViewPlugin=Lt;const Vt=Et.define();class Bt{constructor(t,e){this.value=t,this.spec=e,this.updateFunc=this.value.update?this.value.update.bind(this.value):()=>void 0}static create(t,e){let i;try{i=t.create(e)}catch(s){return console.error("CodeMirror plugin crashed:",s),Bt.dummy}return new Bt(i,t)}takeField(t,e){for(let{field:i,get:s}of this.spec.fields)i==t&&e.push(s(this.value))}update(t){try{return this.updateFunc(t),this}catch(e){if(console.error("CodeMirror plugin crashed:",e),this.value.destroy)try{this.value.destroy()}catch(i){}return Bt.dummy}}destroy(){try{this.value.destroy&&this.value.destroy()}catch(t){console.error("CodeMirror plugin crashed:",t)}}}Bt.dummy=new Bt({},Lt.define(()=>({})));const Ht=t.Facet.define({combine:t=>t.reduce((t,e)=>V(e,t),{})}),Nt=t.Facet.define({combine:t=>t.reduce((t,e)=>V(e,t),{})}),Wt=t.Facet.define(),Ft=t.Facet.define(),zt=t.Facet.define();class qt{constructor(e,i,s=Ot){this.view=e,this.state=i,this.transactions=s,this.flags=0,this.changes=s.reduce((t,e)=>t.appendSet(e.changes),t.ChangeSet.empty),this.prevState=e.state;let n=e.hasFocus;n!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=n,this.flags),this.docChanged&&(this.flags|=2)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return this.transactions.some(t=>t.docChanged)}get selectionSet(){return this.transactions.some(t=>t.selectionSet)}get empty(){return 0==this.flags&&0==this.transactions.length}}function It(t,e){let i=t.getBoundingClientRect(),s=Math.max(0,i.left),n=Math.min(innerWidth,i.right),r=Math.max(0,i.top),o=Math.min(innerHeight,i.bottom);for(let h=t.parentNode;h;)if(1==h.nodeType){if(h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth){let t=h.getBoundingClientRect();s=Math.max(s,t.left),n=Math.min(n,t.right),r=Math.max(r,t.top),o=Math.min(o,t.bottom)}h=h.parentNode}else{if(11!=h.nodeType)break;h=h.host}return{left:s-i.left,right:n-i.left,top:r-(i.top+e),bottom:o-(i.top+e)}}exports.ViewUpdate=qt;class Gt{constructor(t,e,i){this.from=t,this.to=e,this.size=i}static same(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++){let s=t[i],n=e[i];if(s.from!=n.from||s.to!=n.to||s.size!=n.size)return!1}return!0}draw(t){return _.replace({widget:new Kt({size:this.size,vertical:t})}).range(this.from,this.to)}}class Kt extends K{toDOM(){let t=document.createElement("div");return this.value.vertical?t.style.height=this.value.size+"px":(t.style.width=this.value.size+"px",t.style.height="2px",t.style.display="inline-block"),t}eq(t){return this.value.size==t.size&&this.value.vertical==t.vertical}get estimatedHeight(){return this.value.vertical?this.value.size:-1}}class jt{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.paddingTop=0,this.paddingBottom=0,this.heightOracle=new ut,this.heightMap=mt.empty(),this.scrollTo=-1,this.printing=!1,this.visibleRanges=[],this.heightMap=this.heightMap.applyChanges(e.facet(Wt),s.Text.empty,this.heightOracle.setDoc(e.doc),[new t.ChangedRange(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,-1),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=_.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}update(t,e=-1){let i=this.state;this.state=t.state;let s=this.state.facet(Wt),n=t.changes.changedRanges(),r=Qt(n,At(t.prevState.facet(Wt),s,t?n:[],this.state.doc.length)),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(s,i.doc,this.heightOracle.setDoc(this.state.doc),r),this.heightMap.height!=o&&(t.flags|=2);let h=r.length?this.mapViewport(this.viewport,t.changes):this.viewport;(!h||e>-1&&(e<h.from||e>h.to)||!this.viewportIsCovering(h))&&(h=this.getViewport(0,e)),h.eq(this.viewport)||(this.viewport=h,t.flags|=4),(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)&&(t.flags|=this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes)))),this.computeVisibleRanges(),e>-1&&(this.scrollTo=e)}measure(t,e){let i=t.dom,s="",n="ltr";if(!e){let t=window.getComputedStyle(i);s=t.whiteSpace,n=t.direction||"ltr",this.paddingTop=parseInt(t.paddingTop)||0,this.paddingBottom=parseInt(t.paddingBottom)||0}let r=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:It(i,this.paddingTop),o=r.top-this.pixelViewport.top,h=r.bottom-this.pixelViewport.bottom;if(this.pixelViewport=r,this.pixelViewport.bottom<=this.pixelViewport.top||this.pixelViewport.right<=this.pixelViewport.left)return 0;let l=t.measureVisibleLineHeights(),a=!1,c=0;if(!e){if(this.heightOracle.mustRefresh(l,s,n)){let{lineHeight:e,charWidth:i}=t.measureTextSize();(a=this.heightOracle.refresh(s,n,e,i,t.dom.clientWidth/i,l))&&(t.minWidth=0)}o>0&&h>0?c=Math.max(o,h):o<0&&h<0&&(c=Math.min(o,h))}this.heightOracle.heightChanged=!1,this.heightMap=this.heightMap.updateHeight(this.heightOracle,0,a,new ft(this.viewport.from,l));let d=this.heightOracle.heightChanged?2:0,u=this.scrollTo;return this.scrollTo=-1,(!this.viewportIsCovering(this.viewport,c)||u>-1&&(u<this.viewport.from||u>this.viewport.to))&&(this.viewport=this.getViewport(c,u),d|=4),(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)&&(d|=this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps))),this.computeVisibleRanges(),u>-1&&t.scrollPosIntoView(u),d}getViewport(t,e){let i=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),s=this.heightMap,n=this.state.doc,{top:r,bottom:o}=this.pixelViewport,h=new _t(s.lineAt(r-1e3*i,pt.ByHeight,n,0,0).from,s.lineAt(o+1e3*(1-i),pt.ByHeight,n,0,0).to);if(e>-1)if(e<h.from){let{top:t}=s.lineAt(e,pt.ByPos,n,0,0);h=new _t(s.lineAt(t-500,pt.ByHeight,n,0,0).from,s.lineAt(t+(o-r)+500,pt.ByHeight,n,0,0).to)}else if(e>h.to){let{bottom:t}=s.lineAt(e,pt.ByPos,n,0,0);h=new _t(s.lineAt(t-(o-r)-500,pt.ByHeight,n,0,0).from,s.lineAt(t+500,pt.ByHeight,n,0,0).to)}return h}mapViewport(t,e){let i=e.mapPos(t.from,-1),s=e.mapPos(t.to,1);return s-i-(t.to-t.from)>100?null:new _t(this.heightMap.lineAt(i,pt.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(s,pt.ByPos,this.state.doc,0,0).to)}viewportIsCovering({from:t,to:e},i=0){let{top:s}=this.heightMap.lineAt(t,pt.ByPos,this.state.doc,0,0),{bottom:n}=this.heightMap.lineAt(e,pt.ByPos,this.state.doc,0,0);return(0==t||s<=this.pixelViewport.top-Math.max(10,Math.min(-i,250)))&&(e==this.state.doc.length||n>=this.pixelViewport.bottom+Math.max(10,Math.min(i,250)))}mapLineGaps(t,e){if(!t.length||!e.changes.length)return t;let i=[];for(let s of t)e.touchesRange(s.from,s.to)||i.push(new Gt(e.mapPos(s.from),e.mapPos(s.to),s.size));return i}ensureLineGaps(t){let e=[];return"ltr"!=this.heightOracle.direction?e:(this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,i=>{if(i.length<1e4)return;let s,n,r=$t(i.from,i.to,this.state);if(r.total<1e4)return;if(this.heightOracle.lineWrapping)s=i.from!=this.viewport.from?i.from:Xt(r,(this.pixelViewport.top-i.top)/i.height),n=i.to!=this.viewport.to?i.to:Xt(r,(this.pixelViewport.bottom-i.top)/i.height);else{let t=r.total*this.heightOracle.charWidth;s=Xt(r,this.pixelViewport.left/t),n=Xt(r,this.pixelViewport.right/t)}let o=this.state.selection.primary;o.from<=s&&o.to>=i.from&&(s=o.from),o.from<=i.to&&o.to>=n&&(n=o.to);let h=s-1e4,l=n+1e4;h>i.from+5e3&&e.push(Ut(t,t=>t.from==i.from&&t.to>h-5e3&&t.to<h+5e3)||new Gt(i.from,h,this.gapSize(i,h,!0,r))),l<i.to-5e3&&e.push(Ut(t,t=>t.to==i.to&&t.from>l-5e3&&t.from<l+5e3)||new Gt(l,i.to,this.gapSize(i,l,!1,r)))}),e)}gapSize(t,e,i,s){if(this.heightOracle.lineWrapping){let n=t.height*Yt(s,e);return i?n:t.height-n}{let t=Yt(s,e);return s.total*this.heightOracle.charWidth*(i?t:1-t)}}updateLineGaps(t){return Gt.same(t,this.lineGaps)?0:(this.lineGaps=t,this.lineGapDeco=_.set(t.map(t=>t.draw(this.heightOracle.lineWrapping))),16)}computeVisibleRanges(){let t=this.state.facet(Wt);this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let e=[];i.RangeSet.spans(t,this.viewport.from,this.viewport.to,{span(t,i){e.push({from:t,to:i})},point(){},minPointSize:20}),this.visibleRanges=e}lineAt(t,e){return this.heightMap.lineAt(t,pt.ByPos,this.state.doc,e+this.paddingTop,0)}lineAtHeight(t,e){return this.heightMap.lineAt(t,pt.ByHeight,this.state.doc,e+this.paddingTop,0)}blockAtHeight(t,e){return this.heightMap.blockAt(t,this.state.doc,e+this.paddingTop,0)}forEachLine(t,e,i,s){return this.heightMap.forEachLine(t,e,this.state.doc,s+this.paddingTop,0,i)}}class _t{constructor(t,e){this.from=t,this.to=e}eq(t){return this.from==t.from&&this.to==t.to}}function Qt(e,i){if(0==i.length)return e;let s=[];for(let n=0,r=0,o=0,h=0;;n++){let l=n==e.length?null:e[n],a=o-h,c=l?l.fromB:1e9;for(;r<i.length&&i[r]<c;){let e=i[r],n=i[r+1],o=Math.max(h,e),l=Math.min(c,n);if(o<=l&&new t.ChangedRange(o+a,l+a,o,l).addToSet(s),n>c)break;r+=2}if(!l)return s;new t.ChangedRange(l.fromA,l.toA,l.fromB,l.toB).addToSet(s),o=l.toA,h=l.toB}}function $t(t,e,s){let n=[],r=0,o=0;return i.RangeSet.spans(s.facet(Wt),t,e,{span(){},point(t,e){t>r&&(n.push({from:r,to:t}),o+=e-r),r=e},minPointSize:20}),r<e&&(n.push({from:r,to:e}),o+=e-r),{total:o,ranges:n}}function Xt({total:t,ranges:e},i){if(i<=0)return e[0].from;if(i>=1)return e[e.length-1].to;let s=Math.floor(t*i);for(let n=0;;n++){let{from:t,to:i}=e[n],r=i-t;if(s<=r)return t+s;s-=r}}function Yt(t,e){let i=0;for(let{from:s,to:n}of t.ranges){if(e<=n){i+=e-s;break}i+=n-s}return i/t.total}function Ut(t,e){for(let i of t)if(e(i))return i}const Jt=[];class Zt extends E{constructor(e){super(),this.view=e,this.viewports=Jt,this.compositionDeco=_.none,this.decorations=[],this.selectionDirty=null,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.setDOM(e.contentDOM),this.children=[new ot],this.children[0].setParent(this),this.updateInner([new t.ChangedRange(0,0,0,e.state.doc.length)],this.updateDeco(),0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){var i;let s=e.changes.changedRanges();this.minWidth>0&&s.length&&(s.every(({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo)?(this.minWidthFrom=t.ChangedRange.mapPos(this.minWidthFrom,1,s),this.minWidthTo=t.ChangedRange.mapPos(this.minWidthTo,1,s)):this.minWidth=0);let n=f.chrome&&!this.compositionDeco.size&&e&&e.changes.changes.some(t=>t.text.length>1);(null===(i=this.view.inputState)||void 0===i?void 0:i.composing)?e.transactions.length&&(this.compositionDeco=ie(this.view,s)):this.compositionDeco=_.none;let r=this.decorations,o=this.updateDeco();return s=Qt(s,oe(r,o,s,e.state.doc.length)),0==this.dirty&&0==s.length&&!(20&e.flags)&&e.state.selection.primary.from>=this.view.viewport.from&&e.state.selection.primary.to<=this.view.viewport.to?(this.updateSelection(n),!1):(this.updateInner(s,o,e.prevState.doc.length,n),!0)}updateInner(t,e,i,s=!1){this.updateChildren(t,e,i),this.view.observer.ignore(()=>{this.dom.style.height=this.view.viewState.heightMap.height+"px",this.dom.style.minWidth=this.minWidth?this.minWidth+"px":"",this.sync(),this.dirty=0,this.updateSelection(s),this.dom.style.height=""})}updateChildren(t,e,i){let s=this.childCursor(i);for(let n=t.length-1;;n--){let i=n>=0?t[n]:null;if(!i)break;let{fromA:r,toA:o,fromB:h,toB:l}=i,{content:a,breakAtStart:c}=at.build(this.view.state.doc,h,l,e),{i:d,off:u}=s.findPos(o,1),{i:f,off:g}=s.findPos(r,-1);this.replaceRange(f,g,d,u,a,c)}}replaceRange(t,e,i,s,n,r){let o=this.children[t],h=n.length?n[n.length-1]:null,l=h?h.breakAfter:r;if(t==i&&!r&&!l&&n.length<2&&o.merge(e,s,n.length?h:null,0==e))return;let a=this.children[i];for(s<a.length||a.children.length&&0==a.children[a.children.length-1].length?(t==i&&(a=a.split(s),s=0),!l&&h&&a.merge(0,s,h,!0)?n[n.length-1]=a:((s||a.children.length&&0==a.children[0].length)&&a.merge(0,s,null,!1),n.push(a))):a.breakAfter&&(h?h.breakAfter=1:r=1),i++,o.breakAfter=r,e>0&&(!r&&n.length&&o.merge(e,o.length,n[0],!1)?o.breakAfter=n.shift().breakAfter:(e<o.length||o.children.length&&0==o.children[o.children.length-1].length)&&o.merge(e,o.length,null,!1),t++);t<i&&n.length;)if(this.children[i-1].match(n[n.length-1]))i--,n.pop();else{if(!this.children[t].match(n[0]))break;t++,n.shift()}(t<i||n.length)&&this.replaceChildren(t,i,n)}updateSelection(t=!1){if(this.clearSelectionDirty(),this.root.activeElement!=this.dom)return;let e=this.view.state.selection.primary,i=this.domAtPos(e.anchor),s=this.domAtPos(e.head),n=g(this.root);!t&&v(i.node,i.offset,n.anchorNode,n.anchorOffset)&&v(s.node,s.offset,n.focusNode,n.focusOffset)||this.view.observer.ignore(()=>{if(n.extend)n.collapse(i.node,i.offset),e.empty||n.extend(s.node,s.offset);else{let t=document.createRange();e.anchor>e.head&&([i,s]=[s,i]),t.setEnd(s.node,s.offset),t.setStart(i.node,i.offset),n.removeAllRanges(),n.addRange(t)}}),this.impreciseAnchor=i.precise?null:new C(n.anchorNode,n.anchorOffset),this.impreciseHead=s.precise?null:new C(n.focusNode,n.focusOffset)}nearest(t){for(let e=t;e;){let t=E.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let i=this.nearest(t);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(t,e)+i.posAtStart}domAtPos(t){let{i:e,off:i}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(i<t.length||t instanceof ot)break;e++,i=0}return this.children[e].domAtPos(i)}coordsAt(t){for(let e=this.length,i=this.children.length-1;;i--){let s=this.children[i],n=e-s.breakAfter-s.length;if(t>=n&&s.type!=j.WidgetAfter)return s.coordsAt(t-n);e=n}}measureVisibleLineHeights(){let t=[],{from:e,to:i}=this.view.viewState.viewport,s=Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1;for(let n=0,r=0;r<this.children.length;r++){let o=this.children[r],h=n+o.length;if(h>i)break;if(n>=e){t.push(o.dom.getBoundingClientRect().height);let e=o.dom.scrollWidth;e>s&&(this.minWidth=s=e,this.minWidthFrom=n,this.minWidthTo=h)}n=h+o.breakAfter}return t}measureTextSize(){for(let s of this.children)if(s instanceof ot){let t=s.measureTextSize();if(t)return t}let t,e,i=document.createElement("div");return i.className="cm-line",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(i);let s=w(i.firstChild)[0];t=i.getBoundingClientRect().height,e=s?s.width/27:7,i.remove()}),{lineHeight:t,charWidth:e}}clearSelectionDirty(){null!=this.selectionDirty&&(cancelAnimationFrame(this.selectionDirty),this.selectionDirty=null)}setSelectionDirty(){this.view.observer.clearSelection(),null==this.selectionDirty&&(this.selectionDirty=requestAnimationFrame(()=>this.updateSelection()))}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new L(this.children,t,e)}computeBlockGapDeco(){let t=this.view.viewState.viewport,e=[t],{head:i,anchor:s}=this.view.state.selection.primary;if(i<t.from||i>t.to){let{from:t,to:s}=this.view.viewState.lineAt(i,0);e.push(new _t(t,s))}if(!e.some(({from:t,to:e})=>s>=t&&s<=e)){let{from:t,to:i}=this.view.viewState.lineAt(s,0);e.push(new _t(t,i))}this.viewports=e.sort((t,e)=>t.from-e.from);let n=[];for(let r=0,o=0;;o++){let t=o==e.length?null:e[o],i=t?t.from-1:this.length;if(i>r){let t=this.view.viewState.lineAt(i,0).bottom-this.view.viewState.lineAt(r,0).top;n.push(_.replace({widget:new ee(t),block:!0,inclusive:!0}).range(r,i))}if(!t)break;r=t.to+1}return _.set(n)}updateDeco(){return this.decorations=[...this.view.state.facet(Wt),this.computeBlockGapDeco(),this.view.viewState.lineGapDeco,this.compositionDeco,...this.view.pluginField(Vt)]}scrollPosIntoView(t){let e=this.coordsAt(t);if(!e)return;let i=0,s=0,n=0,r=0;for(let o of this.view.pluginField(Et.scrollMargins))if(o){let{left:t,right:e,top:h,bottom:l}=o;null!=t&&(i=Math.max(i,t)),null!=e&&(s=Math.max(s,e)),null!=h&&(n=Math.max(n,h)),null!=l&&(r=Math.max(r,l))}A(this.dom,{left:e.left-i,top:e.top-n,right:e.right+s,bottom:e.bottom+r})}}const te=1e7;class ee extends K{toDOM(){let t=document.createElement("div");return this.updateDOM(t),t}updateDOM(t){if(this.value<te){for(;t.lastChild;)t.lastChild.remove();t.style.height=this.value+"px"}else{t.style.height="";for(let e=this.value;e>0;e-=te){t.appendChild(document.createElement("div")).style.height=Math.min(e,te)+"px"}}return!0}get estimatedHeight(){return this.value}}function ie(e,i){let s=g(e.root),n=s.focusNode&&ne(s.focusNode,s.focusOffset);if(!n)return _.none;let r,o,h=e.docView.nearest(n),l=n;if(h instanceof W)o=(r=h.posAtStart)+h.length,l=h.dom;else{if(!(h instanceof ot))return _.none;{for(;l.parentNode!=h.dom;)l=l.parentNode;let t=l.previousSibling;for(;t&&!E.get(t);)t=t.previousSibling;r=o=t?E.get(t).posAtEnd:h.posAtStart}}let a=t.ChangedRange.mapPos(r,1,i),c=Math.max(a,t.ChangedRange.mapPos(o,-1,i)),d=n.nodeValue,u=e.state.doc;if(c-a<d.length)if(u.slice(a,Math.min(u.length,a+d.length))==d)c=a+d.length;else{if(u.slice(Math.max(0,c-d.length),c)!=d)return _.none;a=c-d.length}else if(u.slice(a,c)!=d)return _.none;return _.set(_.replace({widget:new se({top:l,text:n})}).range(a,c))}class se extends K{eq(t){return this.value.top==t.top&&this.value.text==t.text}toDOM(){return this.value.top}ignoreEvent(){return!1}get customView(){return G}}function ne(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0)e=S(t=t.childNodes[e-1]);else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}class re{constructor(){this.changes=[]}compareRange(t,e){Z(t,e,this.changes)}comparePoint(t,e){Z(t,e,this.changes)}}function oe(t,e,s,n){let r=new re;return i.RangeSet.compare(t,e,s,n,r),r.changes}function he(t,e,i,s="character",n){let r=g(t.root),o=ue.get(t,e),h="forward"==i||"right"==i?1:-1;if(!r.modify||!o||o.nearViewportEnd(t)||!t.hasFocus||"word"==s||"line"==s&&(f.gecko||t.state.selection.ranges.length>1)){if("character"==s)return ae(e,h,o,t.state.doc);if("lineboundary"==s){if(o)return o.start+(h<0?0:o.line.length);let i=t.state.doc.lineAt(e);return h<0?i.start:i.end}if("line"==s){if(o&&!o.nearViewportEnd(t,h)){let i=t.coordsAtPos(e),s=de(t,e,i.left);for(let n=h<0?i.top:i.bottom,r=5;r<50;r+=10){let i=be(t,{x:s.column,y:n+r*h},h);if(i<0)break;if(i!=e)return s.pos=i,i}}return le(t.state.doc,t.state.tabSize,e,h)}if("word"==s)return ce(t,e,i);throw new RangeError("Invalid move granularity: "+s)}return t.observer.ignore(()=>{let h=o.prepareForQuery(t,e),l=t.docView.domAtPos(e),a=(!f.chrome||0==h.lines.length)&&v(l.node,l.offset,r.focusNode,r.focusOffset)&&!1;h.atWidget&&f.gecko&&"extend"==n&&(n="move"),"move"!=n||a&&r.isCollapsed?"extend"!=n||a||r.extend(l.node,l.offset):r.collapse(l.node,l.offset),r.modify(n,i,s),t.docView.setSelectionDirty();let c=t.docView.posFromDOM(r.focusNode,r.focusOffset);return o.undoQueryPreparation(t,h),c})}function le(t,e,i,n){let r=t.lineAt(i),o=0;for(const c=t.iterRange(r.start,i);!c.next().done;)o=(0,s.countColumn)(c.value,o,e);if(n<0&&0==r.start)return 0;if(n>0&&r.end==t.length)return r.end;let h=t.line(r.number+n),l=h.start,a=0;for(const c=t.iterRange(h.start,h.end);a>=o&&!c.next().done;){const{offset:t,leftOver:i}=(0,s.findColumn)(c.value,a,o,e);a=o-i,l+=t}return l}function ae(t,e,i,n){if(null==i)for(let r=t;;r+=e){if(e<0&&0==r||e>0&&r==n.length)return r;if(!(0,s.isExtendingChar)((e<0?n.slice(r-1,r):n.slice(r,r+1)).charCodeAt(0))){if(e<0)return r-1;if(r!=t)return r}}for(let{i:r,off:o}=i.line.childPos(t-i.start),{children:h}=i.line,l=t;;){if(o==(e<0||r==h.length?0:h[r].length)){if((r+=e)<0||r>=h.length)return Math.max(0,Math.min(n.length,l+(t==l?e:0)));o=e<0?h[r].length:0}let i=h[r];if(i instanceof z){if(!(0,s.isExtendingChar)(i.text.charCodeAt(o-(e<0?1:0)))){if(e<0)return l-1;if(l!=t)return l}o+=e,l+=e}else if(i.length>0)return l-o+(e<0?0:i.length)}}function ce(e,i,s){let{doc:n}=e.state;for(let r=i,o=0;;o++){let i=he(e,r,s,"character","move");if(i==r)return r;if(n.sliceLines(Math.min(i,r),Math.max(i,r)).length>1)return i;let h=t.SelectionRange.groupAt(e.state,i,i>r?-1:1),l=r<h.from&&r>h.to?r<h.head:h.from!=r&&(h.to==r||i<r);if(r=l?h.from:h.to,o>0||/\S/.test(n.slice(h.from,h.to)))return r;i=Math.max(0,Math.min(n.length,r+(l?-1:1)))}}function de(t,e,i){for(let n of t.inputState.goalColumns)if(n.pos==e)return n;let s={pos:0,column:i};return t.inputState.goalColumns.push(s),s}class ue{constructor(t,e,i){this.line=t,this.start=e,this.index=i}static get(t,e){for(let i=0,s=0;;i++){let n=t.docView.children[i],r=s+n.length;if(r>=e){if(n instanceof ot)return new ue(n,s,i);if(n.length)return null}s=r+1}}nearViewportEnd(t,e=0){for(let{from:i,to:s}of t.docView.viewports)if(i>0&&i==this.start&&e<=0||s<t.state.doc.length&&s==this.start+this.line.length&&e>=0)return!0;return!1}prepareForQuery(t,e){let i=[],s=!1;function n(t){return t instanceof z||(s=!0),!(t.length>0)&&(t.dom.remove(),i.indexOf(t.parent)<0&&i.push(t.parent),!0)}let{i:r,off:o}=this.line.childPos(e-this.start);if(0==o){for(let t=r;t<this.line.children.length&&n(this.line.children[t]);t++);for(let t=r;t>0&&n(this.line.children[t-1]);t--);}function h(t,e=-1){if(0!=t.children.length)for(let s=0,n=0;s<=t.children.length;s++){let r=s==t.children.length?null:t.children[s];r&&r instanceof z||n==e||0!=s&&t.children[s-1]instanceof z||(t.dom.insertBefore(document.createTextNode("​"),r?r.dom:null),i.indexOf(t)<0&&i.push(t)),r&&(n+=r.length)}}return this.index>0&&h(this.line.parent.children[this.index-1]),h(this.line,e-this.start),this.index<this.line.parent.children.length-1&&h(this.line.parent.children[this.index+1]),{lines:i,atWidget:s}}undoQueryPreparation(t,e){for(let i of e.lines)i.dirty=2,i.sync(),i.dirty=0}}function fe(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function ge(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function pe(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function me(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function we(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function ve(t,e,i){let s,n,r,o,h,l,a,c;for(let u=t.firstChild;u;u=u.nextSibling){let t=w(u);for(let d=0;d<t.length;d++){let f=t[d];n&&pe(n,f)&&(f=me(we(f,n.bottom),n.top));let g=fe(e,f),p=ge(i,f);if(0==g&&0==p)return 3==u.nodeType?ye(u,e,i):ve(u,e,i);(!s||o>p||o==p&&r>g)&&(s=u,n=f,r=g,o=p),0==g?i>f.bottom&&(!a||a.bottom<f.bottom)?(h=u,a=f):i<f.top&&(!c||c.top>f.top)&&(l=u,c=f):a&&pe(a,f)?a=we(a,f.bottom):c&&pe(c,f)&&(c=me(c,f.top))}}if(a&&a.bottom>=i?(s=h,n=a):c&&c.top<=i&&(s=l,n=c),!s)return{node:t,offset:0};let d=Math.max(n.left,Math.min(n.right,e));return 3==s.nodeType?ye(s,d,i):(r||"true"!=s.contentEditable||ve(s,d,i),{node:t,offset:Array.prototype.indexOf.call(t.childNodes,s)+(e>=(n.left+n.right)/2?1:0)})}function ye(t,e,i){let s=t.nodeValue.length,n=document.createRange();for(let r=0;r<s;r++){n.setEnd(t,r+1),n.setStart(t,r);let s=n.getClientRects();for(let o=0;o<s.length;o++){let h=s[o];if(h.top!=h.bottom&&(h.left-1<=e&&h.right+1>=e&&h.top-1<=i&&h.bottom+1>=i)){let i=e>=(h.left+h.right)/2,s=i;if(f.chrome||f.gecko){n.setEnd(t,r),n.getBoundingClientRect().left==h.right&&(s=!i)}return{node:t,offset:r+(s?1:0)}}}}return{node:t,offset:0}}function be(t,{x:e,y:i},s=-1){let n,r=t.contentDOM.getBoundingClientRect(),o=t.defaultLineHeight/2;for(let u=!1;;){if((n=t.blockAtHeight(i,r.top)).top>i||n.bottom<i){if(s=n.top>i?-1:1,i=Math.min(n.bottom-o,Math.max(n.top+o,i)),u)return-1;u=!0}if(n.type==j.Text)break;i=s>0?n.bottom+o:n.top-o}let h=n.from;if(h<t.viewport.from)return 0==t.viewport.from?0:-1;if(h>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:-1;e=Math.max(r.left+1,Math.min(r.right-1,e));let l,a=t.root,c=a.elementFromPoint(e,i),d=-1;if(c&&t.contentDOM.contains(c)&&!(t.docView.nearest(c)instanceof I))if(a.caretPositionFromPoint){let t=a.caretPositionFromPoint(e,i);t&&({offsetNode:l,offset:d}=t)}else if(a.caretRangeFromPoint){let t=a.caretRangeFromPoint(e,i);t&&({startContainer:l,startOffset:d}=t)}if(!l){let{line:s}=ue.get(t,h);({node:l,offset:d}=ve(s.dom,e,i))}return t.docView.posFromDOM(l,d)}class Se{constructor(t){this.lastKeyCode=0,this.lastKeyTime=0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.registeredEvents=[],this.customHandlers=[],this.composing=!1,this.goalColumns=[],this.mouseSelection=null;for(let e in ke){let i=ke[e];t.contentDOM.addEventListener(e,s=>{Oe(t,s)&&(this.runCustomHandlers(e,t,s)?s.preventDefault():i(t,s))}),this.registeredEvents.push(e)}t.contentDOM.addEventListener("keydown",e=>{t.inputState.lastKeyCode=e.keyCode,t.inputState.lastKeyTime=Date.now()}),t.root.activeElement==t.contentDOM&&t.dom.classList.add("cm-focused"),this.notifiedFocused=t.hasFocus,this.ensureHandlers(t)}setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}ensureHandlers(t){let e=t.state.facet(kt);if(e!=this.customHandlers){this.customHandlers=e;for(let i of e)for(let e in i)this.registeredEvents.indexOf(e)<0&&(this.registeredEvents.push(e),("scroll"!=e?t.contentDOM:t.scrollDOM).addEventListener(e,i=>{Oe(t,i)&&this.runCustomHandlers(e,t,i)&&i.preventDefault()}))}}runCustomHandlers(t,e,i){for(let n of this.customHandlers){let r=n[t];if(r)try{if(r(e,i)||i.defaultPrevented)return!0}catch(s){console.error(s)}}return!1}startMouseSelection(t,e,i){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=new xe(this,t,e,i)}update(t){this.mouseSelection&&this.mouseSelection.map(t.changes),this.lastKeyCode=this.lastSelectionTime=0}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}class xe{constructor(e,i,s,n){this.inputState=e,this.view=i,this.update=n;let r=i.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=s.shiftKey,this.multiple=i.state.facet(t.EditorState.allowMultipleSelections)&&Me(i,s),this.dragMove=Ae(i,s),this.startSelection=i.state.selection;let{pos:o,bias:h}=this.queryPos(s);this.startPos=this.curPos=o,this.startBias=this.curBias=h,this.dragging=!!De(i,this.startPos,s)&&null,!1===this.dragging&&(s.preventDefault(),this.select())}queryPos(t){let e=this.view.posAtCoords({x:t.clientX,y:t.clientY}),i=e<0?null:this.view.coordsAtPos(e);return{pos:e,bias:i?i.top>t.clientY?-1:i.bottom<t.clientY?1:i.left>t.clientX?-1:1:1}}move(t){if(0==t.buttons)return this.destroy();if(!1!==this.dragging)return;let{pos:e,bias:i}=this.queryPos(t);e==this.curPos&&i==this.curBias||(this.curPos=e,this.curBias=i,this.select())}up(t){null==this.dragging&&this.select(),this.destroy()}destroy(){let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.inputState.mouseSelection=null}select(){let e=this.update(this.view,this.startSelection,this.startPos,this.startBias,this.curPos,this.curBias,this.extend,this.multiple);e.eq(this.view.state.selection)||this.view.dispatch(this.view.state.t().setSelection(e).annotate(t.Transaction.userEvent,"pointer").scrollIntoView())}map(t){t.length&&(this.startSelection=this.startSelection.map(t),this.startPos=t.mapPos(this.startPos),this.curPos=t.mapPos(this.curPos)),this.dragging&&(this.dragging=this.dragging.map(t))}}function Me(t,e){let i=t.state.facet(Ct);return i.length?i[0](e):f.mac?e.metaKey:e.ctrlKey}function Ae(t,e){let i=t.state.facet(Tt);return i.length?i[0](e):f.mac?!e.altKey:!e.ctrlKey}function De(t,e,i){let{primary:s}=t.state.selection;if(s.empty)return!1;if(e<s.from||e>s.to)return!1;if(e>s.from&&e<s.to)return!0;let n=g(t.root);if(0==n.rangeCount)return!0;let r=n.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let t=r[o];if(t.left<=i.clientX&&t.right>=i.clientX&&t.top<=i.clientY&&t.bottom>=i.clientY)return!0}return!1}function Oe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i,s=e.target;s!=t.contentDOM;s=s.parentNode)if(!s||11==s.nodeType||(i=E.get(s))&&i.ignoreEvent(e))return!1;return!0}const ke=Object.create(null),Ce=f.ie&&f.ie_version<15||f.ios&&f.webkit_version<604;function Te(t){let e=t.dom.ownerDocument,i=e.body.appendChild(e.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{t.focus(),e.body.removeChild(i),Ee(t,i.value)},50)}function Ee(e,i){e.dispatch(e.state.t().replaceSelection(i).annotate(t.Transaction.userEvent,"paste").scrollIntoView())}function Re(t){let e=(t.ctrlKey?1:0)|(t.metaKey?8:0)|(t.altKey?2:0)|(t.shiftKey?4:0),i=t.keyCode,s=f.mac&&1==e;return 8==i||s&&72==i||46==i||s&&68==i||27==i||e==(f.mac?8:1)&&(66==i||73==i||89==i||90==i)}function Pe(e,i,s,n){if(1==n)return new t.SelectionRange(i);if(2==n)return t.SelectionRange.groupAt(e.state,i,s);{let s=ue.get(e,i);if(s)return new t.SelectionRange(s.start+s.line.length,s.start);let{start:n,end:r}=e.state.doc.lineAt(i);return new t.SelectionRange(n,r)}}function Le(e){return(i,s,n,r,o,h,l,a)=>{let c=Pe(i,o,h,e);if(n!=o&&!l){let s=Pe(i,n,r,e),o=Math.min(s.from,c.from),h=Math.max(s.to,c.to);c=o<c.from?new t.SelectionRange(o,h):new t.SelectionRange(h,o)}return l?s.replaceRange(s.primary.extend(c.from,c.to)):a?s.addRange(c):t.EditorSelection.create([c])}}function Ve(t,e){let i=t.dom.ownerDocument,s=i.body.appendChild(i.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.value=e,s.focus(),s.selectionEnd=e.length,s.selectionStart=0,setTimeout(()=>{i.body.removeChild(s),t.focus()},50)}function Be(t){t.docView.compositionDeco.size&&t.update([])}ke.keydown=((t,e)=>{Re(e)&&e.preventDefault(),t.inputState.setSelectionOrigin("keyboard")}),ke.touchdown=ke.touchmove=((t,e)=>{t.inputState.setSelectionOrigin("pointer")}),ke.mousedown=((t,e)=>{0==e.button&&t.startMouseSelection(e,Le(e.detail))}),ke.dragstart=((t,e)=>{let{doc:i,selection:{primary:s}}=t.state,{mouseSelection:n}=t.inputState;n&&(n.dragging=s),e.dataTransfer&&(e.dataTransfer.setData("Text",i.slice(s.from,s.to)),e.dataTransfer.effectAllowed="copyMove")}),ke.drop=((e,i)=>{if(!i.dataTransfer)return;let s=e.posAtCoords({x:i.clientX,y:i.clientY}),n=i.dataTransfer.getData("Text");if(s<0||!n)return;i.preventDefault();let r=e.state.t(),{mouseSelection:o}=e.inputState;o&&o.dragging&&o.dragMove&&(r.replace(o.dragging.from,o.dragging.to,""),s=r.changes.mapPos(s));let h=new t.Change(s,s,e.state.splitLines(n));r.change(h).setSelection(t.EditorSelection.single(s,s+h.length)).annotate(t.Transaction.userEvent,"drop"),e.focus(),e.dispatch(r)}),ke.paste=((t,e)=>{t.observer.flush();let i=Ce?null:e.clipboardData,s=i&&i.getData("text/plain");s?(Ee(t,s),e.preventDefault()):Te(t)}),ke.copy=ke.cut=((e,i)=>{let s=e.state.selection.primary;if(s.empty)return;let n=Ce?null:i.clipboardData,r=e.state.joinLines(e.state.doc.sliceLines(s.from,s.to));n?(i.preventDefault(),n.clearData(),n.setData("text/plain",r)):Ve(e,r),"cut"==i.type&&e.dispatch(e.state.t().replaceSelection([""]).scrollIntoView().annotate(t.Transaction.userEvent,"cut"))}),ke.focus=ke.blur=(t=>{setTimeout(()=>{t.hasFocus!=t.inputState.notifiedFocused&&t.update([])},10)}),ke.beforeprint=(t=>{t.viewState.printing=!0,t.requestMeasure(),setTimeout(()=>{t.viewState.printing=!1,t.requestMeasure()},2e3)}),ke.compositionstart=ke.compositionupdate=(t=>{t.inputState.composing||(t.docView.compositionDeco.size&&(t.observer.flush(),Be(t)),t.inputState.composing=!0)}),ke.compositionend=(t=>{t.inputState.composing=!1,setTimeout(()=>{t.inputState.composing||Be(t)},50)});const He={childList:!0,characterData:!0,subtree:!0,characterDataOldValue:!0},Ne=f.ie&&f.ie_version<=11;class We{constructor(t,e,i){this.view=t,this.onChange=e,this.onScrollChanged=i,this.active=!1,this.ignoreSelection=new D,this.charDataQueue=[],this.charDataTimeout=null,this.scrollTargets=[],this.intersection=null,this.intersecting=!1,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(t=>this.flush(t)),Ne&&(this.onCharData=(t=>{this.charDataQueue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),null==this.charDataTimeout&&(this.charDataTimeout=setTimeout(()=>this.flush(),20))})),this.onSelectionChange=(()=>{this.view.root.activeElement==this.dom&&this.flush()}),this.start(),this.onScroll=this.onScroll.bind(this),window.addEventListener("scroll",this.onScroll),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.onScroll())},{}),this.intersection.observe(this.dom)),this.listenForScroll()}onScroll(){this.intersecting&&(this.flush(),this.onScrollChanged())}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let i=this.dom;i;)if(1==i.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==i?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(i),i=i.parentNode;else{if(11!=i.nodeType)break;i=i.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,He),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange),Ne&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),Ne&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}takeCharRecords(){let t=this.charDataQueue;return t.length&&(this.charDataQueue=[],clearTimeout(this.charDataTimeout),this.charDataTimeout=null),t}clearSelection(){this.ignoreSelection.set(g(this.view.root))}clear(){this.observer.takeRecords(),this.takeCharRecords(),this.clearSelection()}flush(t=this.observer.takeRecords()){this.charDataQueue.length&&(t=t.concat(this.takeCharRecords()));let e=g(this.view.root),i=!this.ignoreSelection.eq(e)&&m(this.dom,e);if(0==t.length&&!i)return;let s=-1,n=-1,r=!1;for(let o of t){let t=this.readMutation(o);t&&(t.typeOver&&(r=!0),-1==s?({from:s,to:n}=t):(s=Math.min(t.from,s),n=Math.max(t.to,n)))}(s>-1||i)&&this.onChange(s,n,r)||(this.view.docView.dirty&&(this.ignore(()=>this.view.docView.sync()),this.view.docView.dirty=0),this.view.docView.updateSelection()),this.clearSelection()}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty(),"childList"==t.type){let i=Fe(e,t.previousSibling||t.target.previousSibling,-1),s=Fe(e,t.nextSibling||t.target.nextSibling,1);return{from:i?e.posAfter(i):e.posAtStart,to:s?e.posBefore(s):e.posAtEnd,typeOver:!1}}return{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}destroy(){this.stop(),this.intersection&&this.intersection.disconnect();for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),clearTimeout(this.parentCheck)}}function Fe(t,e,i){for(;e;){let s=E.get(e);if(s&&s.parent==t)return s;let n=e.parentNode;e=n!=t.dom?n:i>0?e.nextSibling:e.previousSibling}return null}const ze="﷚";function qe(e,i,s,n){let r,o,h,l=e.state.selection.primary;if(i>-1&&(h=e.docView.domBoundsAround(i,s,0))){let{from:i,to:s}=h,n=e.docView.impreciseHead||e.docView.impreciseAnchor?[]:_e(e.contentDOM,e.root),a=new Ge(n);a.readRange(h.startDOM,h.endDOM),o=Qe(n,i);let c=l.from,d=null;8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100&&(c=l.to,d="end");let u=Ie(e.state.doc.slice(i,s,ze),a.text,c-i,d);u&&(r=new t.Change(i+u.from,i+u.toA,a.text.slice(u.from,u.toB).split(ze)))}else if(e.hasFocus){let i=g(e.root),{impreciseHead:s,impreciseAnchor:n}=e.docView,r=s&&s.node==i.focusNode&&s.offset==i.focusOffset?e.state.selection.primary.head:e.docView.posFromDOM(i.focusNode,i.focusOffset),h=n&&n.node==i.anchorNode&&n.offset==i.anchorOffset?e.state.selection.primary.anchor:p(i)?r:e.docView.posFromDOM(i.anchorNode,i.anchorOffset);r==l.head&&h==l.anchor||(o=t.EditorSelection.single(h,r))}if(!r&&!o)return!1;if(!r&&n&&!l.empty&&o&&o.primary.empty&&(r=new t.Change(l.from,l.to,e.state.doc.sliceLines(l.from,l.to))),r){let i=e.state;if(f.android&&(r.from==l.from&&r.to==l.to&&1==r.length&&2==r.text.length&&$e(e,"Enter",10)||r.from==l.from-1&&r.to==l.to&&0==r.length&&$e(e,"Backspace",8)||r.from==l.from&&r.to==l.to+1&&0==r.length&&$e(e,"Delete",46)))return e.state!=i;let s=i.t();if(r.from>=l.from&&r.to<=l.to&&r.to-r.from>=(l.to-l.from)/3){let t=l.from<r.from?i.doc.slice(l.from,r.from,ze):"",e=l.to>r.to?i.doc.slice(r.to,l.to,ze):"";s.replaceSelection((t+r.text.join(ze)+e).split(ze))}else s.change(r),o&&!s.selection.primary.eq(o.primary)&&s.setSelection(s.selection.replaceRange(o.primary));return e.dispatch(s.scrollIntoView().annotate(t.Transaction.userEvent,"input")),!0}if(o&&!o.primary.eq(l)){let i=e.state.t().setSelection(o);return e.inputState.lastSelectionTime>Date.now()-50&&("keyboard"==e.inputState.lastSelectionOrigin?i.scrollIntoView():i.annotate(t.Transaction.userEvent,e.inputState.lastSelectionOrigin)),e.dispatch(i),!0}return!1}function Ie(t,e,i,s){let n=Math.min(t.length,e.length),r=0;for(;r<n&&t.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==n&&t.length==e.length)return null;let o=t.length,h=e.length;for(;o>0&&h>0&&t.charCodeAt(o-1)==e.charCodeAt(h-1);)o--,h--;if("end"==s){i-=o+Math.max(0,r-Math.min(o,h))-r}if(o<r&&t.length<e.length){h=(r-=i<=r&&i>=o?r-i:0)+(h-o),o=r}else if(h<r){o=(r-=i<=r&&i>=h?r-i:0)+(o-h),h=r}return{from:r,toA:o,toB:h}}class Ge{constructor(t){this.points=t,this.text=""}readRange(t,e){if(!t)return;let i=t.parentNode;for(let s=t;;){this.findPointBefore(i,s),this.readNode(s);let t=s.nextSibling;if(t==e)break;let n=E.get(s),r=E.get(t);((n?n.breakAfter:Ke(s))||(r?r.breakAfter:Ke(t))&&("BR"!=s.nodeName||s.cmIgnore))&&(this.text+=ze),s=t}this.findPointBefore(i,e)}readNode(t){if(t.cmIgnore)return;let e,i=E.get(t),s=i&&i.overrideDOMText;null!=s?e=s.join(ze):3==t.nodeType?e=t.nodeValue:"BR"==t.nodeName?e=t.nextSibling?ze:"":1==t.nodeType&&this.readRange(t.firstChild,null),null!=e&&(this.findPointIn(t,e.length),this.text+=e)}findPointBefore(t,e){for(let i of this.points)i.node==t&&t.childNodes[i.offset]==e&&(i.pos=this.text.length)}findPointIn(t,e){for(let i of this.points)i.node==t&&(i.pos=this.text.length+Math.min(i.offset,e))}}function Ke(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class je{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}function _e(t,e){let i=[];if(e.activeElement!=t)return i;let{anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o}=g(e);return s&&(i.push(new je(s,n)),r==s&&o==n||i.push(new je(r,o))),i}function Qe(e,i){if(0==e.length)return null;let s=e[0].pos,n=2==e.length?e[1].pos:s;return s>-1&&n>-1?t.EditorSelection.single(s+i,n+i):null}function $e(t,e,i){let s={key:e,code:e,keyCode:i,which:i,cancelable:!0},n=new KeyboardEvent("keydown",s);t.contentDOM.dispatchEvent(n);let r=new KeyboardEvent("keyup",s);return t.contentDOM.dispatchEvent(r),n.defaultPrevented||r.defaultPrevented}class Xe{constructor(e={}){this.plugins=[],this.editorAttrs={},this.contentAttrs={},this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.className=st("scroller"),this.scrollDOM.appendChild(this.contentDOM),this.dom=document.createElement("div"),this.dom.appendChild(this.scrollDOM),this.dispatch=e.dispatch||(t=>this.update([t])),this.root=e.root||document,this.viewState=new jt(e.state||t.EditorState.create()),this.plugins=this.state.facet(Pt).map(t=>Bt.create(t,this)),this.observer=new We(this,(t,e,i)=>qe(this,t,e,i),()=>this.measure()),this.docView=new Zt(this),this.inputState=new Se(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,Je(),this.requestMeasure()}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");this.updateState=2;let i=this.state;for(let t of e){if(t.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the current state.");i=t.apply()}let s=new qt(this,i,e);(i.doc!=this.state.doc||e.some(e=>e.selectionSet&&!e.annotation(t.Transaction.preserveGoalColumn)))&&(this.inputState.goalColumns.length=0);let n=e.some(t=>t.scrolledIntoView)?i.selection.primary.head:-1;this.viewState.update(s,n),s.empty||this.updatePlugins(s);let r=this.docView.update(s);this.inputState.ensureHandlers(this),this.state.facet(Ft)!=this.styleModules&&this.mountStyles(),this.updateAttrs(),this.updateState=0,(r||n>-1)&&this.requestMeasure()}updatePlugins(t){let e=t.prevState.facet(Pt),i=t.state.facet(Pt);if(e!=i){let s=[],n=[];for(let r of i){let i=e.indexOf(r);if(i<0)s.push(Bt.create(r,this));else{let e=this.plugins[i].update(t);n.push(e),s.push(e)}}for(let t of this.plugins)t.destroy&&n.indexOf(t)<0&&t.destroy();this.plugins=s}else for(let s=0;s<this.plugins.length;s++)this.plugins[s]=this.plugins[s].update(t)}measure(){this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=1;for(let t=0;;t++){this.updateState=1;let e=this.viewState.measure(this.docView,t>0),i=this.measureRequests;if(!e&&!i.length)break;if(this.measureRequests=[],t>5){console.warn("Viewport failed to stabilize");break}let s=i.map(t=>t.read(this)),n=new qt(this,this.state);n.flags|=e,this.updateState=2,this.updatePlugins(n),e&&this.docView.update(n);for(let t=0;t<i.length;t++)i[t].write(s[t],this);if(!(4&e)&&0==this.measureRequests.length)break}this.updateState=0,this.measureScheduled=-1}updateAttrs(){let t=V(this.state.facet(Ht),{class:st("wrap")+(this.hasFocus?" cm-focused ":" ")+et+" "+this.state.facet(tt).join(" ")});H(this.dom,this.editorAttrs,t),this.editorAttrs=t;let e=V(this.state.facet(Nt),{spellcheck:"false",contenteditable:"true",class:st("content"),style:`${f.tabSize}: ${this.state.tabSize}`});H(this.contentDOM,this.contentAttrs,e),this.contentAttrs=e}mountStyles(){this.styleModules=this.state.facet(Ft),e.StyleModule.mount(this.root,this.styleModules.concat(nt).reverse())}phrase(t){for(let e of this.state.facet(zt))if(Object.prototype.hasOwnProperty.call(e,t))return e[t];return t}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure()}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),t){if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}pluginField(t){let e=[];for(let i of this.plugins)i.takeField(t,e);return e}plugin(t){for(let e of this.plugins)if(e.spec==t)return e.value;return null}blockAtHeight(t,e){return this.readMeasured(),this.viewState.blockAtHeight(t,Ye(e,this.contentDOM))}lineAtHeight(t,e){return this.readMeasured(),this.viewState.lineAtHeight(t,Ye(e,this.contentDOM))}lineAt(t,e){return this.readMeasured(),this.viewState.lineAt(t,Ye(e,this.contentDOM))}viewportLines(t,e){let{from:i,to:s}=this.viewport;this.viewState.forEachLine(i,s,t,Ye(e,this.contentDOM))}get contentHeight(){return this.viewState.heightMap.height+this.viewState.paddingTop+this.viewState.paddingBottom}movePos(t,e,i="character",s="move"){return he(this,t,e,i,s)}posAtCoords(t){return this.readMeasured(),be(this,t)}coordsAtPos(t){return this.readMeasured(),this.docView.coordsAt(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.heightOracle.direction}startMouseSelection(t,e){this.focus(),this.inputState.startMouseSelection(this,t,e)}get hasFocus(){return this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{k(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let t of this.plugins)t.destroy();this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled)}static theme(t){let i=e.StyleModule.newName();return[tt.of(i),Ft.of(it(i,t))]}static baseTheme(e){return t.Precedence.Fallback.set(Ft.of(it(et,e)))}}function Ye(t,e){return null==t?e.getBoundingClientRect().top:t}exports.EditorView=Xe,Xe.plugin=Pt,Xe.styleModule=Ft,Xe.domEventHandlers=kt,Xe.dragMovesSelection=Tt,Xe.clickAddsSelectionRange=Ct,Xe.decorations=Wt,Xe.phrases=zt,Xe.contentAttributes=Nt,Xe.editorAttributes=Ht;let Ue=-1;function Je(){window.addEventListener("resize",()=>{-1==Ue&&(Ue=setTimeout(Ze,50))})}function Ze(){Ue=-1;let t=document.querySelectorAll(".cm-content");for(let e=0;e<t.length;e++){let i=E.get(t[e]);i&&i.editorView.requestMeasure()}}const ti={HeightMap:mt,HeightOracle:ut,MeasuredHeights:ft,QueryType:pt};exports.__test=ti;
},{"../../state":"R3Cy","style-mod":"h8XP","../../rangeset":"LKY5","../../text":"Oz7s"}],"L5yp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.styleTags=exports.highlighter=exports.defaultTags=exports.defaultHighlighter=exports.TagSystem=void 0;var e=require("lezer-tree"),t=require("style-mod"),r=require("../../view"),s=require("../../state"),i=require("../../rangeset");const o=1;class a{constructor(t){this.typeNames=[""],this.typeIDs=Object.create(null),this.prop=new e.NodeProp,this.flags=t.flags,this.types=t.types,this.flagMask=Math.pow(2,this.flags.length)-1,this.typeShift=this.flags.length+1;let r=t.subtypes||0,s=[void 0];this.typeIDs[""]=0;let i=1;for(let e of t.types){let t=/^([\w\-]+)(?:=([\w-]+))?$/.exec(e);if(!t)throw new RangeError("Invalid type name "+e);let o=i++;this.typeNames[o]=t[1],this.typeIDs[t[1]]=o,s[o]=t[2];for(let e=0;e<r;e++){let r=i++,o=t[1]+"#"+(e+1);this.typeNames[r]=o,this.typeIDs[o]=r,s[r]=t[1]}}if(this.parents=s.map(e=>{if(null==e)return 0;let t=this.typeIDs[e];if(null==t)throw new RangeError(`Unknown parent type '${e}' specified`);return t}),this.flags.length>29||this.typeNames.length>Math.pow(2,29-this.flags.length))throw new RangeError("Too many style tag flags to fit in a 30-bit integer")}get(e){let t=43==e.charCodeAt(0)?1:0;for(let r of(t?e.slice(1):e).split(" "))if(r){let s=this.flags.indexOf(r);if(s>-1)t+=1<<s+1;else{let s=this.typeIDs[r];if(null==s)throw new RangeError(`Unknown tag type '${r}'`);if(t>>this.typeShift)throw new RangeError(`Multiple tag types specified in '${e}'`);t+=s<<this.typeShift}}return t}add(t){let r=e.NodeType.match(t);return this.prop.add(e=>{let t=r(e);return null==t?void 0:this.get(t)})}highlighter(e){let t=new c(this,e);return[r.ViewPlugin.define(e=>new g(e,this.prop,t)).decorations(),r.EditorView.styleModule.of(t.module)]}specificity(e){let t=e&this.flagMask,r=0;for(let s=1;s<=this.flags.length;s++)t&1<<s&&r++;for(let s=e>>this.flags.length+1;s;s=this.parents[s])r+=1e3;return r}}exports.TagSystem=a;const l=new a({flags:["invalid","meta","link","strong","emphasis","monospace","changed","inserted","deleted","definition","constant","control"],subtypes:7,types:["comment","lineComment=comment","blockComment=comment","name","variableName=name","typeName=name","propertyName=name","className=name","labelName=name","namespace=name","literal","string=literal","character=string","number=literal","integer=number","float=number","regexp=literal","escape=literal","color=literal","content","heading=content","list=content","quote=content","keyword","self=keyword","null=keyword","atom=keyword","unit=keyword","modifier=keyword","operatorKeyword=keyword","operator","derefOperator=operator","arithmeticOperator=operator","logicOperator=operator","bitwiseOperator=operator","compareOperator=operator","updateOperator=operator","typeOperator=operator","punctuation","separator=punctuation","bracket=punctuation","angleBracket=bracket","squareBracket=bracket","paren=bracket","brace=bracket"]});exports.defaultTags=l;const n=e=>l.add(e);exports.styleTags=n;const h=e=>l.highlighter(e);exports.highlighter=h;class p{constructor(e,t,r,s){this.type=e,this.flags=t,this.specificity=r,this.cls=s}}class c{constructor(e,r){this.tags=e,this.cache=Object.create(null);let s=Object.create(null),i=0,o=[];for(let t in r){let a=e.get(t),l="c"+i++;s[l]=r[t],o.push(new p(a>>e.typeShift,a&e.flagMask,e.specificity(a),l))}this.rules=o.sort((e,t)=>t.specificity-e.specificity),this.module=new t.StyleModule(s)}match(e){let t=this.cache[e];if(null!=t)return t;let r="",s=e>>this.tags.typeShift,i=e&this.tags.flagMask;for(;;){for(let e of this.rules)if(e.type==s&&(e.flags&i)==e.flags&&(r&&(r+=" "),r+=this.module[e.cls],i&=~e.flags,s))break;if(!s)break;s=this.tags.parents[s]}return this.cache[e]=r}}class g{constructor(e,t,r){this.prop=t,this.styling=r,this.tree=e.state.tree,this.decorations=this.buildDeco(e.visibleRanges,this.tree)}update(e){let t=e.state.facet(s.EditorState.syntax);t.length?t[0].parsePos(e.state)<e.view.viewport.to?this.decorations=this.decorations.map(e.changes):(this.tree!=t[0].getTree(e.state)||e.viewportChanged)&&(this.tree=t[0].getTree(e.state),this.decorations=this.buildDeco(e.view.visibleRanges,this.tree)):this.decorations=r.Decoration.none}buildDeco(e,t){let s=new i.RangeSetBuilder,a=0;function l(e,t){e>a&&t&&s.add(a,e,r.Decoration.mark({class:t})),a=e}for(let{from:r,to:i}of e){a=r;let e="",s=[],n=[];t.iterate({from:r,to:i,enter:(t,r)=>{let i=n.length?n[n.length-1]:"",a=i,h=t.prop(this.prop);if(null!=h){let e=this.styling.match(h);e&&(a&&(a+=" "),a+=e),h&o&&(i=a)}s.push(a),i&&n.push(i),a!=e&&(l(r,e),e=a)},leave:(t,r,o)=>{s.pop(),n.pop();let a=s.length?s[s.length-1]:"";a!=e&&(l(Math.min(i,o),e),e=a)}})}return s.finish()}}const f=h({invalid:{color:"#f00"},keyword:{color:"#708"},atom:{color:"#219"},number:{color:"#164"},string:{color:"#a11"},character:{color:"#a11"},regexp:{color:"#e40"},escape:{color:"#e40"},"variableName definition":{color:"#00f"},typeName:{color:"#085"},"propertyName definition":{color:"#00c"},comment:{color:"#940"},meta:{color:"#555"}});exports.defaultHighlighter=f;
},{"lezer-tree":"rdIx","style-mod":"h8XP","../../view":"NHOh","../../state":"R3Cy","../../rangeset":"LKY5"}],"v8f1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gutter=n,exports.gutters=h,exports.lineNumbers=k,exports.lineNumberMarkers=exports.GutterMarker=void 0;var e=require("../../view"),t=require("../../rangeset"),s=require("../../state");class i extends t.RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}toDOM(e){return null}at(e){return new t.Range(e,e,this)}}exports.GutterMarker=i,i.prototype.elementClass="",i.prototype.startMapMode=i.prototype.endMapMode=s.MapMode.TrackBefore;const r={style:"",renderEmptyElements:!1,elementStyle:"",initialMarkers:()=>t.RangeSet.empty,updateMarkers:e=>e,lineMarker:()=>null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},o=s.Facet.define();function n(e){return[h(),o.of((0,s.fillConfig)(e,r))]}const l=e.EditorView.baseTheme({gutters:{background:"#f5f5f5",borderRight:"1px solid silver",color:"#999",display:"flex",height:"100%",boxSizing:"border-box",left:0},gutter:{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",height:"100%",overflow:"hidden"},gutterElement:{boxSizing:"border-box"},"gutterElement.lineNumber":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"}}),a=s.Facet.define({combine:e=>e.some(e=>e)});function h(e){let t=[d,l];return e&&!1===e.fixed&&t.push(a.of(!0)),t}const d=e.ViewPlugin.fromClass(class{constructor(t){this.view=t,this.dom=document.createElement("div"),this.dom.className=(0,e.themeClass)("gutters"),this.dom.setAttribute("aria-hidden","true"),this.gutters=t.state.facet(o).map(e=>new m(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(a),this.fixed&&(this.dom.style.position="sticky"),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(!this.updateGutters(t))return;let s=this.gutters.map(e=>new u(e,this.view.viewport));this.view.viewportLines(t=>{let i;if(i=Array.isArray(t.type)?t.type.find(t=>t.type==e.BlockType.Text):t.type==e.BlockType.Text?t:void 0)for(let e of s)e.line(this.view,i)},0);for(let e of s)e.finish();this.dom.style.minHeight=this.view.contentHeight+"px",t.state.facet(a)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"")}updateGutters(e){let t=e.prevState.facet(o),s=e.state.facet(o),i=e.docChanged||e.heightChanged;if(t==s)for(let r of this.gutters)r.update(e)&&(i=!0);else{i=!0;let r=[];for(let i of s){let s=t.indexOf(i);s<0?r.push(new m(this.view,i)):(this.gutters[s].update(e),r.push(this.gutters[s]))}for(let e of this.gutters)e.dom.remove();for(let e of r)this.dom.appendChild(e.dom);this.gutters=r}return i}}).provide(e.PluginField.scrollMargins,e=>0!=e.gutters.length&&e.fixed?"ltr"==e.view.textDirection?{left:e.dom.offsetWidth}:{right:e.dom.offsetWidth}:null);class u{constructor(e,t){this.gutter=e,this.localMarkers=[],this.i=0,this.height=0,this.cursor=e.markers.iter(t.from)}line(e,t){for(this.localMarkers.length&&(this.localMarkers=[]);this.cursor.value&&this.cursor.from<=t.from;)this.cursor.from==t.from&&this.localMarkers.push(this.cursor.value),this.cursor.next();let s=this.gutter.config.lineMarker(e,t,this.localMarkers);s&&this.localMarkers.unshift(s);let i=this.gutter;if(0==this.localMarkers.length&&!i.config.renderEmptyElements)return;let r=t.top-this.height;if(this.i==i.elements.length){let s=new c(e,t.height,r,this.localMarkers,i.elementClass);i.elements.push(s),i.dom.appendChild(s.dom)}else{let s=this.localMarkers,o=i.elements[this.i];p(s,o.markers)&&(s=o.markers,this.localMarkers.length=0),o.update(e,t.height,r,s,i.elementClass)}this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;)e.dom.removeChild(e.elements.pop().dom)}}class m{constructor(t,s){this.view=t,this.config=s,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className=(0,e.themeClass)("gutter"+(this.config.style?"."+this.config.style:"")),this.elementClass=(0,e.themeClass)("gutterElement"+(this.config.style?"."+this.config.style:""));for(let e in s.domEventHandlers)this.dom.addEventListener(e,i=>{let r=t.lineAtHeight(i.clientY);s.domEventHandlers[e](t,r,i)&&i.preventDefault()});this.markers=s.initialMarkers(t),s.initialSpacer&&(this.spacer=new c(t,0,0,[s.initialSpacer(t)],this.elementClass),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=this.config.updateMarkers(this.markers.map(e.changes),e),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t],this.elementClass)}return this.markers==t}destroy(){this.dom.remove()}}class c{constructor(e,t,s,i,r){this.height=-1,this.above=0,this.dom=document.createElement("div"),this.update(e,t,s,i,r)}update(e,t,s,i,r){if(this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=s&&(this.dom.style.marginTop=(this.above=s)?s+"px":""),this.markers!=i){this.markers=i;for(let e;e=this.dom.lastChild;)e.remove();let t=r;for(let s of i){let i=s.toDOM(e);i&&this.dom.appendChild(i);let r=s.elementClass;r&&(t+=" "+r)}this.dom.className=t}}}function p(e,t){if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++)if(!e[s].compare(t[s]))return!1;return!0}const f=s.Annotation.define();exports.lineNumberMarkers=f;const g=s.Facet.define({combine:e=>(0,s.combineConfig)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let s={};for(let i in e)s[i]=e[i];for(let i in t){let e=s[i],r=t[i];s[i]=e?(t,s,i)=>e(t,s,i)||r(t,s,i):r}return s}})});class x extends i{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(e){let t=e.state.facet(g);return document.createTextNode(t.formatNumber(this.number))}}const v=n({style:"lineNumber",updateMarkers(e,t){for(let s of t.transactions){let t=s.annotation(f);t&&(e=e.update(t))}return e},lineMarker:(e,t,s)=>s.length?null:new x(e.state.doc.lineAt(t.from).number),initialSpacer:e=>new x(b(e.state.doc.lines)),updateSpacer(e,t){let s=b(t.view.state.doc.lines);return s==e.number?e:new x(s)}});function k(e={}){return[g.of(e),v]}function b(e){let t=9;for(;t<e;)t=10*t+9;return t}
},{"../../view":"NHOh","../../rangeset":"LKY5","../../state":"R3Cy"}],"lF2G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.keyName=p,exports.shift=exports.base=void 0;var e={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"};exports.base=e;var t={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"};exports.shift=t;for(var r="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),o="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),n="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),a="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),i="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),f=r&&(a||+r[1]<57)||n&&a,s=0;s<10;s++)e[48+s]=e[96+s]=String(s);for(s=1;s<=24;s++)e[s+111]="F"+s;for(s=65;s<=90;s++)e[s]=String.fromCharCode(s+32),t[s]=String.fromCharCode(s);for(var d in e)t.hasOwnProperty(d)||(t[d]=e[d]);function p(r){var n=!(f&&(r.ctrlKey||r.altKey||r.metaKey)||(o||i)&&r.shiftKey&&r.key&&1==r.key.length)&&r.key||(r.shiftKey?t:e)[r.keyCode]||r.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}
},{}],"Vilf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.keymap=exports.NormalizedKeymap=void 0;var e=require("w3c-keyname"),t=require("../../view");const r="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function i(e){const t=e.split(/-(?!$)/);let i,o,n,s,a=t[t.length-1];"Space"==a&&(a=" ");for(let l=0;l<t.length-1;++l){const e=t[l];if(/^(cmd|meta|m)$/i.test(e))s=!0;else if(/^a(lt)?$/i.test(e))i=!0;else if(/^(c|ctrl|control)$/i.test(e))o=!0;else if(/^s(hift)?$/i.test(e))n=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);r?s=!0:o=!0}}return i&&(a="Alt-"+a),o&&(a="Ctrl-"+a),s&&(a="Meta-"+a),n&&(a="Shift-"+a),a}function o(e,t,r){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==r&&t.shiftKey&&(e="Shift-"+e),e}const n=e=>{let r=new s(e);return t.EditorView.domEventHandlers.of({keydown(e,t){let i=r.get(t);return!!i&&i(e)}})};exports.keymap=n;class s{constructor(e){this.map=Object.create(null);for(const t in e)this.map[i(t)]=e[t]}get(t){const r=(0,e.keyName)(t),i=1==r.length&&" "!=r,n=this.map[o(r,t,!i)];if(n)return n;let s;if(i&&(t.shiftKey||t.altKey||t.metaKey)&&(s=e.base[t.keyCode])&&s!=r){const e=this.map[o(s,t,!0)];if(e)return e}}}exports.NormalizedKeymap=s;
},{"w3c-keyname":"lF2G","../../view":"NHOh"}],"BYFp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectDocStart=exports.selectDocEnd=exports.selectAll=exports.pcBaseKeymap=exports.moveWordRight=exports.moveWordLeft=exports.moveLineUp=exports.moveLineStart=exports.moveLineEnd=exports.moveLineDown=exports.moveCharRight=exports.moveCharLeft=exports.macBaseKeymap=exports.insertNewlineAndIndent=exports.indentSelection=exports.extendWordRight=exports.extendWordLeft=exports.extendLineUp=exports.extendLineStart=exports.extendLineEnd=exports.extendLineDown=exports.extendCharRight=exports.extendCharLeft=exports.deleteCharForward=exports.deleteCharBackward=exports.baseKeymap=void 0;var e=require("../../state");function t(t,o,r){let n=t.state.t().forEachRange(n=>n.empty||"lineboundary"==r?new e.SelectionRange(t.movePos(n.head,o,r,"move")):new e.SelectionRange("left"==o||"backward"==o?n.from:n.to));return!n.selection.eq(t.state.selection)&&("line"==r&&n.annotate(e.Transaction.preserveGoalColumn,!0),t.dispatch(n.scrollIntoView()),!0)}const o=e=>t(e,"left","character");exports.moveCharLeft=o;const r=e=>t(e,"right","character");exports.moveCharRight=r;const n=e=>t(e,"left","word");exports.moveWordLeft=n;const s=e=>t(e,"right","word");exports.moveWordRight=s;const a=e=>t(e,"backward","line");exports.moveLineUp=a;const i=e=>t(e,"forward","line");exports.moveLineDown=i;const c=e=>t(e,"backward","lineboundary");exports.moveLineStart=c;const l=e=>t(e,"forward","lineboundary");function d(t,o,r){let n=t.state.t().forEachRange(n=>new e.SelectionRange(n.anchor,t.movePos(n.head,o,r,"extend")));return!n.selection.eq(t.state.selection)&&("line"==r&&n.annotate(e.Transaction.preserveGoalColumn,!0),t.dispatch(n.scrollIntoView()),!0)}exports.moveLineEnd=l;const p=e=>d(e,"left","character");exports.extendCharLeft=p;const f=e=>d(e,"right","character");exports.extendCharRight=f;const h=e=>d(e,"left","word");exports.extendWordLeft=h;const x=e=>d(e,"right","word");exports.extendWordRight=x;const w=e=>d(e,"backward","line");exports.extendLineUp=w;const m=e=>d(e,"forward","line");exports.extendLineDown=m;const g=e=>d(e,"backward","lineboundary");exports.extendLineStart=g;const S=e=>d(e,"forward","lineboundary");exports.extendLineEnd=S;const u=({state:t,dispatch:o})=>(o(t.t().setSelection(e.EditorSelection.single(0)).scrollIntoView()),!0);exports.selectDocStart=u;const C=({state:t,dispatch:o})=>(o(t.t().setSelection(e.EditorSelection.single(t.doc.length)).scrollIntoView()),!0);exports.selectDocEnd=C;const v=({state:t,dispatch:o})=>(o(t.t().setSelection(e.EditorSelection.single(0,t.doc.length))),!0);function L(t,o){let r=t.state.t().forEachRange((r,n)=>{let{from:s,to:a}=r;if(s==a){let e=t.movePos(r.head,o,"character","move");s=Math.min(s,e),a=Math.max(a,e)}return s==a?r:(n.replace(s,a,""),new e.SelectionRange(s))});return!!r.docChanged&&(t.dispatch(r.scrollIntoView()),!0)}exports.selectAll=v;const A=e=>L(e,"backward");exports.deleteCharBackward=A;const R=e=>L(e,"forward");function E(e){let t="";for(let o=0;o<e;o++)t+=" ";return t}function b(t,o){for(let r of t.facet(e.EditorState.indentation)){let e=r(t,o);if(e>-1)return e}return-1}exports.deleteCharForward=R;const y=({state:t,dispatch:o})=>{let r=0,n=t.selection.ranges.map(e=>{let o=b(t,e.from);return o>-1?o:/^\s*/.exec(t.doc.lineAt(e.from).slice(0,50))[0].length});return o(t.t().forEachRange(({from:t,to:o},s)=>{let a=n[r++],i=s.doc.lineAt(o);for(;o<i.end&&/s/.test(i.slice(o-i.start,o+1-i.start));)o++;return s.replace(t,o,["",E(a)]),new e.SelectionRange(t+a+1)}).scrollIntoView()),!0};exports.insertNewlineAndIndent=y;const D=({state:e,dispatch:t})=>{let o=-1,r=[];for(let n of e.selection.ranges)for(let{start:t,end:s}=e.doc.lineAt(n.from);;){if(t!=o){o=t;let n,a=b(e,t);a>-1&&a!=(n=/^\s*/.exec(e.doc.slice(t,Math.min(s,t+100)))[0].length)&&r.push({pos:t,current:n,indent:a})}if(s+1>n.to)break;({start:t,end:s}=e.doc.lineAt(s+1))}if(r.length>0){let o=e.t();for(let{pos:e,current:t,indent:n}of r){let r=o.changes.mapPos(e);o.replace(r,r+t,E(n))}t(o)}return!0};exports.indentSelection=D;const M={ArrowLeft:o,ArrowRight:r,"Shift-ArrowLeft":p,"Shift-ArrowRight":f,"Mod-ArrowLeft":n,"Mod-ArrowRight":s,"Shift-Mod-ArrowLeft":h,"Shift-Mod-ArrowRight":x,ArrowUp:a,ArrowDown:i,"Shift-ArrowUp":w,"Shift-ArrowDown":m,Home:c,End:l,"Shift-Home":g,"Shift-End":S,"Mod-Home":u,"Mod-End":C,"Mod-a":v,Backspace:A,Delete:R,Enter:y};exports.pcBaseKeymap=M;const k={"Control-b":o,"Control-f":r,"Shift-Control-b":p,"Shift-Control-f":f,"Control-p":a,"Control-n":i,"Shift-Control-p":w,"Shift-Control-n":m,"Control-a":c,"Control-e":l,"Shift-Control-a":g,"Shift-Control-e":S,"Cmd-ArrowUp":u,"Cmd-ArrowDown":C,"Control-d":R,"Control-h":A};exports.macBaseKeymap=k;for(let B in M)k[B]=M[B];const I="undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform(),W=I?k:M;exports.baseKeymap=W;
},{"../../state":"R3Cy"}],"punM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.continuedIndent=c,exports.delimitedIndent=p,exports.openNodeProp=exports.indentNodeProp=exports.foldNodeProp=exports.flatIndent=exports.closeNodeProp=exports.LezerSyntax=exports.IndentContext=void 0;var t=require("lezer-tree"),e=require("../../state"),r=require("../../view");const s=new t.NodeProp;function n(t){return e.EditorState.indentation.of((e,r)=>i(e,t.getTree(e),r))}function i(e,r,s){let n=r.resolve(s);for(let i=n,o=s;;){let e=i.childBefore(o);if(!e)break;e.type.prop(t.NodeProp.error)&&e.start==e.end?(n=i,o=e.start):o=(i=e).end+1}for(;n;n=n.parent){let t=o(n.type)||(null==n.parent?a:null);if(t)return t(new l(e,s,n))}return-1}function o(e){let r=e.prop(s);if(!r){let r=e.prop(t.NodeProp.delim);if(r)return p({closing:r.split(" ")[1]})}return r}function a(){return 0}exports.indentNodeProp=s;class l{constructor(t,e,r){this.state=t,this.pos=e,this.node=r}get unit(){return this.state.indentUnit}get textAfter(){return this.state.doc.slice(this.pos,Math.min(this.pos+50,this.state.doc.lineAt(this.pos).end)).match(/^\s*(.*)/)[1]}countColumn(t,e){e<0&&(e=t.length);let r=this.state.tabSize;for(var s=0,n=0;;){let i=t.indexOf("\t",s);if(i<0||i>=e)return n+(e-s);n+=i-s,n+=r-n%r,s=i+1}}lineIndent(t){let e=t.slice(0,Math.min(50,t.length,this.node.start>t.start?this.node.start-t.start:1e8));return this.countColumn(e,e.search(/\S/))}get baseIndent(){let t=this.state.doc.lineAt(this.node.start);for(;;){let e=this.node.resolve(t.start);for(;e.parent&&e.parent.start==e.start;)e=e.parent;if(d(e,this.node))break;t=this.state.doc.lineAt(e.start)}return this.lineIndent(t)}column(t){let e=this.state.doc.lineAt(t);return this.countColumn(e.slice(0,t-e.start),t-e.start)}}function d(t,e){for(let r=e;r;r=r.parent)if(t==r)return!0;return!1}function h(e){let r=e.node,s=r.childAfter(r.start);if(!s)return null;let n=e.state.doc.lineAt(s.start);for(let i=s.end;;){let e=r.childAfter(i);if(!e)return null;if(!e.type.prop(t.NodeProp.skipped))return e.start<n.end?s:null;i=e.end}}function p({closing:t,align:e=!0,units:r=1}){return s=>{let n=s.textAfter.slice(0,t.length)==t,i=e?h(s):null;return i?n?s.column(i.start):s.column(i.end):s.baseIndent+(n?0:s.unit*r)}}exports.IndentContext=l;const u=t=>t.baseIndent;function c({except:t,units:e=1}={}){return r=>{let s=t&&t.test(r.textAfter);return r.baseIndent+(s?0:e*r.unit)}}exports.flatIndent=u;const f=new t.NodeProp;function g(t){return e.EditorState.foldable.of((e,r,s)=>{let n=null;for(let i=t.getTree(e).resolve(s);i;i=i.parent){if(i.end<=s||i.start>s)continue;if(n&&i.start<r)break;let t=i.type.prop(f);if(t){let o=t(i,e);o&&o.from<=s&&o.from>=r&&o.to>s&&(n=o)}}return n})}exports.foldNodeProp=f;class w{constructor(s){this.parser=s;let i=e.Annotation.define();this.field=e.StateField.define({create:e=>k.advance(t.Tree.empty,s,e.doc),update:(t,e)=>t.apply(e,s,i)}),this.extension=[e.EditorState.syntax.of(this),this.field,r.ViewPlugin.define(t=>new T(t,this,i)),n(this),g(this)]}getTree(t){return t.field(this.field).tree}parsePos(t){return t.field(this.field).upto}ensureTree(t,e,r=100){let s=t.field(this.field);if(s.upto>=e)return s.updatedTree;if(s.parse||s.startParse(this.parser,t.doc),s.parse.pos<e){let n=y(s.parse,r,e);if(n)return s.stopParse(n,t.doc.length)}return s.parse.pos<e?null:s.stopParse()}get docNodeType(){return this.parser.group.types[1]}languageDataAt(r,s){let n=this.parser.group.types[1];if(this.parser.hasNested){let e=this.getTree(r).resolve(s);for(;e;){if(e.type.prop(t.NodeProp.top)){n=e.type;break}e=e.parent}}return n.prop(e.languageData)||P}}exports.LezerSyntax=w;const P={};class x{constructor(t,e=t.length){this.doc=t,this.length=e,this.cursorPos=0,this.string="",this.cursor=t.iter()}get(t){if(t>=this.length)return-1;let e=this.cursorPos-this.string.length;return(t<e||t>=this.cursorPos)&&(t<this.cursorPos&&(this.cursor=this.doc.iter(),this.cursorPos=0),this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,e=this.cursorPos-this.string.length),this.string.charCodeAt(t-e)}read(t,e){let r=this.cursorPos-this.string.length;return t<r||e>=this.cursorPos?this.doc.slice(t,e):this.string.slice(t-r,e-r)}clip(t){return new x(this.doc,t)}}function y(t,e,r=5e6){let s=Date.now()+e;for(;;){let e=t.advance();if(e)return e;if(t.pos>r||Date.now()>s)return null}}function m(t,e){let r=t.forceFinish(),s=e.applyChanges([{fromA:0,toA:t.pos,fromB:0,toB:t.pos}]);return r.append(s)}class k{constructor(t,e){this.tree=t,this.upto=e,this.parse=null,this.updatedTree=t}static advance(t,e,r){let s=e.startParse(new x(r),{cache:t}),n=y(s,25);return n?new k(n,r.length):new k(m(s,t),s.pos)}apply(t,e,r){return t.annotation(r)||!t.docChanged&&this||k.advance((this.parse?m(this.parse,this.updatedTree):this.updatedTree).applyChanges(t.changes.changedRanges()),e,t.doc)}startParse(t,e){this.parse=t.startParse(new x(e),{cache:this.updatedTree})}stopParse(t,e){return t||(t=m(this.parse,this.updatedTree)),this.updatedTree=t,this.upto=null!=e?e:this.parse.pos,this.parse=null,t}}let v="undefined"!=typeof window&&window.requestIdleCallback||((t,{timeout:e})=>setTimeout(t,e)),N="undefined"!=typeof window&&window.cancelIdleCallback||clearTimeout;class T{constructor(t,e,r){this.view=t,this.syntax=e,this.setSyntax=r,this.working=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){t.docChanged&&this.scheduleWork()}scheduleWork(){if(this.working>-1)return;let{state:t}=this.view;t.field(this.syntax.field).upto>=t.doc.length||(this.working=v(this.work,{timeout:200}))}work(t){this.working=-1;let{state:e}=this.view,r=e.field(this.syntax.field);if(r.upto>=e.doc.length)return;r.parse||r.startParse(this.syntax.parser,e.doc);let s=y(r.parse,t?Math.max(25,t.timeRemaining()):100);s||r.parse.badness>.8?this.view.dispatch(e.t().annotate(this.setSyntax,new k(r.stopParse(s,e.doc.length),e.doc.length))):this.scheduleWork()}destroy(){this.working>=0&&N(this.working)}}function b(){return new t.NodeProp({deserialize:t=>t.split(" ")})}const A=b();exports.openNodeProp=A;const I=b();exports.closeNodeProp=I;
},{"lezer-tree":"rdIx","../../state":"R3Cy","../../view":"NHOh"}],"skYY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bracketMatching=f,exports.matchBrackets=m;var e=require("../../state"),t=require("../../view"),r=require("../../syntax");const n=t.EditorView.baseTheme({matchingBracket:{color:"#0b0"},nonmatchingBracket:{color:"#a22"}}),a=1e4,o="()[]{}",i=e.Facet.define({combine:t=>(0,e.combineConfig)(t,{afterCursor:!0,brackets:o,maxScanDistance:a})}),c=t.Decoration.mark({class:(0,t.themeClass)("matchingBracket")}),s=t.Decoration.mark({class:(0,t.themeClass)("nonmatchingBracket")}),d=e.StateField.define({create:()=>t.Decoration.none,update(e,r,n){if(!r.docChanged&&!r.selectionSet)return e;let a=[],o=n.facet(i);for(let t of n.selection.ranges){if(!t.empty)continue;let e=m(n,t.head,-1,o)||t.head>0&&m(n,t.head-1,1,o)||o.afterCursor&&(m(n,t.head,1,o)||t.head<n.doc.length&&m(n,t.head+1,-1,o));if(!e)continue;let r=e.matched?c:s;a.push(r.range(e.start.from,e.start.to)),e.end&&a.push(r.range(e.end.from,e.end.to))}return t.Decoration.set(a,!0)}}).provide(t.EditorView.decorations),l=[d,n];function f(e={}){return[i.of(e),l]}function u(e,t,n){let a=e.prop(t<0?r.closeNodeProp:r.openNodeProp);if(a)return a;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function m(e,t,r,n={}){let i,c=n.maxScanDistance||a,s=n.brackets||o,d=e.tree,l=d.resolve(t,r);return(i=u(l.type,r,s))?h(e,t,r,l,i,s):g(e,t,r,d,l.type,c,s)}function h(e,t,r,n,a,o){let i=n.parent,c={from:n.start,to:n.end},s=0;return i&&i.iterate({from:r<0?n.start:n.end,to:r<0?i.start:i.end,enter(e,t,i){if(!(r<0?i>n.start:t<n.end)){if(0==s&&a.indexOf(e.name)>-1)return{start:c,end:{from:t,to:i},matched:!0};if(u(e,r,o))s++;else if(u(e,-r,o)&&0==--s)return{start:c,end:{from:t,to:i},matched:!1};return!1}}})||{start:c,matched:!1}}function g(e,t,r,n,a,o,i){let c=r<0?e.doc.slice(t-1,t):e.doc.slice(t,t+1),s=i.indexOf(c);if(s<0||s%2==0!=r>0)return null;let d={from:r<0?t-1:t,to:r>0?t+1:t},l=e.doc.iterRange(t,r>0?e.doc.length:0),f=0;for(let u=0;!l.next().done&&u<=o;){let e=l.value;r<0&&(u+=e.length);let o=t+u*r;for(let t=r>0?0:e.length-1,c=r>0?e.length:-1;t!=c;t+=r){let c=i.indexOf(e[t]);if(!(c<0||n.resolve(o+t,1).type!=a))if(c%2==0==r>0)f++;else{if(1==f)return{start:d,end:{from:o+t,to:o+t+1},matched:c>>1==s>>1};f--}}r>0&&(u+=e.length)}return l.done?{start:d,matched:!1}:null}
},{"../../state":"R3Cy","../../view":"NHOh","../../syntax":"punM"}],"y5Ln":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleBackspace=u,exports.handleInsertion=h,exports.closeBrackets=void 0;var e=require("../../view"),t=require("../../state"),n=require("../../text"),r=require("w3c-keyname");const l={closeBrackets:["(","[","{","'",'"'],closeBracketsBefore:")]}'\":;>"},o=e.EditorView.domEventHandlers.of({keydown:s});exports.closeBrackets=o;const c="()[]{}<>";function a(e){for(let t=0;t<c.length;t+=2)if(c.charCodeAt(t)==e)return c.charAt(t+1);return(0,n.fromCodePoint)(e<128?e:e+1)}function i(e,n){let r=e.facet(t.EditorState.syntax);return 0==r.length?l:r[0].languageDataAt(e,n)}function s(e,t){if(t.ctrlKey||t.metaKey)return!1;if(8==t.keyCode){let t=u(e.state);return!!t&&(e.dispatch(t),!0)}let l=(0,r.keyName)(t);if(l.length>2||2==l.length&&(0,n.codePointAt)(l,0)<n.minPairCodePoint)return!1;let o=h(e.state,l);return!!o&&(e.dispatch(o),!0)}function u(e){let r=i(e,e.selection.primary.head).closeBrackets||l.closeBrackets,o=e.t(),c=null;return o.forEachRange(l=>{if(!l.empty)return c=l;let i=f(e.doc,l.head);for(let c of r)if(c==i&&d(e.doc,l.head)==a((0,n.codePointAt)(c,0)))return o.replace(l.head-c.length,l.head+c.length,""),new t.SelectionRange(l.head-c.length);return c=l}),c?null:o.scrollIntoView()}function h(e,t){let r=i(e,e.selection.primary.head),o=r.closeBrackets||l.closeBrackets;for(let c of o){let i=a((0,n.codePointAt)(c,0));if(t==c)return i==c?m(e,c,o.indexOf(c+c+c)>-1):g(e,c,i,r.closeBracketsBefore||l.closeBracketsBefore);if(t==i)return p(e,c,i)}return null}function d(e,t){let r=e.slice(t,t+2);return 2==r.length&&(0,n.codePointAt)(r,0)<n.minPairCodePoint?r.slice(0,1):r}function f(e,t){let r=e.slice(t-2,t);return 2==r.length&&(0,n.codePointAt)(r,0)<n.minPairCodePoint?r.slice(1):r}function g(e,n,r,l){let o=e.t(),c=null;return o.forEachRange(a=>{if(!a.empty)return o.replace(a.to,a.to,r),o.replace(a.from,a.from,n),new t.SelectionRange(a.anchor+n.length,a.head+n.length);let i=d(e.doc,a.head);return!i||/\s/.test(i)||l.indexOf(i)>-1?(o.replace(a.head,a.head,n+r),new t.SelectionRange(a.head+n.length,a.head+n.length)):c=a}),c?null:o.scrollIntoView()}function p(e,n,r){let l=e.t(),o=null;return l.forEachRange(n=>n.empty&&r==d(e.doc,n.head)?new t.SelectionRange(n.head+r.length):o=n),o?null:l.scrollIntoView()}function m(e,r,l){let o=e.t(),c=null;return o.forEachRange(a=>{if(!a.empty)return o.replace(a.to,a.to,r),o.replace(a.from,a.from,r),new t.SelectionRange(a.anchor+r.length,a.head+r.length);let i=a.head,s=d(e.doc,i);if(s==r){if(w(e,i))return o.replace(i,i,r+r),new t.SelectionRange(i+r.length);{let n=l&&e.doc.slice(i,i+3*r.length)==r+r+r;return new t.SelectionRange(i+r.length*(n?3:1))}}if(l&&e.doc.slice(i-2*r.length,i)==r+r&&w(e,i-2*r.length))return o.replace(i,i,r+r+r+r),new t.SelectionRange(i+r.length);if(!(0,n.isWordChar)(s)){let l=e.doc.slice(i-1,i);if(!(0,n.isWordChar)(l)&&l!=r)return o.replace(i,i,r+r),new t.SelectionRange(i+r.length)}return c=a}),c?null:o.scrollIntoView()}function w(e,t){let n=e.tree.resolve(t+1);return n.parent&&n.start==t}
},{"../../view":"NHOh","../../state":"R3Cy","../../text":"Oz7s","w3c-keyname":"lF2G"}],"Igag":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.specialChars=n;var e=require("../../view"),t=require("../../state"),o=require("../../text"),r=require("style-mod");const i=/[\u0000-\u0008\u000a-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/gu,s={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},a=t.Facet.define({combine(e){let o=(0,t.combineConfig)(e,{render:null,specialChars:i,addSpecialChars:null}),r=document.body.style;return o.replaceTabs=null==(r.tabSize||r.MozTabSize),o.replaceTabs&&(o.specialChars=new RegExp("\t|"+o.specialChars.source,"gu")),o.addSpecialChars&&(o.specialChars=new RegExp(o.specialChars.source+"|"+o.addSpecialChars.source,"gu")),o}});function n(e={}){return[a.of(e),c,m]}const l=10,c=e.ViewPlugin.fromClass(class{constructor(t){this.view=t,this.from=0,this.to=0,this.decorations=e.Decoration.none,this.decorationCache=Object.create(null),this.updateForViewport()}update(t){t.prevState.facet(a)!=t.state.facet(a)&&(this.decorationCache=Object.create(null),this.from=this.to=0,this.decorations=e.Decoration.none),t.changes.length&&(this.decorations=this.decorations.map(t.changes),this.from=t.changes.mapPos(this.from,1),this.to=t.changes.mapPos(this.to,-1),this.closeHoles(t.changes.changedRanges())),this.updateForViewport()}closeHoles(e){let t=[],o=this.view.viewport,r=[],i=this.view.state.facet(a);for(let s=0;s<e.length;s++){let{fromB:a,toB:n}=e[s];for(i.replaceTabs&&(n=this.view.state.doc.lineAt(n).end);s<e.length-1&&e[s+1].fromB<n+10;)n=Math.max(n,e[++s].toB);(a=Math.max(o.from,a))>=(n=Math.min(o.to,n))||(this.getDecorationsFor(a,n,t),r.push(a,n))}r.length&&(this.decorations=this.decorations.update({add:t,filter:e=>{for(let t=0;t<r.length;t+=2)if(e>=r[t]&&e<r[t+1])return!1;return!0},filterFrom:r[0],filterTo:r[r.length-1]}))}updateForViewport(){let t=this.view.viewport;if(this.from==t.from&&this.to==t.to)return;let o=[];this.from>=t.to||this.to<=t.from?(this.getDecorationsFor(t.from,t.to,o),this.decorations=e.Decoration.set(o)):(t.from<this.from&&this.getDecorationsFor(t.from,this.from,o),this.to<t.to&&this.getDecorationsFor(this.to,t.to,o),this.decorations=this.decorations.update({add:o,filter:(e,o)=>e>=t.from&&o<=t.to})),this.from=t.from,this.to=t.to}getDecorationsFor(t,r,i){let s=this.view.state.facet(a),{doc:n}=this.view.state;for(let a,l=t,c=n.iterRange(t,r);!c.next().done;){if(!c.lineBreak)for(;a=s.specialChars.exec(c.value);){let t,r=a[0].codePointAt?a[0].codePointAt(0):a[0].charCodeAt(0);if(null!=r){if(9==r){let r=n.lineAt(l+a.index),i=this.view.state.tabSize,s=(0,o.countColumn)(n.slice(r.start,l+a.index),0,i);t=e.Decoration.replace({widget:new f((i-s%i)*this.view.defaultCharacterWidth)})}else t=this.decorationCache[r]||(this.decorationCache[r]=e.Decoration.replace({widget:new d(s,r)}));i.push(t.range(l+a.index,l+a.index+a[0].length))}}l+=c.value.length}}}).decorations();function h(e){return e>=32?null:10==e?"␤":String.fromCharCode(9216+e)}const u="•";class d extends e.WidgetType{constructor(e,t){super(t),this.options=e}toDOM(){let e=h(this.value)||u,t="Control character "+(s[this.value]||this.value),o=this.options.render&&this.options.render(this.value,t,e);if(o)return o;let r=document.createElement("span");return r.textContent=e,r.title=t,r.setAttribute("aria-label",t),r.style.color="red",r}ignoreEvent(){return!1}}class f extends e.WidgetType{toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className=p.tab,e.style.width=this.value+"px",e}ignoreEvent(){return!1}}const p=new r.StyleModule({tab:{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"}}),m=e.EditorView.styleModule.of(p);
},{"../../view":"NHOh","../../state":"R3Cy","../../text":"Oz7s","style-mod":"h8XP"}],"JKwM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.codeFolding=c,exports.foldGutter=m,exports.unfoldCode=exports.foldCode=void 0;var e=require("../../state"),t=require("../../view"),o=require("../../gutter");const n=e.Annotation.define();function r(e){let t=[];for(let{head:o}of e.state.selection.ranges)t.some(e=>e.from<=o&&e.to>=o)||t.push(e.lineAt(o));return t}const l=e.StateField.define({create:()=>t.Decoration.none,update(e,t){e=e.map(t.changes);let o=t.annotation(n);if(o){let{fold:t=[],unfold:n=[]}=o;(n.length||t.length)&&(e=e.update({add:t.map(({from:e,to:t})=>u.decoration.range(e,t)),filter:(e,t)=>!n.some(o=>o.from==e&&o.to==t),filterFrom:n.reduce((e,t)=>Math.min(e,t.from),1e8),filterTo:n.reduce((e,t)=>Math.max(e,t.to),0)}))}return e}}).provide(t.EditorView.decorations);function a(e,t,o){var n;let r=null;return null===(n=e.field(l,!1))||void 0===n||n.between(t,o,(e,t)=>{(!r||r.from>e)&&(r={from:e,to:t})}),r}const i=t=>{if(!t.state.field(l,!1))return!1;let o=[];for(let n of r(t)){let r=t.state.facet(e.EditorState.foldable).reduce((e,o)=>e||o(t.state,n.from,n.to),null);r&&o.push(r)}return!!o.length&&(t.dispatch(t.state.t().annotate(n,{fold:o})),!0)};exports.foldCode=i;const d=e=>{if(!e.state.field(l,!1))return!1;let t=[];for(let o of r(e)){let n=a(e.state,o.from,o.to);n&&t.push(n)}return!!t.length&&(e.dispatch(e.state.t().annotate(n,{unfold:t})),!0)};exports.unfoldCode=d;const s={placeholderDOM:null,placeholderText:"…"},f=e.Facet.define({combine:t=>(0,e.combineConfig)(t,s)});function c(e={}){return[f.of(e),l,g]}class u extends t.WidgetType{ignoreEvents(){return!1}toDOM(e){let o=e.state.facet(f);if(o.placeholderDOM)return o.placeholderDOM();let r=document.createElement("span");return r.textContent=o.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className=(0,t.themeClass)("foldPlaceholder"),r.onclick=(t=>{let o=e.lineAt(e.posAtDOM(t.target)),r=a(e.state,o.from,o.to);r&&e.dispatch(e.state.t().annotate(n,{unfold:[r]})),t.preventDefault()}),r}}u.decoration=t.Decoration.replace({widget:new u(null)});const p={openText:"⌄",closedText:"›"};class h extends o.GutterMarker{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.phrase(this.open?"Fold line":"Unfold line"),t}}function m(t={}){let r=(0,e.fillConfig)(t,p);return[(0,o.gutter)({style:"foldGutter",lineMarker:(t,o)=>a(t.state,o.from,o.to)?new h(r,!1):t.state.facet(e.EditorState.foldable).some(e=>e(t.state,o.from,o.to))?new h(r,!0):null,initialSpacer:()=>new h(r,!1),domEventHandlers:{click:(t,o)=>{let r=a(t.state,o.from,o.to);if(r)return t.dispatch(t.state.t().annotate(n,{unfold:[r]})),!0;let l=t.state.facet(e.EditorState.foldable).reduce((e,n)=>e||n(t.state,o.from,o.to),null);return!!l&&(t.dispatch(t.state.t().annotate(n,{fold:[l]})),!0)}}}),c()]}const g=t.EditorView.baseTheme({foldPlaceholder:{background:"#eee",border:"1px solid silver",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},"gutterElement.foldGutter":{padding:"0 1px",cursor:"pointer"}});
},{"../../state":"R3Cy","../../view":"NHOh","../../gutter":"v8f1"}],"cV7P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TreeBuffer=exports.Tree=exports.Subtree=exports.NodeGroup=exports.NodeType=exports.NodePropSource=exports.NodeProp=exports.DefaultBufferLength=void 0;const e=1024;exports.DefaultBufferLength=e;class t{constructor(e,t){this.enter=e,this.leave=t,this.result=void 0}get done(){return void 0!==this.result}doEnter(e,t,r){let i=this.enter(e,t,r);return void 0===i||(!1!==i&&(this.result=i),!1)}}let r=0;class i{constructor({deserialize:e}={}){this.id=r++,this.deserialize=e||(()=>{throw new Error("This node type doesn't define a deserialize function")})}static string(){return new i({deserialize:e=>e})}static number(){return new i({deserialize:Number})}static flag(){return new i({deserialize:()=>!0})}set(e,t){return e[this.id]=t,e}add(e){return new n(this,"function"==typeof e?e:s.match(e))}}exports.NodeProp=i,i.error=i.flag(),i.skipped=i.flag(),i.delim=i.string(),i.top=i.flag();class n{constructor(e,t){this.prop=e,this.f=t}}exports.NodePropSource=n;class s{constructor(e,t,r){this.name=e,this.props=t,this.id=r}prop(e){return this.props[e.id]}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return e=>t[e.name]}}exports.NodeType=s,s.none=new s("",Object.create(null),0);class h{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node group")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let t of e){let e=t.f(r);if(void 0!==e){if(!i){i=Object.create(null);for(let e in r.props)i[e]=r.props[e]}i[t.prop.id]=e}}t.push(i?new s(r.name,i,r.id):r)}return new h(t)}}exports.NodeGroup=h;class l{get name(){return this.type.name}get depth(){let e=0;for(let t=this.parent;t;t=t.parent)e++;return e}get root(){let e=this;for(;e.parent;)e=e.parent;return e}resolve(e,t=0){let r=this.resolveAt(e);if(0!=t)for(;;){let i=t<0?r.childBefore(e):r.childAfter(e);if(!i||(t<0?i.end:i.start)!=e)break;r=i}return r}get firstChild(){return this.childAfter(this.start-1)}get lastChild(){return this.childBefore(this.end+1)}}exports.Subtree=l;class o extends l{constructor(e,t,r,i){super(),this.type=e,this.children=t,this.positions=r,this.length=i}get start(){return 0}get end(){return this.length}toString(){let e=this.children.map(e=>e.toString()).join();return this.name?(/\W/.test(this.name)&&!this.type.prop(i.error)?JSON.stringify(this.name):this.name)+(e.length?"("+e+")":""):e}partial(e,t,r,i,n){for(let s=0;s<this.children.length;s++){let h=this.positions[s];if(h>t)break;let l=this.children[s],f=h+l.length;f<e||(e<=h&&t>=f?(i.push(l),n.push(h+r)):l instanceof o&&l.partial(e-h,t-h,r+h,i,n))}}applyChanges(e){if(0==e.length)return this;let t=[],r=[];function n(e,t,r){let n=-1;return e.iterate({from:t,to:r<0?0:e.length,enter:()=>n<0&&void 0,leave(e,s,h){n<0&&(r<0?h<=t:s>=t)&&!e.prop(i.error)&&(n=r<0?Math.min(t,h-1):Math.max(t,s+1))}}),n>-1?n:r<0?0:e.length}let h=0;for(let i=0,s=0;;i++){let l=i==e.length?null:e[i],o=l?n(this,l.fromA,-1):this.length;if(o>s&&this.partial(s,o,h,t,r),!l)break;s=n(this,l.toA,1),h+=l.toB-l.fromB-(l.toA-l.fromA)}return new o(s.none,t,r,this.length+h)}cut(e){if(e>=this.length)return this;let t=[],r=[];for(let i=0;i<this.children.length;i++){let n=this.positions[i];if(n>=e)break;let s=this.children[i],h=n+s.length;t.push(h<=e?s:s.cut(e-n)),r.push(n)}return new o(this.type,t,r,e)}iterate({from:e=this.start,to:r=this.end,enter:i,leave:n}){let s=new t(i,n);return this.iterInner(e,r,0,s),s.result}iterInner(e,t,r,i){if(!this.type.name||i.doEnter(this.type,r,r+this.length)){if(e<=t)for(let n=0;n<this.children.length&&!i.done;n++){let s=this.children[n],h=this.positions[n]+r,l=h+s.length;if(h>t)break;l<e||s.iterInner(e,t,h,i)}else for(let n=this.children.length-1;n>=0&&!i.done;n--){let s=this.children[n],h=this.positions[n]+r;if(h+s.length<t)break;h>e||s.iterInner(e,t,h,i)}i.leave&&this.type.name&&i.leave(this.type,r,r+this.length)}}resolveAt(e){if(f==this)for(let t=u;;){let r=t.parent;if(!r)break;if(t.start<e&&t.end>e)return t.resolve(e);t=r}return f=this,u=this.resolveInner(e,0,this)}childBefore(e){return this.findChild(e,-1,0,this)}childAfter(e){return this.findChild(e,1,0,this)}findChild(e,t,r,i){for(let n=0;n<this.children.length;n++){let s=this.positions[n]+r,h=-1;if(s>=e)if(t<0&&n>0)h=n-1;else{if(!(t>0))break;h=n}if(h<0&&(s+this.children[n].length>e||t<0&&n==this.children.length-1)&&(h=n),h>=0){let n=this.children[h],s=this.positions[h]+r;if(0==n.length&&s==e)continue;if(n instanceof o)return n.type.name?new p(n,s,i):n.findChild(e,t,s,i);{let r=n.findIndex(e,t,s,0,n.buffer.length);if(r>-1)return new a(n,s,r,i)}}}return null}resolveInner(e,t,r){let i=this.findChild(e,0,t,r);return i?i.resolveAt(e):r}append(e){if(e.children.length&&e.positions[0]<this.length)throw new Error("Can't append overlapping trees");return new o(this.type,this.children.concat(e.children),this.positions.concat(e.positions),e.length)}balance(t=e){return this.children.length<=g?this:x(this.type,s.none,this.children,this.positions,0,this.children.length,0,t,this.length)}static build(e){return b(e)}}exports.Tree=o,o.empty=new o(s.none,[],[],0),o.prototype.parent=null;let f=o.empty,u=o.empty;class d{constructor(e,t,r,i=s.none){this.buffer=e,this.length=t,this.group=r,this.type=i}toString(){let e=[];for(let t=0;t<this.buffer.length;)t=this.childToString(t,e);return e.join(",")}childToString(e,t){let r=this.buffer[e],n=this.buffer[e+3],s=this.group.types[r],h=s.name;if(/\W/.test(h)&&!s.prop(i.error)&&(h=JSON.stringify(h)),n>(e+=4)){let t=[];for(;e<n;)e=this.childToString(e,t);h+="("+t.join(",")+")"}return t.push(h),e}cut(e){let t=0;for(;t<this.buffer.length&&this.buffer[t+1]<e;)t+=4;let r=new Uint16Array(t);for(let i=0;i<t;i+=4)r[i]=this.buffer[i],r[i+1]=this.buffer[i+1],r[i+2]=Math.min(e,this.buffer[i+2]),r[i+3]=Math.min(this.buffer[i+3],t);return new d(r,Math.min(e,this.length),this.group)}iterate({from:e=0,to:r=this.length,enter:i,leave:n}){let s=new t(i,n);return this.iterInner(e,r,0,s),s.result}iterInner(e,t,r,i){if(e<=t)for(let n=0;n<this.buffer.length;)n=this.iterChild(e,t,r,n,i);else this.iterRev(e,t,r,0,this.buffer.length,i)}iterChild(e,t,r,i,n){let s=this.group.types[this.buffer[i++]],h=this.buffer[i++]+r,l=this.buffer[i++]+r,o=this.buffer[i++];if(h>t)return this.buffer.length;if(l>=e&&n.doEnter(s,h,l)){for(;i<o&&!n.done;)i=this.iterChild(e,t,r,i,n);n.leave&&n.leave(s,h,l)}return o}parentNodesByEnd(e,t){let r=[],i=e=>{let t=this.buffer[e+3];if(t==e+4)return t;for(let r=e+4;r<t;)r=i(r);return r.push(e),t};for(let n=e;n<t;)n=i(n);return r}iterRev(e,t,r,i,n,s){let h=this.parentNodesByEnd(i,n),l=-1,o=-1,f=()=>{h.length>0?(l=h.pop(),o=this.buffer[l+3]):o=-1};f();e:for(let u=n;u>i&&!s.done;){for(;o==u;){let i=l,n=this.buffer[i],h=this.buffer[i+1]+r,d=this.buffer[i+2]+r;if(f(),h<=e&&d>=t&&!s.doEnter(this.group.types[n],h,d)){for(u=i;o>i;)f();continue e}}let i=this.buffer[--u],n=this.buffer[--u]+r,h=this.buffer[--u]+r,d=this.buffer[--u];h>e||n<t||(i!=u+4||s.doEnter(this.group.types[d],h,n))&&s.leave&&s.leave(this.group.types[d],h,n)}}findIndex(e,t,r,i,n){let s=-1;for(let h=i,l=this.buffer;h<n;){let i=l[h+1]+r,n=l[h+2]+r,o=i==n&&i==e;if(i>=e){if(t>0&&!o)return h;break}if(n>e)return h;o||(s=h),h=l[h+3]}return t<0?s:-1}}exports.TreeBuffer=d;class p extends l{constructor(e,t,r){super(),this.node=e,this.start=t,this.parent=r}get type(){return this.node.type}get end(){return this.start+this.node.length}resolveAt(e){return e<=this.start||e>=this.end?this.parent.resolveAt(e):this.node.resolveInner(e,this.start,this)}childBefore(e){return this.node.findChild(e,-1,this.start,this)}childAfter(e){return this.node.findChild(e,1,this.start,this)}toString(){return this.node.toString()}iterate({from:e=this.start,to:r=this.end,enter:i,leave:n}){let s=new t(i,n);return this.node.iterInner(e,r,this.start,s),s.result}}class a extends l{constructor(e,t,r,i){super(),this.buffer=e,this.bufferStart=t,this.index=r,this.parent=i}get type(){return this.buffer.group.types[this.buffer.buffer[this.index]]}get start(){return this.buffer.buffer[this.index+1]+this.bufferStart}get end(){return this.buffer.buffer[this.index+2]+this.bufferStart}get endIndex(){return this.buffer.buffer[this.index+3]}childBefore(e){let t=this.buffer.findIndex(e,-1,this.bufferStart,this.index+4,this.endIndex);return t<0?null:new a(this.buffer,this.bufferStart,t,this)}childAfter(e){let t=this.buffer.findIndex(e,1,this.bufferStart,this.index+4,this.endIndex);return t<0?null:new a(this.buffer,this.bufferStart,t,this)}iterate({from:e=this.start,to:r=this.end,enter:i,leave:n}){let s=new t(i,n);return e<=r?this.buffer.iterChild(e,r,this.bufferStart,this.index,s):this.buffer.iterRev(e,r,this.bufferStart,this.index,this.endIndex,s),s.result}resolveAt(e){if(e<=this.start||e>=this.end)return this.parent.resolveAt(e);let t=this.buffer.findIndex(e,0,this.bufferStart,this.index+4,this.endIndex);return t<0?this:new a(this.buffer,this.bufferStart,t,this).resolveAt(e)}toString(){let e=[];return this.buffer.childToString(this.index,e),e.join("")}}class c{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new c(this.buffer,this.index)}}const g=8;function b(t){let{buffer:r,group:i,topID:n=0,maxBufferLength:h=e,reused:l=[],minRepeatType:f=i.types.length}=t,u=Array.isArray(r)?new c(r,r.length):r,p=i.types;function a(e,t,r,n,c){let y,{id:v,start:m,end:w,size:S}=u,A=m-e;if(S<0)return r.push(l[v]),n.push(A),void u.next();let I,k=p[v];if(w-m<=h&&(y=function(e){let t=u.fork(),r=0,i=0,n=0,s=t.end-h;e:for(let h=t.pos-e;t.pos>h;){let e=t.size,l=t.pos-e;if(e<0||l<h||t.start<s)break;let o=t.id>=f?4:0,u=t.start;for(t.next();t.pos>l;){if(t.size<0)break e;t.id>=f&&(o+=4),t.next()}i=u,r+=e,n+=o}return r>4?{size:r,start:i,skip:n}:null}(u.pos-t))){let t=new Uint16Array(y.size-y.skip),r=u.pos-y.size,n=t.length;for(;u.pos>r;)n=b(y.start,t,n);I=new d(t,w-y.start,i,c),A=y.start-e}else{let e=u.pos-S;u.next();let t=[],r=[],n=v>=i.types.length?v-(i.types.length-f):-1;if(n>-1)for(k=p[n];u.pos>e;){a(m,e,t,r,u.id==n?k:s.none)}else for(;u.pos>e;)a(m,e,t,r,s.none);t.reverse(),r.reverse(),I=n>-1&&t.length>g?x(k,k,t,r,0,t.length,0,h,w-m):new o(k,t,r,w-m)}r.push(I),n.push(A)}function b(e,t,r){let{id:i,start:n,end:s,size:h}=u;u.next();let l=r;if(h>4){let i=u.pos-(h-4);for(;u.pos>i;)r=b(e,t,r)}return i<f&&(t[--r]=l,t[--r]=s-e,t[--r]=n-e,t[--r]=i),r}let y=[],v=[];for(;u.pos>0;)a(0,0,y,v,s.none);let m=y.length?v[0]+y[0].length:0;return new o(i.types[n],y.reverse(),v.reverse(),m)}function x(e,t,r,i,n,h,l,f,u){let d=[],p=[];if(u<=f)for(let s=n;s<h;s++)d.push(r[s]),p.push(i[s]-l);else{let e=Math.max(f,Math.ceil(1.5*u/g));for(let u=n;u<h;){let n=u,a=i[u];for(u++;u<h;u++){if(i[u]+r[u].length-a>e)break}if(u==n+1){let i=r[n];if(i instanceof o&&i.type==t&&i.length>e<<1){for(let e=0;e<i.children.length;e++)d.push(i.children[e]),p.push(i.positions[e]+a-l);continue}d.push(i)}else if(u==n+1)d.push(r[n]);else{let e=x(t,t,r,i,n,u,a,f,i[u-1]+r[u-1].length-a);t==s.none||y(e.children,t)||(e=new o(s.none,e.children,e.positions,e.length)),d.push(e)}p.push(a-l)}}return new o(e,d,p,u)}function y(e,t){for(let r of e)if(r.type==t)return!0;return!1}
},{}],"g5IB":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"rBS1":[function(require,module,exports) {
var process = require("process");
var t=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"NodeGroup",{enumerable:!0,get:function(){return e.NodeGroup}}),Object.defineProperty(exports,"NodeProp",{enumerable:!0,get:function(){return e.NodeProp}}),Object.defineProperty(exports,"NodeType",{enumerable:!0,get:function(){return e.NodeType}}),Object.defineProperty(exports,"Subtree",{enumerable:!0,get:function(){return e.Subtree}}),Object.defineProperty(exports,"Tree",{enumerable:!0,get:function(){return e.Tree}}),exports.TokenGroup=exports.Token=exports.Stack=exports.Parser=exports.ParseContext=exports.ExternalTokenizer=void 0;var e=require("lezer-tree"),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function s(t,e){function s(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}var i,o=function(){function t(t,e,r,s,i,o,n,a,h){this.cx=t,this.stack=e,this.state=r,this.reducePos=s,this.pos=i,this.recovered=o,this.buffer=n,this.bufferBase=a,this.parent=h}return t.prototype.toString=function(){return"["+this.stack.filter(function(t,e){return e%3==0}).concat(this.state)+"]@"+this.pos+(this.recovered?"!"+this.recovered:"")},t.start=function(e,r,s){return void 0===s&&(s=0),new t(e,[],r,s,s,0,[],0,null)},t.prototype.pushState=function(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t},t.prototype.reduce=function(t){var e=t>>19,r=65535&t,s=this.cx.parser;if(0==e)return r<s.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),void this.pushState(s.getGoto(this.state,r,!0),this.reducePos);var i=this.stack.length-3*(e-1)-(262144&t?6:0),o=this.stack[i-2],n=this.stack[i-1],a=this.bufferBase+this.buffer.length-n;if(r<s.minRepeatTerm||131072&t||r>s.maxNode&&r<=s.maxRepeatWrap){var h=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,o,h,a+4,!0)}if(262144&t)this.state=this.stack[i];else{var u=this.stack[i-3];this.state=s.getGoto(u,r,!0)}for(;this.stack.length>i;)this.stack.pop()},t.prototype.storeNode=function(t,e,r,s,i){if(void 0===s&&(s=4),void 0===i&&(i=!1),0==t){var o=this,n=this.buffer.length;if(0==n&&o.parent&&(n=o.bufferBase-o.parent.bufferBase,o=o.parent),n>0&&0==o.buffer[n-4]&&o.buffer[n-1]>-1){if(e==r)return;if(o.buffer[n-2]>=e)return void(o.buffer[n-2]=r)}}if(i&&this.pos!=r){var a=this.buffer.length;if(a>0&&0!=this.buffer[a-4])for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4);this.buffer[a]=t,this.buffer[a+1]=e,this.buffer[a+2]=r,this.buffer[a+3]=s}else this.buffer.push(t,e,r,s)},t.prototype.shift=function(t,e,r){if(131072&t)this.pushState(65535&t,this.pos);else if(0==(262144&t)){var s=this.pos,i=t,o=this.cx.parser;(r>this.pos||e<=o.maxNode)&&(this.pos=r,o.stateFlag(i,1)||(this.reducePos=r)),this.pushState(i,s),e<=o.maxNode&&this.buffer.push(e,s,r,4)}else e<=this.cx.parser.maxNode&&this.buffer.push(e,this.pos,r,4),this.pos=r},t.prototype.apply=function(t,e,r){65536&t?this.reduce(t):this.shift(t,e,r)},t.prototype.useNode=function(t,e){var r=this.cx.reused.length-1;(r<0||this.cx.reused[r]!=t)&&(this.cx.reused.push(t),r++);var s=this.pos;this.reducePos=this.pos=s+t.length,this.pushState(e,s),this.buffer.push(r,s,this.reducePos,-1)},t.prototype.split=function(){for(var e=this,r=e.buffer.length;r>0&&e.buffer[r-2]>e.reducePos;)r-=4;for(var s=e.buffer.slice(r),i=e.bufferBase+r;e&&i==e.bufferBase;)e=e.parent;return new t(this.cx,this.stack.slice(),this.state,this.reducePos,this.pos,this.recovered,s,i,e)},t.prototype.recoverByDelete=function(t,e){var r=t<=this.cx.parser.maxNode;r&&this.storeNode(t,this.pos,e),this.storeNode(0,this.pos,e,r?8:4),this.pos=this.reducePos=e,this.recovered+=2},t.prototype.canShift=function(t){for(var e=new n(this);;){var r=this.cx.parser.stateSlot(e.top,4)||this.cx.parser.hasAction(e.top,t);if(0==(65536&r))return!0;if(0==r)return!1;e.reduce(r)}},Object.defineProperty(t.prototype,"ruleStart",{get:function(){var t=this.cx.parser.stateSlot(this.state,5);if(!(65536&t))return 0;var e=this.stack.length-3*(t>>19);return this.stack[e+1]},enumerable:!0,configurable:!0}),t.prototype.startOf=function(t){for(var e=this.state,r=this.stack.length,s=this.cx.parser;;){var i=s.stateSlot(e,5),o=i>>19,n=65535&i;if(t.includes(n)){var a=r-3*(i>>19);return this.stack[a+1]}if(0==r)return-1;0==o?(r-=3,e=this.stack[r]):(r-=3*(o-1),e=s.getGoto(this.stack[r-3],n,!0))}},t.prototype.recoverByInsert=function(t){var e=this,r=this.cx.parser.nextStates(this.state);if(r.length>4){for(var s=r.filter(function(r){return r!=e.state&&e.cx.parser.hasAction(r,t)}),i=0;s.length<4&&i<r.length;i++)s.includes(r[i])||s.push(r[i]);r=s}var o=[];for(i=0;i<r.length&&o.length<4;i++)if(r[i]!=this.state){var n=this.split();n.storeNode(0,n.pos,n.pos,4,!0),n.pushState(r[i],this.pos),n.recovered+=2,o.push(n)}return o},t.prototype.forceReduce=function(){var t=this.cx.parser.stateSlot(this.state,5);return 0!=(65536&t)&&(this.cx.parser.validAction(this.state,t)||(this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.recovered+=1),this.reduce(t),!0)},t.prototype.forceAll=function(){for(;!this.cx.parser.stateFlag(this.state,2)&&this.forceReduce(););return this},t.prototype.toTree=function(){return e.Tree.build({buffer:a.create(this),group:this.cx.parser.group,topID:this.cx.topTerm,maxBufferLength:this.cx.maxBufferLength,reused:this.cx.reused,minRepeatType:this.cx.parser.minRepeatTerm})},t}();exports.Stack=o,function(t){t[t.Token=2]="Token",t[t.Reduce=1]="Reduce",t[t.MaxNext=4]="MaxNext"}(i||(i={}));var n=function(){function t(t){this.stack=t,this.top=t.state,this.rest=t.stack,this.offset=this.rest.length}return t.prototype.reduce=function(t){var e=65535&t,r=t>>19;0==r?(this.rest==this.stack.stack&&(this.rest=this.rest.slice()),this.rest.push(this.top,0,0),this.offset+=3):this.offset-=3*(r-1);var s=this.stack.cx.parser.getGoto(this.rest[this.offset-3],e,!0);this.top=s},t}(),a=function(){function t(t,e,r){this.stack=t,this.pos=e,this.index=r,this.buffer=t.buffer,0==this.index&&this.maybeNext()}return t.create=function(e){return new t(e,e.bufferBase+e.buffer.length,e.buffer.length)},t.prototype.maybeNext=function(){var t=this.stack.parent;null!=t&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)},Object.defineProperty(t.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!0,configurable:!0}),t.prototype.next=function(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()},t.prototype.fork=function(){return new t(this.stack,this.pos,this.index)},t}(),h=function(){function t(){this.start=-1,this.value=-1,this.end=-1}return t.prototype.accept=function(t,e){this.value=t,this.end=e},t}();exports.Token=h;var u=function(){function t(t,e){void 0===e&&(e=t.length),this.string=t,this.length=e}return t.prototype.get=function(t){return t<0||t>=this.length?-1:this.string.charCodeAt(t)},t.prototype.read=function(t,e){return this.string.slice(t,Math.min(this.length,e))},t.prototype.clip=function(e){return new t(this.string,e)},t}(),p=function(){function t(t,e){this.data=t,this.id=e}return t.prototype.token=function(t,e,r){f(this.data,t,e,r,this.id)},t}();exports.TokenGroup=p,p.prototype.contextual=!1;var c=function(){return function(t,e){void 0===e&&(e={}),this.token=t,this.contextual=e&&e.contextual||!1}}();function f(t,e,r,s,i){var o=0,n=1<<i;t:for(var a=r.start;0!=(n&t[o]);){for(var h=t[o+1],u=o+3;u<h;u+=2)if((t[u+1]&n)>0){var p=t[u];if(-1==r.value||r.value==p||s.cx.parser.overrides(p,r.value)){r.accept(p,a);break}}for(var c=e.get(a++),f=0,l=t[o+2];f<l;){var d=f+l>>1,v=h+d+(d<<1),g=t[v],y=t[v+1];if(c<g)l=d;else{if(!(c>=y)){o=t[v+2];continue t}f=d+1}}break}}function l(t,e){void 0===e&&(e=Uint16Array);for(var r=null,s=0,i=0;s<t.length;){for(var o=0;;){var n=t.charCodeAt(s++),a=!1;if(126==n){o=65535;break}n>=92&&n--,n>=34&&n--;var h=n-32;if(h>=46&&(h-=46,a=!0),o+=h,a)break;o*=46}r?r[i++]=o:r=new e(o)}return r}exports.ExternalTokenizer=c;var d=void 0!==t&&/\bparse\b/.test(void 0),v=function(){function t(t){this.start=[0],this.index=[0],this.nextStart=0,this.trees=[t]}return t.prototype.nodeAt=function(t){if(t<this.nextStart)return null;for(;;){var r=this.trees.length-1;if(r<0)return this.nextStart=1e9,null;var s=this.trees[r],i=this.index[r];if(i!=s.children.length){var o=s.children[i],n=this.start[r]+s.positions[i];if(n>=t)return n==t?o:null;o instanceof e.TreeBuffer?(this.index[r]++,this.nextStart=n+o.length):(this.index[r]++,n+o.length>=t&&(this.trees.push(o),this.start.push(n),this.index.push(0)))}else this.trees.pop(),this.start.pop(),this.index.pop()}},t}(),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.extended=-1,e.mask=0,e}return s(e,t),e.prototype.clear=function(t){this.start=t,this.value=this.extended=-1},e}(h),y=new h,b=function(){function t(t){this.tokens=[],this.mainToken=y,this.actions=[],this.tokens=t.tokenizers.map(function(t){return new g})}return t.prototype.getActions=function(t,e){for(var r=0,s=null,i=t.cx.parser,o=i.tokenizers,n=i.stateSlot(t.state,3),a=0;a<o.length;a++)if(0!=(1<<a&n)){var h=o[a],u=this.tokens[a];(h.contextual||u.start!=t.pos||u.mask!=n)&&(this.updateCachedToken(u,h,t,e),u.mask=n);var p=r;if(u.extended>-1&&(r=this.addActions(t,u.extended,u.end,r)),(r=this.addActions(t,u.value,u.end,r))>p){s=u;break}s&&0==u.value||(s=u)}for(;this.actions.length>r;)this.actions.pop();return s||((s=y).start=t.pos,t.pos==e.length?s.accept(t.cx.parser.eofTerm,t.pos):s.accept(0,t.pos+1)),this.mainToken=s,this.actions},t.prototype.updateCachedToken=function(t,e,r,s){if(t.clear(r.pos),e.token(s,t,r),t.value>-1){var i=r.cx.parser,o=O(i.data,i.specializeTable,t.value);if(o>=0){var n=i.specializations[o][s.read(t.start,t.end)];null!=n&&(0==(1&n)?t.value=n>>1:t.extended=n>>1)}}else r.pos==s.length?t.accept(r.cx.parser.eofTerm,r.pos):t.accept(0,r.pos+1)},t.prototype.putAction=function(t,e,r,s){for(var i=0;i<s;i+=3)if(this.actions[i]==t)return s;return this.actions[s++]=t,this.actions[s++]=e,this.actions[s++]=r,s},t.prototype.addActions=function(t,e,r,s){for(var i=t.state,o=t.cx.parser,n=o.data,a=0;a<2;a++)for(var h=o.stateSlot(i,a?2:1),u=void 0;65535!=(u=n[h]);h+=3)(u==e||0==u&&0==s)&&(s=this.putAction(n[h+1]|n[h+2]<<16,e,r,s));return s},t}(),x=function(){return function(t,e,r,s,i,o){void 0===i&&(i=null),void 0===o&&(o=-1),this.parser=t,this.maxBufferLength=e,this.input=r,this.topTerm=s,this.parent=i,this.wrapType=o,this.reused=[],this.tokens=new b(t)}}(),k=5,m=3,T=200,N=10,P=function(){function t(t,r,s){var i=void 0===s?{}:s,n=i.cache,a=void 0===n?void 0:n,h=i.strict,u=void 0!==h&&h,p=i.bufferLength,c=void 0===p?e.DefaultBufferLength:p,f=i.top,l=void 0===f?void 0:f;this.pos=0,this.recovering=0,this.tokenCount=0;var d=l?t.topRules[l]:t.defaultTop;if(!d)throw new RangeError("Invalid top rule name "+l);this.stacks=[o.start(new x(t,c,r,d[1]),d[0])],this.strict=u,this.cache=a?new v(a):null}return t.prototype.putStack=function(t){this.stacks.push(t),(this.pos<0||t.pos<this.pos)&&(this.pos=t.pos)},t.prototype.advance=function(){var t=this.stacks,e=this.pos;this.stacks=[],this.pos=-1;for(var r=null,s=null,i=0;i<t.length;i++)for(var o=t[i];;){if(o.pos>e)this.putStack(o);else{var n=this.advanceStack(o,t);if(n){o=n;continue}r||(r=[],s=[]),r.push(o);var a=o.cx.tokens.mainToken;s.push(a.value,a.end)}break}if(!this.stacks.length){var h;if(h=r&&j(r))return h.toTree();if(this.strict)throw new SyntaxError("No parse at "+e);this.recovering||(this.recovering=k)}if(this.recovering&&r&&(h=this.runRecovery(r,s)))return h.forceAll().toTree();if(this.recovering){var u=1==this.recovering?1:this.recovering*m;this.stacks.length>u&&(this.stacks.sort(function(t,e){return t.recovered-e.recovered}),this.stacks.length=u),this.stacks.some(function(t){return t.reducePos>e})&&this.recovering--}else if(this.stacks.length>1&&this.stacks[0].buffer.length>T){var p=1e9,c=-1;for(i=0;i<this.stacks.length;i++){(o=this.stacks[i]).buffer.length<p&&(p=o.buffer.length,c=i)}p>T&&this.stacks.splice(c,1)}return this.tokenCount++,null},t.prototype.advanceStack=function(t,r){var s=t.pos,i=t.cx,n=i.input,a=i.parser,h=d?t+" -> ":"";if(this.cache)for(var u=this.cache.nodeAt(s);u;){var p=a.group.types[u.type.id]==u.type?a.getGoto(t.state,u.type.id):-1;if(p>-1)return t.useNode(u,p),d&&console.log(h+t+" (via reuse of "+a.getName(u.type.id)+")"),t;if(!(u instanceof e.Tree)||0==u.children.length||u.positions[0]>0)break;var c=u.children[0];if(!(c instanceof e.Tree))break;u=c}var f=a.startNested(t.state);t:if(f>-1){var l=a.nested[f],v=l.grammar,g=l.end,y=l.placeholder,b=void 0,k=null,m=void 0,T=void 0,N=void 0;if("function"==typeof v){var P=v(n,t);if(P.stay)break t;k=P.parseNode,m=P.parser,T=P.top,b=P.filterEnd,N=P.wrapType}else m=v;var w=this.scanForNestEnd(t,g,b),S=t.cx.input.clip(w);if(k||!m){var O=k?k(S,t.pos):e.Tree.empty;return O.length!=w-t.pos&&(O=new e.Tree(O.type,O.children,O.positions,w-t.pos)),null!=N&&(O=new e.Tree(a.group.types[N],[O],[0],O.length)),t.useNode(O,a.getGoto(t.state,y,!0)),t}var R=T?m.topRules[T]:m.defaultTop,j=o.start(new x(m,t.cx.maxBufferLength,S,R[1],t,N),R[0],t.pos);return d&&console.log(h+j+" (nested)"),j}var z=a.stateSlot(t.state,4);if(z>0)return t.reduce(z),d&&console.log(h+t+" (via always-reduce "+a.getName(65535&z)+")"),t;for(var B=t.cx.tokens.getActions(t,n),C=0;C<B.length;){var G=B[C++],F=B[C++],_=(w=B[C++],C==B.length||!r),E=_?t:t.split();if(E.apply(G,F,w),d&&console.log(h+E+" (via "+(0==(65536&G)?"shift":"reduce of "+a.getName(65535&G))+" for "+a.getName(F)+" @ "+s+(E==t?"":", split")+")"),_)return E;E.pos>s?this.putStack(E):r.push(E)}return t.cx.parent&&t.pos==n.length?A(t):null},t.prototype.advanceFully=function(t){for(var e=t.pos;;){var r=this.advanceStack(t,null);if(!r)return t;if(r.pos>e)return this.putStack(r),null;t=r}},t.prototype.runRecovery=function(t,e){for(var r=null,s=0;s<t.length;s++){for(var i=t[s],o=e[s<<1],n=e[1+(s<<1)],a=d?i+" -> ":"",h=i.split(),u=a,p=0;h.forceReduce()&&p<N;p++){d&&console.log(u+h+" (via force-reduce)");var c=this.advanceFully(h);if(!c)break;h=c,d&&(u=c+" -> ")}for(var f=0,l=i.recoverByInsert(o);f<l.length;f++){var v=l[f];d&&console.log(a+v+" (via recover-insert)"),this.advanceFully(v)}i.cx.input.length>i.pos?(n==i.pos&&(n++,o=0),i.recoverByDelete(o,n),d&&console.log(a+i+" (via recover-delete "+i.cx.parser.getName(o)+")"),this.putStack(i)):i.cx.parent||r&&!(r.recovered>i.recovered)||(r=i)}return r},t.prototype.forceFinish=function(){return this.stacks[0].split().forceAll().toTree()},Object.defineProperty(t.prototype,"badness",{get:function(){return 2*this.stacks[0].recovered/this.tokenCount},enumerable:!0,configurable:!0}),t.prototype.scanForNestEnd=function(t,e,r){for(var s=t.cx.input,i=t.pos;i<s.length;i++)if(y.start=i,y.value=-1,e.token(s,y,t),y.value>-1&&(!r||r(s.read(i,y.end))))return i;return s.length},t}();exports.ParseContext=P;var w=function(){function t(t,e,r,s,i,o,n,a,h,u,p,c){void 0===c&&(c=null),this.states=t,this.data=e,this.goto=r,this.group=s,this.minRepeatTerm=i,this.tokenizers=o,this.topRules=n,this.nested=a,this.specializeTable=h,this.specializations=u,this.tokenPrecTable=p,this.termNames=c,this.nextStateCache=[],this.maxNode=this.group.types.length-1,this.maxRepeatWrap=this.group.types.length+(this.group.types.length-i)-1;for(var f=0,l=this.states.length/6;f<l;f++)this.nextStateCache[f]=null}return t.prototype.parse=function(t,e){"string"==typeof t&&(t=new u(t));for(var r=new P(this,t,e);;){var s=r.advance();if(s)return s}},t.prototype.startParse=function(t,e){return"string"==typeof t&&(t=new u(t)),new P(this,t,e)},t.prototype.getGoto=function(t,e,r){void 0===r&&(r=!1);var s=this.goto;if(e>=s[0])return-1;for(var i=s[e+1];;){var o=s[i++],n=1&o,a=s[i++];if(n&&r)return a;for(var h=i+(o>>1);i<h;i++)if(s[i]==t)return a;if(n)return-1}},t.prototype.hasAction=function(t,e){for(var r=this.data,s=0;s<2;s++)for(var i=this.stateSlot(t,s?2:1),o=void 0;65535!=(o=r[i]);i+=3)if(o==e||0==o)return r[i+1]|r[i+2]<<16;return 0},t.prototype.stateSlot=function(t,e){return this.states[6*t+e]},t.prototype.stateFlag=function(t,e){return(this.stateSlot(t,0)&e)>0},t.prototype.startNested=function(t){var e=this.stateSlot(t,0);return 4&e?e>>10:-1},t.prototype.validAction=function(t,e){if(e==this.stateSlot(t,4))return!0;for(var r=this.stateSlot(t,1);;r+=3){if(65535==this.data[r])return!1;if(e==(this.data[r+1]|this.data[r+2]<<16))return!0}},t.prototype.nextStates=function(t){var e=this.nextStateCache[t];if(e)return e;for(var r=[],s=this.stateSlot(t,1);65535!=this.data[s];s+=3)0!=(1&this.data[s+2])||r.includes(this.data[s+1])||r.push(this.data[s+1]);for(var i=this.goto,o=i[0],n=0;n<o;n++)for(var a=i[n+1];;){for(var h=i[a++],u=i[a++],p=a+(h>>1);a<p;a++)i[a]!=t||r.includes(u)||r.push(u);if(1&h)break}return this.nextStateCache[t]=r},t.prototype.overrides=function(t,e){var r=O(this.data,this.tokenPrecTable,e);return r<0||O(this.data,this.tokenPrecTable,t)<r},t.prototype.withNested=function(e){return new t(this.states,this.data,this.goto,this.group,this.minRepeatTerm,this.tokenizers,this.topRules,this.nested.map(function(t){return Object.prototype.hasOwnProperty.call(e,t.name)?{name:t.name,grammar:e[t.name],end:t.end,placeholder:t.placeholder}:t}),this.specializeTable,this.specializations,this.tokenPrecTable,this.termNames)},t.prototype.withProps=function(){for(var e,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return new t(this.states,this.data,this.goto,(e=this.group).extend.apply(e,r),this.minRepeatTerm,this.tokenizers,this.topRules,this.nested,this.specializeTable,this.specializations,this.tokenPrecTable,this.termNames)},t.prototype.getName=function(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.group.types[t].name||t)},Object.defineProperty(t.prototype,"eofTerm",{get:function(){return this.maxRepeatWrap+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasNested",{get:function(){return this.nested.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultTop",{get:function(){return this.topRules[Object.keys(this.topRules)[0]]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topType",{get:function(){return this.group.types[this.defaultTop[1]]},enumerable:!0,configurable:!0}),t.deserialize=function(r){for(var s=l(r.tokenData),i=r.nodeNames.split(" "),o=i.length,n=0;n<r.repeatNodeCount;n++)i.push("");var a=[];for(n=0;n<i.length;n++)a.push(S);function h(t,e,r){a[t]==S&&(a[t]=Object.create(null)),e.set(a[t],e.deserialize(r))}if(h(0,e.NodeProp.error,""),r.nodeProps)for(var u=0,c=r.nodeProps;u<c.length;u++){var f=c[u],d=f[0];for(n=1;n<f.length;n+=2)h(f[n],d,f[n+1])}var v=new e.NodeGroup(i.map(function(t,r){return new e.NodeType(t,a[r],r)}));return new t(l(r.states,Uint32Array),l(r.stateData),l(r.goto),v,o,r.tokenizers.map(function(t){return"number"==typeof t?new p(s,t):t}),r.topRules,(r.nested||[]).map(function(t){var e=t[0],r=t[1],s=t[2],i=t[3];return{name:e,grammar:r,end:new p(l(s),0),placeholder:i}}),r.specializeTable,(r.specializations||[]).map(R),r.tokenPrec,r.termNames)},t}();exports.Parser=w;var S=Object.create(null);function O(t,e,r){for(var s=e,i=void 0;65535!=(i=t[s]);s++)if(i==r)return s-e;return-1}function R(t){if(!(t instanceof Object))return t;var e=Object.create(null);for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function j(t){for(var e=null,r=0,s=t;r<s.length;r++){var i=s[r];i.pos==i.cx.input.length&&i.cx.parser.stateFlag(i.state,2)&&(!e||e.recovered>i.recovered)&&(e=i)}return e}function A(t){if(-2==t.cx.wrapType)return null;var r=t.cx.parent,s=t.forceAll().toTree(),i=r.cx.parser,o=i.nested[i.startNested(r.state)];return s=new e.Tree(s.type,s.children,s.positions.map(function(t){return t-r.pos}),t.pos-r.pos),t.cx.wrapType>-1&&(s=new e.Tree(i.group.types[t.cx.wrapType],[s],[0],s.length)),t.cx.wrapType=-2,r.useNode(s,i.getGoto(r.state,o.placeholder,!0)),d&&console.log(r+" (via unnest "+(t.cx.wrapType>-1?i.getName(t.cx.wrapType):s.type.name)+")"),r}
},{"lezer-tree":"cV7P","process":"g5IB"}],"CQsF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var O=require("lezer"),P=O.Parser.deserialize({states:"$bOSOPOOOROP'#Cb'#CbOjOPO'#CcOqOPO'#CfOROP'#Cn'#CnQROPOOOROP'#Ce'#CeO![OPO'#CdOROP,58},58}O!`OPO,58}OROP,59Q,59QO!gOPO,59QOSOPO,59OO!nOPO'#CiO!uOPO'#CgO!yOPO1G.iO!}OPO'#CjOSOPO'#ChO#UOPO1G.lOROP1G.j1G.jOROP,59R,59ROROP-E6e-E6eOROP7+$T7+$TOROP,59S,59SOROP-E6f-E6fOROP7+$W7+$W",stateData:"#YaOS~QSORSOSSOTSOcPOdQOhRO~cUOgWO~QSORSOSSOTSOcPOdQOhROiYO~e[O~f^Og]P~faOi^P~f^Og]X~cUO~gfO~faOi^X~iiO~",goto:"!dcPPPPPPddjpdtz!Q!TPPP!WXSOR[aQXQRe^TVQ^Q]XRd]Q`ZRg`R_XRbZQTOQZRQc[Rha",nodeNames:"⚠ JsonText True False Null Number String Object Property PropertyName Array",nodeProps:[[O.NodeProp.top,1,!0],[O.NodeProp.delim,7,"{ }",10,"[ ]"]],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oa~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOc~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOf~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOe~~&rOh~~&wOi~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOd~~(pOg~",tokenizers:[0],topRules:{JsonText:[0,1]},specializeTable:3,tokenPrec:3});exports.parser=P;
},{"lezer":"rBS1"}],"lgAh":[function(require,module,exports) {
"use strict";var e=require("@codemirror/next/view"),r=require("@codemirror/next/state"),n=require("@codemirror/next/highlight"),t=require("@codemirror/next/gutter"),i=require("@codemirror/next/keymap"),s=require("@codemirror/next/commands"),o=require("@codemirror/next/matchbrackets"),a=require("@codemirror/next/closebrackets"),u=require("@codemirror/next/special-chars"),c=require("@codemirror/next/fold"),l=require("./dist/index"),d=require("lezer-tree"),m=require("@codemirror/next/syntax");function p(){var e=b(['{\n  "literals": [true, false, null],\n  "numbers": [1, 123, 123.5, -123, 43e5, 23e-5, 23e+5],\n  "strings": [\n    "A simple string",\n    "Escapes: \n\b\r\t",\n    "Unicode: \\"\n  ],\n  {\n    "let us": {\n      "nest": ["some", "things"]\n    }\n  }\n}'],['{\n  "literals": [true, false, null],\n  "numbers": [1, 123, 123.5, -123, 43e5, 23e-5, 23e+5],\n  "strings": [\n    "A simple string",\n    "Escapes: \\n\\b\\r\\t",\n    "Unicode: \\u005c"\n  ],\n  {\n    "let us": {\n      "nest": ["some", "things"]\n    }\n  }\n}']);return p=function(){return e},e}function b(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}var f=String.raw(p()),g=new m.LezerSyntax(l.parser.withProps(m.foldNodeProp.add({Array:function(e){return{from:e.start+1,to:e.end-1}},Object:function(e){return{from:e.start+1,to:e.end-1}}}),(0,n.styleTags)({Number:"number",String:"string","True False":"atom",Null:"null",PropertyName:"propertyName"}))),x=new e.EditorView({state:r.EditorState.create({doc:f,extensions:[(0,t.lineNumbers)(),n.defaultHighlighter,(0,i.keymap)(s.baseKeymap),(0,u.specialChars)(),a.closeBrackets,(0,o.bracketMatching)(),(0,c.foldGutter)(),g]})});document.body.appendChild(x.dom);
},{"@codemirror/next/view":"NHOh","@codemirror/next/state":"R3Cy","@codemirror/next/highlight":"L5yp","@codemirror/next/gutter":"v8f1","@codemirror/next/keymap":"Vilf","@codemirror/next/commands":"BYFp","@codemirror/next/matchbrackets":"skYY","@codemirror/next/closebrackets":"y5Ln","@codemirror/next/special-chars":"Igag","@codemirror/next/fold":"JKwM","./dist/index":"CQsF","lezer-tree":"cV7P","@codemirror/next/syntax":"punM"}]},{},["lgAh"], null)
//# sourceMappingURL=demo.5d883921.js.map